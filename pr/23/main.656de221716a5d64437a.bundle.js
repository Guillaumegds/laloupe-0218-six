webpackJsonp([1],{"+3/4":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("TToO"),i=function(t){function e(e){t.call(this),this.scheduler=e}return Object(r.__extends)(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(n("YaPU").a)},"+CnV":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){var e,r=n("AMGY").a.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}()},"+iia":function(t,e,n){(function(t){var e=function(){if("undefined"!=typeof t)return t;if("undefined"!=typeof window)return window;if("undefined"!=typeof self)return self;throw new Error("unable to locate global object")}();"undefined"==typeof Promise&&(e.Promise=Promise=n("Gs/g"))}).call(e,n("DuR2"))},"+lT7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("9/vk");e.assert=r.assert,e.assertionError=r.assertionError;var i=n("ZCyv");e.base64=i.base64,e.base64Decode=i.base64Decode,e.base64Encode=i.base64Encode;var o=n("Ex2A");e.CONSTANTS=o.CONSTANTS;var s=n("iNRZ");e.deepCopy=s.deepCopy,e.deepExtend=s.deepExtend,e.patchProperty=s.patchProperty;var a=n("T970");e.Deferred=a.Deferred;var u=n("C2tt");e.getUA=u.getUA,e.isMobileCordova=u.isMobileCordova,e.isNodeSdk=u.isNodeSdk,e.isReactNative=u.isReactNative;var c=n("GmLp");e.ErrorFactory=c.ErrorFactory,e.FirebaseError=c.FirebaseError,e.patchCapture=c.patchCapture;var l=n("sA4o");e.jsonEval=l.jsonEval,e.stringify=l.stringify;var h=n("lt8x");e.decode=h.decode,e.isAdmin=h.isAdmin,e.issuedAtTime=h.issuedAtTime,e.isValidFormat=h.isValidFormat,e.isValidTimestamp=h.isValidTimestamp;var f=n("Whum");e.clone=f.clone,e.contains=f.contains,e.every=f.every,e.extend=f.extend,e.findKey=f.findKey,e.findValue=f.findValue,e.forEach=f.forEach,e.getAnyKey=f.getAnyKey,e.getCount=f.getCount,e.getValues=f.getValues,e.isEmpty=f.isEmpty,e.isNonNullObject=f.isNonNullObject,e.map=f.map,e.safeGet=f.safeGet;var p=n("YNQF");e.querystring=p.querystring,e.querystringDecode=p.querystringDecode;var d=n("IYGj");e.Sha1=d.Sha1;var y=n("r3eQ");e.async=y.async,e.createSubscribe=y.createSubscribe;var v=n("U/B+");e.errorPrefix=v.errorPrefix,e.validateArgCount=v.validateArgCount,e.validateCallback=v.validateCallback,e.validateContextObject=v.validateContextObject,e.validateNamespace=v.validateNamespace;var m=n("m4rg");e.stringLength=m.stringLength,e.stringToByteArray=m.stringToByteArray},"/iUD":function(t,e,n){"use strict";e.a=function(t){return"function"==typeof t}},"/nXB":function(t,e,n){"use strict";e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,a=null,u=t[t.length-1];return Object(o.a)(u)?(a=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===a&&1===t.length&&t[0]instanceof r.a?t[0]:Object(s.a)(n)(new i.a(t,a))};var r=n("YaPU"),i=n("Veqx"),o=n("1Q68"),s=n("8D5t")},0:function(t,e,n){t.exports=n("x35b")},"0P3J":function(t,e,n){"use strict";e.a=function(){return function(t){return t.lift(new o(t))}};var r=n("TToO"),i=n("OVmG"),o=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),s=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Object(r.__extends)(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(i.a)},"1Bqh":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("TToO"),i=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return Object(r.__extends)(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n("VwZZ").a)},"1Q68":function(t,e,n){"use strict";e.a=function(t){return t&&"function"==typeof t.schedule}},"3a3m":function(t,e,n){"use strict";e.a=function(){return function(t){return Object(i.a)()(Object(r.a)(s)(t))}};var r=n("Jwyl"),i=n("0P3J"),o=n("g5jc");function s(){return new o.b}},"8D5t":function(t,e,n){"use strict";e.a=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(r.a)(i.a,null,t)};var r=n("Qnch"),i=n("lAP5")},"9/vk":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Ex2A");e.assert=function(t,n){if(!t)throw e.assertionError(n)},e.assertionError=function(t){return new Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)}},"9eBd":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("+lT7"),i=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o="[DEFAULT]",s=[],a=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e,this.options_=Object(r.deepCopy)(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){s.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){s=s.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;Object(r.deepExtend)(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(s.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),s=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();function u(t,e){throw c.create(t,e)}a.prototype.name&&a.prototype.options||a.prototype.delete||console.log("dc");var c=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."});n.d(e,"firebase",function(){return l});var l=function t(){var e={},n={},s={},c={__esModule:!0,initializeApp:function(t,n){void 0===n?n=o:"string"==typeof n&&""!==n||u("bad-app-name",{name:n+""}),i(e,n)&&u("duplicate-app",{name:n});var r=new a(t,n,c);return e[n]=r,f(r,"create"),r},app:l,apps:null,Promise:Promise,SDK_VERSION:"4.10.1",INTERNAL:{registerService:function(t,e,i,o,f){n[t]&&u("duplicate-service",{name:t}),n[t]=e,o&&(s[t]=o,h().forEach(function(t){o("create",t)}));var p=function(e){return void 0===e&&(e=l()),"function"!=typeof e[t]&&u("invalid-app-argument",{name:t}),e[t]()};return void 0!==i&&Object(r.deepExtend)(p,i),c[t]=p,a.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,f?e:[])},p},createFirebaseNamespace:t,extendNamespace:function(t){Object(r.deepExtend)(c,t)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(t){f(e[t],"delete"),delete e[t]},factories:n,useAsService:p,Promise:Promise,deepExtend:r.deepExtend}};function l(t){return i(e,t=t||o)||u("no-app",{name:t}),e[t]}function h(){return Object.keys(e).map(function(t){return e[t]})}function f(t,e){Object.keys(n).forEach(function(n){var r=p(0,n);null!==r&&s[r]&&s[r](e,t)})}function p(t,e){return"serverAuth"===e?null:e}return Object(r.patchProperty)(c,"default",c),Object.defineProperty(c,"apps",{get:h}),Object(r.patchProperty)(l,"App",a),c}();e.default=l},AMGY:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var r="undefined"!=typeof window&&window,i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=r||"undefined"!=typeof t&&t||i}).call(e,n("DuR2"))},BX3T:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},C2tt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Ex2A");e.getUA=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(e.getUA())},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isNodeSdk=function(){return!0===r.CONSTANTS.NODE_CLIENT||!0===r.CONSTANTS.NODE_ADMIN}},Df3s:function(module,exports,__webpack_require__){(function(global){(function(){var g,goog=goog||{},k=this;function l(t){return"string"==typeof t}function aa(){}function ba(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function n(t){return"array"==ba(t)}function ca(t){var e=ba(t);return"array"==e||"object"==e&&"number"==typeof t.length}function da(t){return"function"==ba(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var q="closure_uid_"+(1e9*Math.random()>>>0),ea=0;function fa(t,e,n){return t.call.apply(t.bind,arguments)}function ha(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function r(t,e,n){return(r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fa:ha).apply(null,arguments)}function ia(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var t=Date.now||function(){return+new Date};function u(t,e){function n(){}n.prototype=e.prototype,t.H=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Cb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ja(t){if(Error.captureStackTrace)Error.captureStackTrace(this,ja);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function ka(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}u(ja,Error),ja.prototype.name="CustomError";var la=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function ma(t,e){return t<e?-1:t>e?1:0}function na(t,e){e.unshift(t),ja.call(this,ka.apply(null,e)),e.shift()}function oa(t,e){throw new na("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function w(){0!=qa&&(ra[this[q]||(this[q]=++ea)]=this),this.i=this.i,this.w=this.w}u(na,ja),na.prototype.name="AssertionError";var qa=0,ra={};w.prototype.i=!1,w.prototype.Z=function(){if(!this.i&&(this.i=!0,this.A(),0!=qa)){var t=this[q]||(this[q]=++ea);delete ra[t]}},w.prototype.A=function(){if(this.w)for(;this.w.length;)this.w.shift()()};var sa=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(l(t))return l(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ta=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=l(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},x;function ua(t){t:{for(var e=va,n=t.length,r=l(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:l(t)?t.charAt(e):t[e]}function wa(t){if(!n(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function xa(t){return Array.prototype.concat.apply([],arguments)}function ya(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}t:{var za=k.navigator;if(za){var Aa=za.userAgent;if(Aa){x=Aa;break t}}x=""}function y(t){return-1!=x.indexOf(t)}function Ba(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ca(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function Da(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function Ea(t){var e,n={};for(e in t)n[e]=t[e];return n}var Fa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ga(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Fa.length;o++)n=Fa[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ha(t){return Ha[" "](t),t}function Ia(t,e){var n=Ja;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}Ha[" "]=aa;var Ka=y("Opera"),z=y("Trident")||y("MSIE"),La=y("Edge"),Ma=y("Gecko")&&!(-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),Na=-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"),Pa,a;function Oa(){var t=k.document;return t?t.documentMode:void 0}t:{var Qa="",Ra=(a=x,Ma?/rv:([^\);]+)(\)|;)/.exec(a):La?/Edge\/([\d\.]+)/.exec(a):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Na?/WebKit\/(\S+)/.exec(a):Ka?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Ra&&(Qa=Ra?Ra[1]:""),z){var Sa=Oa();if(null!=Sa&&Sa>parseFloat(Qa)){Pa=String(Sa);break t}}Pa=Qa}var Ja={},Ua;function Ta(t){return Ia(t,function(){for(var e=0,n=la(String(Pa)).split("."),r=la(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ma(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ma(0==s[2].length,0==a[2].length)||ma(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Va=k.document;Ua=Va&&z?Oa()||("CSS1Compat"==Va.compatMode?parseInt(Pa,10):5):void 0;var Wa=Object.freeze||function(t){return t},Xa=!z||9<=Number(Ua),Ya=z&&!Ta("9"),Za=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return k.addEventListener("test",aa,e),k.removeEventListener("test",aa,e),t}();function A(t,e){this.type=t,this.a=this.target=e,this.Pa=!0}function $a(t,e){if(A.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ma){t:{try{Ha(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=l(t.pointerType)?t.pointerType:ab[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}A.prototype.b=function(){this.Pa=!1},u($a,A);var ab=Wa({2:"touch",3:"pen",4:"mouse"});$a.prototype.b=function(){$a.H.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ya)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var bb="closure_listenable_"+(1e6*Math.random()|0);function cb(t){return!(!t||!t[bb])}var db=0;function eb(t,e,n,r,i){this.listener=t,this.a=null,this.src=e,this.type=n,this.capture=!!r,this.ga=i,this.key=++db,this.Y=this.ca=!1}function fb(t){t.Y=!0,t.listener=null,t.a=null,t.src=null,t.ga=null}function gb(t){this.src=t,this.a={},this.b=0}function ib(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=sa(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(fb(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function jb(t,e,n,r,i){return t=t.a[e.toString()],e=-1,t&&(e=hb(t,n,r,i)),-1<e?t[e]:null}function hb(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ga==r)return i}return-1}gb.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=hb(t,e,r,i);return-1<s?(e=t[s],n||(e.ca=!1)):((e=new eb(e,this.src,o,!!r,i)).ca=n,t.push(e)),e};var kb="closure_lm_"+(1e6*Math.random()|0),lb={},mb=0;function nb(t,e,r,i,o){if(i&&i.once)return ob(t,e,r,i,o);if(n(e)){for(var s=0;s<e.length;s++)nb(t,e[s],r,i,o);return null}return r=pb(r),cb(t)?t.aa(e,r,p(i)?!!i.capture:!!i,o):qb(t,e,r,!1,i,o)}function qb(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i,a=rb(t);if(a||(t[kb]=a=new gb(t)),(n=a.add(e,n,r,s,o)).a)return n;if(r=sb(),n.a=r,r.src=t,r.listener=n,t.addEventListener)Za||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tb(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return mb++,n}function sb(){var t=ub,e=Xa?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function ob(t,e,r,i,o){if(n(e)){for(var s=0;s<e.length;s++)ob(t,e[s],r,i,o);return null}return r=pb(r),cb(t)?t.Ha(e,r,p(i)?!!i.capture:!!i,o):qb(t,e,r,!0,i,o)}function vb(t,e,r,i,o){if(n(e))for(var s=0;s<e.length;s++)vb(t,e[s],r,i,o);else i=p(i)?!!i.capture:!!i,r=pb(r),cb(t)?t.va(e,r,i,o):t&&(t=rb(t))&&(e=jb(t,e,r,i,o))&&wb(e)}function wb(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(cb(e))ib(e.c,t);else{var n=t.type,r=t.a;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),mb--,(n=rb(e))?(ib(n,t),0==n.b&&(n.src=null,e[kb]=null)):fb(t)}}}function tb(t){return t in lb?lb[t]:lb[t]="on"+t}function xb(t,e,n,r){var i=!0;if((t=rb(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Y&&(o=yb(o,r),i=i&&!1!==o)}return i}function yb(t,e){var n=t.listener,r=t.ga||t.src;return t.ca&&wb(t),n.call(r,e)}function ub(t,e){if(t.Y)return!0;if(!Xa){if(!e)t:{e=["window","event"];for(var n=k,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new $a(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.a;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.a=r[i];var o=xb(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.a=r[i],o=xb(r[i],t,!1,e),n=n&&o}return n}return yb(t,new $a(e,this))}function rb(t){return(t=t[kb])instanceof gb?t:null}var zb="__closure_events_fn_"+(1e9*Math.random()>>>0);function pb(t){return da(t)?t:(t[zb]||(t[zb]=function(e){return t.handleEvent(e)}),t[zb])}function B(){w.call(this),this.c=new gb(this),this.P=this,this.K=null}function Ab(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ga||s.src;s.ca&&ib(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Pa}function Bb(t){return!/^\s*$/.test(t)&&/^[\],:{}\s\u2028\u2029]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function Cb(a){if(a=String(a),Bb(a))try{return eval("("+a+")")}catch(t){}throw Error("Invalid JSON string: "+a)}function Db(t){var e=[];return Eb(new Fb,t,e),e.join("")}function Fb(){}function Eb(t,e,r){if(null==e)r.push("null");else{if("object"==typeof e){if(n(e)){var i=e;e=i.length,r.push("[");for(var o="",s=0;s<e;s++)r.push(o),Eb(t,i[s],r),o=",";return void r.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(i in r.push("{"),o="",e)Object.prototype.hasOwnProperty.call(e,i)&&"function"!=typeof(s=e[i])&&(r.push(o),Gb(i,r),r.push(":"),Eb(t,s,r),o=",");return void r.push("}")}e=e.valueOf()}switch(typeof e){case"string":Gb(e,r);break;case"number":r.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":r.push(String(e));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}u(B,w),B.prototype[bb]=!0,g=B.prototype,g.addEventListener=function(t,e,n,r){nb(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){vb(this,t,e,n,r)},g.dispatchEvent=function(t){var e,n=this.K;if(n)for(e=[];n;n=n.K)e.push(n);n=this.P;var r=t.type||t;if(l(t))t=new A(t,n);else if(t instanceof A)t.target=t.target||n;else{var i=t;Ga(t=new A(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Ab(s,r,!0,t)&&i}if(i=Ab(s=t.a=n,r,!0,t)&&i,i=Ab(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Ab(s=t.a=e[o],r,!1,t)&&i;return i},g.A=function(){if(B.H.A.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)fb(n[r]);delete e.a[t],e.b--}}this.K=null},g.aa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},g.Ha=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)},g.va=function(t,e,n,r){var i=this.c;if((t=String(t).toString())in i.a){var o=i.a[t];-1<(e=hb(o,e,n,r))&&(fb(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete i.a[t],i.b--))}};var Hb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ib=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Gb(t,e){e.push('"',t.replace(Ib,function(t){var e=Hb[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Hb[t]=e),e}),'"')}function Jb(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Kb(){this.b=this.a=null}Jb.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Nb=new Jb(function(){return new Lb},function(t){t.reset()}),Rb,Tb;function Ob(){var t=Pb,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lb(){this.next=this.b=this.a=null}function Qb(t){k.setTimeout(function(){throw t},0)}function Sb(){var t=k.MessageChannel;if("undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!y("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=r(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),"undefined"!=typeof t&&!y("Trident")&&!y("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).za;n.za=null,t()}},function(t){i.next={za:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){k.setTimeout(t,0)}}function Ub(){if(-1!=String(k.Promise).indexOf("[native code]")){var t=k.Promise.resolve(void 0);Tb=function(){t.then(Vb)}}else Tb=function(){var t=Vb;!da(k.setImmediate)||k.Window&&k.Window.prototype&&!y("Edge")&&k.Window.prototype.setImmediate==k.setImmediate?(Rb||(Rb=Sb()),Rb(t)):k.setImmediate(t)}}Kb.prototype.add=function(t,e){var n=Nb.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lb.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lb.prototype.reset=function(){this.next=this.b=this.a=null};var Wb=!1,Pb=new Kb;function Vb(){for(var t;t=Ob();){try{t.a.call(t.b)}catch(t){Qb(t)}var e=Nb;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Wb=!1}function Xb(e,n){B.call(this),this.b=e||1,this.a=n||k,this.f=r(this.kb,this),this.g=t()}function Yb(t){t.$=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Zb(t,e,n){if(da(t))n&&(t=r(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=r(t.handleEvent,t)}return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function $b(t,e,n){w.call(this),this.f=null!=n?r(t,n):t,this.c=e,this.b=r(this.eb,this),this.a=[]}function ac(t){t.X=Zb(t.b,t.c),t.f.apply(null,t.a)}function C(t){w.call(this),this.b=t,this.a={}}u(Xb,B),g=Xb.prototype,g.$=!1,g.L=null,g.kb=function(){if(this.$){var e=t()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.$&&(this.L=this.a.setTimeout(this.f,this.b),this.g=t()))}},g.start=function(){this.$=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=t())},g.A=function(){Xb.H.A.call(this),Yb(this),delete this.a},u($b,w),g=$b.prototype,g.ha=!1,g.X=null,g.Xa=function(t){this.a=arguments,this.X?this.ha=!0:ac(this)},g.A=function(){$b.H.A.call(this),this.X&&(k.clearTimeout(this.X),this.X=null,this.ha=!1,this.a=[])},g.eb=function(){this.X=null,this.ha&&(this.ha=!1,ac(this))},u(C,w);var bc=[];function cc(t){Ba(t.a,function(t,e){this.a.hasOwnProperty(e)&&wb(t)},t),t.a={}}function dc(t,e,n){this.reset(t,e,n,void 0,void 0)}C.prototype.aa=function(t,e,r,i){n(e)||(e&&(bc[0]=e.toString()),e=bc);for(var o=0;o<e.length;o++){var s=nb(t,e[o],r||this.handleEvent,i||!1,this.b||this);if(!s)break;this.a[s.key]=s}return this},C.prototype.va=function(t,e,r,i,o){if(n(e))for(var s=0;s<e.length;s++)this.va(t,e[s],r,i,o);else r=r||this.handleEvent,i=p(i)?!!i.capture:!!i,o=o||this.b||this,r=pb(r),i=!!i,(e=cb(t)?jb(t.c,String(e),r,i,o):t&&(t=rb(t))?jb(t,e,r,i,o):null)&&(wb(e),delete this.a[e.key])},C.prototype.A=function(){C.H.A.call(this),cc(this)},C.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dc.prototype.a=null;var ec=0;function fc(t){this.f=t,this.b=this.c=this.a=null}function D(t,e){this.name=t,this.value=e}dc.prototype.reset=function(e,n,r,i,o){"number"==typeof o||ec++,i||t(),delete this.a},D.prototype.toString=function(){return this.name};var gc=new D("SEVERE",1e3),hc=new D("WARNING",900),ic=new D("INFO",800),jc=new D("CONFIG",700),kc=new D("FINE",500);function lc(t){return t.c?t.c:t.a?lc(t.a):(oa("Root logger has no level set."),null)}fc.prototype.log=function(t,e,n){if(t.value>=lc(this).value)for(da(e)&&(e=e()),t=new dc(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var mc={},nc=null;function oc(t){var e;if(nc||(nc=new fc(""),mc[""]=nc,nc.c=jc),!(e=mc[t])){e=new fc(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=oc(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,mc[t]=e}return e}function E(t,e){t&&t.log(hc,e,void 0)}function pc(t,e){t&&t.log(ic,e,void 0)}function F(t,e){t&&t.log(kc,e,void 0)}function qc(){this.a=oc("goog.labs.net.webChannel.WebChannelDebug"),this.b=!0}function rc(t,e,n,r,i,o){H(t,function(){if(t.b)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}function sc(t,e,n,r,i,o,s){H(t,function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}function tc(t,e,n,r){H(t,function(){return"XMLHTTP TEXT ("+e+"): "+uc(t,n)+(r?" "+r:"")})}function vc(t,e){H(t,function(){return"TIMEOUT: "+e})}function I(t,e){F(t.a,e)}function wc(t,e,n){(t=t.a)&&t.log(gc,n||"Exception",e)}function H(t,e){pc(t.a,e)}function xc(t,e){(t=t.a)&&t.log(gc,e,void 0)}function uc(t,e){if(!t.b)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(var i=0;i<r.length;i++)if(n(r[i])){var o=r[i];if(!(2>o.length)){var s=o[1];if(n(s)&&!(1>s.length)){var a=s[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<s.length;u++)s[u]=""}}}return Db(r)}catch(n){return I(t,"Exception parsing expected JS array - probably was not JS"),e}}qc.prototype.Ea=function(){this.b=!1};var yc=new B;function zc(t){A.call(this,"serverreachability",t)}function Ac(t){yc.dispatchEvent(new zc(yc,t))}function Bc(t){A.call(this,"statevent",t)}function J(t){yc.dispatchEvent(new Bc(yc,t))}function Cc(t){A.call(this,"timingevent",t)}function Dc(t,e,n){yc.dispatchEvent(new Cc(yc,t,e,n))}function Ec(t,e){if(!da(t))throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}u(zc,A),u(Bc,A),u(Cc,A);var Fc={NO_ERROR:0,lb:1,sb:2,rb:3,ob:4,qb:5,tb:6,Ra:7,TIMEOUT:8,wb:9},Gc={nb:"complete",Ab:"success",Sa:"error",Ra:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",pb:"downloadprogress",Bb:"uploadprogress"},Kc;function Hc(){}function Ic(t){var e;return(e=t.a)||(e={},Jc(t)&&(e[0]=!0,e[1]=!0),e=t.a=e),e}function Lc(){}function Mc(t){return(t=Jc(t))?new ActiveXObject(t):new XMLHttpRequest}function Jc(t){if(!t.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.b=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.b}function K(t,e,n,r){this.i=t,this.b=e,this.f=n,this.T=r||1,this.N=new C(this),this.S=Nc,(t=this.I=new Xb).b=Oc,t.L&&t.$?(Yb(t),t.start()):t.L&&Yb(t),this.j=null,this.c=!1,this.m=this.g=this.h=this.K=this.D=this.U=this.w=null,this.u=[],this.a=null,this.F=0,this.l=this.o=null,this.C=-1,this.B=!1,this.P=0,this.J=null,this.M=!1}Hc.prototype.a=null,u(Lc,Hc),Kc=new Lc;var Nc=45e3,Oc=250;function Pc(t,e){switch(t){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}var Qc={},Rc={};function Sc(t,e,n){t.K=1,t.h=Tc(L(e)),t.m=n,t.M=!0,Uc(t,null)}function Vc(t,e,n,r){t.K=1,t.h=Tc(L(e)),t.m=null,t.M=n,Uc(t,r)}function Uc(e,n){e.D=t(),Wc(e),e.g=L(e.h),Xc(e.g,"t",e.T),e.F=0,e.a=e.i.da(e.i.ia()?n:null),0<e.P&&(e.J=new $b(r(e.Qa,e,e.a),e.P)),e.N.aa(e.a,"readystatechange",e.hb),n=e.j?Ea(e.j):{},e.m?(e.o||(e.o="POST"),n["Content-Type"]="application/x-www-form-urlencoded",e.a.fa(e.g,e.o,e.m,n)):(e.o="GET",e.a.fa(e.g,e.o,null,n)),Ac(1),rc(e.b,e.o,e.g,e.f,e.T,e.m)}function Yc(t){var e=M(t.a),n=t.a.Fa(),r=t.a.W();if(!(3>e||3==e&&!Ka&&!t.a.V())){t.B||4!=e||7==n||Ac(8==n||0>=r?3:2),Zc(t);var i=t.a.W();t.C=i,(n=t.a.V())||I(t.b,function(){return"No response text for uri "+t.g+" status "+i}),t.c=200==i,sc(t.b,t.o,t.g,t.f,t.T,e,i),t.c?(t.M?($c(t,e,n),Ka&&t.c&&3==e&&ad(t)):(tc(t.b,t.f,n,null),bd(t,n)),4==e&&cd(t),t.c&&!t.B&&(4==e?t.i.ua(t):(t.c=!1,Wc(t)))):(400==i&&0<n.indexOf("Unknown SID")?(t.l=3,J(12),E(t.b.a,"XMLHTTP Unknown SID ("+t.f+")")):(t.l=0,J(13),E(t.b.a,"XMLHTTP Bad status "+i+" ("+t.f+")")),cd(t),dd(t))}}function $c(t,e,n){for(var r=!0;!t.B&&t.F<n.length;){var i=ed(t,n);if(i==Rc){4==e&&(t.l=4,J(14),r=!1),tc(t.b,t.f,null,"[Incomplete Response]");break}if(i==Qc){t.l=4,J(15),tc(t.b,t.f,n,"[Invalid Chunk]"),r=!1;break}tc(t.b,t.f,i,null),bd(t,i)}4==e&&0==n.length&&(t.l=1,J(16),r=!1),t.c=t.c&&r,r||(tc(t.b,t.f,n,"[Invalid Chunked Response]"),cd(t),dd(t))}function ad(t){t.N.aa(t.I,"tick",t.gb),t.I.start()}function ed(t,e){var n=t.F,r=e.indexOf("\n",n);return-1==r?Rc:(n=Number(e.substring(n,r)),isNaN(n)?Qc:(r+=1)+n>e.length?Rc:(e=e.substr(r,n),t.F=r+n,e))}function Wc(e){e.U=t()+e.S,fd(e,e.S)}function fd(t,e){if(null!=t.w)throw Error("WatchDog timer not null");t.w=Ec(r(t.fb,t),e)}function Zc(t){t.w&&(k.clearTimeout(t.w),t.w=null)}function dd(t){t.i.Ja()||t.B||t.i.ua(t)}function cd(t){Zc(t);var e=t.J;e&&"function"==typeof e.Z&&e.Z(),t.J=null,Yb(t.I),cc(t.N),t.a&&(e=t.a,t.a=null,e.abort(),e.Z())}function bd(t,e){try{t.i.Ma(t,e),Ac(4)}catch(e){wc(t.b,e,"Error in httprequest callback")}}function gd(t){if(t.v&&"function"==typeof t.v)return t.v();if(l(t))return t.split("");if(ca(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return Ca(t)}function hd(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ca(t)||l(t))ta(t,e,void 0);else{if(t.O&&"function"==typeof t.O)var n=t.O();else if(t.v&&"function"==typeof t.v)n=void 0;else if(ca(t)||l(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else n=Da(t);i=(r=gd(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function N(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t){t instanceof N?(n=t.O(),r=t.v()):(n=Da(t),r=Ca(t));for(var i=0;i<n.length;i++)this.set(n[i],r[i])}}function jd(t){t.b={},t.a.length=0,t.c=0}function kd(t,e){return!!O(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&id(t),!0)}function id(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];O(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)O(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}g=K.prototype,g.setTimeout=function(t){this.S=t},g.hb=function(t){t=t.target;var e=this.J;e&&3==M(t)?(I(this.b,"Throttling readystatechange."),e.Xa()):this.Qa(t)},g.Qa=function(t){try{t==this.a?Yc(this):E(this.b.a,"Called back with an unexpected xmlhttp")}catch(t){if(I(this.b,"Failed call to OnXmlHttpReadyStateChanged_"),this.a&&this.a.V()){var e=this;wc(this.b,t,function(){return"ResponseText: "+e.a.V()})}else wc(this.b,t,"No response text")}},g.gb=function(){var t=M(this.a),e=this.a.V();this.F<e.length&&(Zc(this),$c(this,t,e),this.c&&4!=t&&Wc(this))},g.cancel=function(){this.B=!0,cd(this)},g.fb=function(){this.w=null;var e=t();0<=e-this.U?(this.c&&xc(this.b,"Received watchdog timeout even though request loaded successfully"),vc(this.b,this.g),2!=this.K&&(Ac(3),J(17)),cd(this),this.l=2,dd(this)):(E(this.b.a,"WatchDog timer called too early"),fd(this,this.U-e))},g=N.prototype,g.s=function(){return this.c},g.v=function(){id(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},g.O=function(){return id(this),this.a.concat()},g.get=function(t,e){return O(this.b,t)?this.b[t]:e},g.set=function(t,e){O(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},g.forEach=function(t,e){for(var n=this.O(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ld=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function md(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function P(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof P?(this.h=void 0!==e?e:t.h,nd(this,t.f),this.j=t.j,od(this,t.b),pd(this,t.i),this.a=t.a,qd(this,rd(t.c)),this.g=t.g):t&&(n=String(t).match(ld))?(this.h=!!e,nd(this,n[1]||"",!0),this.j=sd(n[2]||""),od(this,n[3]||"",!0),pd(this,n[4]),this.a=sd(n[5]||"",!0),qd(this,n[6]||"",!0),this.g=sd(n[7]||"")):(this.h=!!e,this.c=new td(null,this.h))}function L(t){return new P(t)}function nd(t,e,n){t.f=n?sd(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function od(t,e,n){t.b=n?sd(e,!0):e}function pd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function qd(t,e,n){e instanceof td?(t.c=e,zd(t.c,t.h)):(n||(e=ud(e,Ad)),t.c=new td(e,t.h))}function Q(t,e,n){t.c.set(e,n)}function Xc(t,e,r){n(r)||(r=[String(r)]),Bd(t.c,e,r)}function Tc(e){return Q(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^t()).toString(36)),e}function Cd(t){return t instanceof P?L(t):new P(t,void 0)}function Dd(t,e,n,r){var i=new P(null,void 0);return t&&nd(i,t),e&&od(i,e),n&&pd(i,n),r&&(i.a=r),i}function sd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ud(t,e,n){return l(t)?(t=encodeURI(t).replace(e,Ed),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ed(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}P.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ud(e,vd,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ud(e,vd,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(ud(n,"/"==n.charAt(0)?wd:xd,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",ud(n,yd)),t.join("")},P.prototype.resolve=function(t){var e=L(this),n=!!t.f;n?nd(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?od(e,t.b):n=null!=t.i;var r=t.a;if(n)pd(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?qd(e,rd(t.c)):n=!!t.g,n&&(e.g=t.g),e};var vd=/[#\/\?@]/g,xd=/[#\?:]/g,wd=/[#\?]/g,Ad=/[#\?@]/g,yd=/#/g;function td(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function R(t){t.a||(t.a=new N,t.b=0,t.c&&md(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Gd(t,e){R(t),e=Fd(t,e),O(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,kd(t.a,e))}function Hd(t,e){return R(t),e=Fd(t,e),O(t.a.b,e)}function Bd(t,e,n){Gd(t,e),0<n.length&&(t.c=null,t.a.set(Fd(t,e),ya(n)),t.b+=n.length)}function rd(t){var e=new td;return e.c=t.c,t.a&&(e.a=new N(t.a),e.b=t.b),e}function Fd(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function zd(t,e){e&&!t.f&&(R(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Gd(this,e),Bd(this,n,t))},t)),t.f=e}function Id(){this.a=t()}g=td.prototype,g.s=function(){return R(this),this.b},g.add=function(t,e){R(this),this.c=null,t=Fd(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},g.forEach=function(t,e){R(this),this.a.forEach(function(n,r){ta(n,function(n){t.call(e,n,r,this)},this)},this)},g.O=function(){R(this);for(var t=this.a.v(),e=this.a.O(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},g.v=function(t){R(this);var e=[];if(l(t))Hd(this,t)&&(e=xa(e,this.a.get(Fd(this,t))));else{t=this.a.v();for(var n=0;n<t.length;n++)e=xa(e,t[n])}return e},g.set=function(t,e){return R(this),this.c=null,Hd(this,t=Fd(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},g.get=function(t,e){return 0<(t=t?this.v(t):[]).length?String(t[0]):e},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.O(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.v(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Jd=null;function Kd(){Jd||(Jd=new Id)}function Ld(){Jd||(Jd=new Id)}function Md(){}Id.prototype.set=function(t){this.a=t},Id.prototype.reset=function(){this.set(t())},Id.prototype.get=function(){return this.a},u(Ld,Kd);var Nd={OPEN:"a",mb:"b",Sa:"c",vb:"d"};function Od(){A.call(this,"d")}function Pd(){A.call(this,"c")}function Qd(t,e){this.a=t,this.b=e,this.c=this.i=null,this.h=!1,this.l=null,this.f=-1,this.m=this.g=null}function Rd(t){I(t.b,"TestConnection: starting stage 2");var e=t.a.I.a;if(null!=e)I(t.b,function(){return"Buffered"}),J(4),e?(J(10),Sd(t.a,t,!1)):(J(11),Sd(t.a,t,!0));else{t.c=new K(t,t.b,void 0,void 0),t.c.j=t.i;var n=Td(t.a,t.g,t.l);J(4),Xc(n,"TYPE","xmlhttp");var r=t.a.j,i=t.a.K;r&&i&&Q(n,r,i),Vc(t.c,n,!1,t.g)}}function Vd(){this.a=this.b=null}function S(){this.a=new N}function Wd(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[q]||(t[q]=++ea)):e.charAt(0)+t}function Xd(t,e){this.a=t,this.b=e}function Yd(t){this.g=t||Zd,this.f=k.pa&&k.pa.Ka&&k.pa.Ka()&&k.pa.Ka().Db?this.g:1,this.a=null,1<this.f&&(this.a=new S),this.b=null,this.c=[]}u(Od,A),u(Pd,A),g=Qd.prototype,g.R=null,g.da=function(t){return this.a.da(t)},g.abort=function(){this.c&&(this.c.cancel(),this.c=null),this.f=-1},g.Ja=function(){return!1},g.Ma=function(t,e){if(this.f=t.C,0==this.R){if(I(this.b,"TestConnection: Got data for stage 1"),!this.a.D&&(t=t.a)){var n=t.a?t.a.getResponseHeader("X-Client-Wire-Protocol"):null;this.m=n||null,this.a.j&&((t=t.a?t.a.getResponseHeader("X-HTTP-Session-Id"):null)?this.a.K=t:E(this.b.a,"Missing X_HTTP_SESSION_ID in the handshake response"))}if(e){try{var r=this.a.ma.a.parse(e)}catch(t){return wc(this.b,t),void Ud(this.a,this)}this.g=r[0]}else I(this.b,"TestConnection: Null responseText"),Ud(this.a,this)}else 1==this.R&&(this.h?J(6):"11111"==e?(J(5),this.h=!0,(!z||10<=Number(Ua))&&(this.f=200,this.c.cancel(),I(this.b,"Test connection succeeded; using streaming connection"),J(11),Sd(this.a,this,!0))):(J(7),this.h=!1))},g.ua=function(){this.f=this.c.C,this.c.c?0==this.R?(this.R=1,I(this.b,"TestConnection: request complete for initial check"),Rd(this)):1==this.R&&(I(this.b,"TestConnection: request complete for stage 2"),this.h?(I(this.b,"Test connection succeeded; using streaming connection"),J(11),Sd(this.a,this,!0)):(I(this.b,"Test connection failed; not using streaming"),J(10),Sd(this.a,this,!1))):(I(this.b,"TestConnection: request failed, in state "+this.R),0==this.R?J(8):1==this.R&&J(9),Ud(this.a,this))},g.ia=function(){return this.a.ia()},g.ra=function(){return this.a.ra()},S.prototype.s=function(){return this.a.s()},S.prototype.add=function(t){this.a.set(Wd(t),t)},S.prototype.contains=function(t){return t=Wd(t),O(this.a.b,t)},S.prototype.v=function(){return this.a.v()};var Zd=10;function $d(t,e){t.a||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(t.f=t.g,t.a=new S,t.b&&(ae(t,t.b),t.b=null))}function be(t){return!!t.b||!!t.a&&t.a.s()>=t.f}function ce(t,e){return t.b?t.b==e:!!t.a&&t.a.contains(e)}function ae(t,e){t.a?t.a.add(e):t.b=e}function de(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.contains(e)&&kd(t.a.a,Wd(e))}function ee(t){if(null!=t.b)return t.c.concat(t.b.u);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return ta(t.a.v(),function(t){e=e.concat(t.u)}),e}return ya(t.c)}function fe(t,e){t.c=t.c.concat(e)}function ge(){}function he(){this.a=new ge}function ie(t,e,n){var r=n||"";try{hd(t,function(t,n){var i=t;p(t)&&(i=Db(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function je(t,e){var n=new qc;I(n,"TestLoadImage: loading "+t);var r=new Image;r.onload=ia(ke,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ia(ke,n,r,"TestLoadImage: error",!1,e),r.onabort=ia(ke,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ia(ke,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}function ke(t,e,n,r,i){try{I(t,n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(e){wc(t,e)}}function T(t){B.call(this),this.headers=new N,this.F=t||null,this.f=!1,this.D=this.a=null,this.M=this.u="",this.j=0,this.g="",this.h=this.J=this.o=this.I=!1,this.l=0,this.B=null,this.N=le,this.C=this.m=!1}Yd.prototype.cancel=function(){this.c=ee(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(ta(this.a.v(),function(t){t.cancel()}),jd(this.a.a))},ge.prototype.stringify=function(t){return k.JSON.stringify(t,void 0)},ge.prototype.parse=function(t){return k.JSON.parse(t,void 0)},u(T,B);var le="";T.prototype.b=oc("goog.net.XhrIo");var me=/^https?$/i,ne=["POST","PUT"];function qe(t){return z&&Ta(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function va(t){return"content-type"==t.toLowerCase()}function oe(t,e){t.f=!1,t.a&&(t.h=!0,t.a.abort(),t.h=!1),t.g=e,t.j=5,re(t),se(t)}function re(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function te(t){if(t.f&&"undefined"!=typeof goog)if(t.D[1]&&4==M(t)&&2==t.W())F(t.b,U(t,"Local request error detected and ignored"));else if(t.o&&4==M(t))Zb(t.La,0,t);else if(t.dispatchEvent("readystatechange"),4==M(t)){F(t.b,U(t,"Request complete")),t.f=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.u).match(ld)[1]||null;if(!o&&k.self&&k.self.location){var s=k.self.location.protocol;o=s.substr(0,s.length-1)}i=!me.test(o?o.toLowerCase():"")}e=i}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.j=6,t.g=t.Ga()+" ["+t.W()+"]",re(t))}finally{se(t)}}}function se(t,e){if(t.a){pe(t);var n=t.a,r=t.D[0]?aa:null;t.a=null,t.D=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(gc,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function pe(t){t.a&&t.C&&(t.a.ontimeout=null),t.B&&(k.clearTimeout(t.B),t.B=null)}function M(t){return t.a?t.a.readyState:0}function U(t,e){return e+" ["+t.M+" "+t.u+" "+t.W()+"]"}function ue(t){var e="";return Ba(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function ve(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=ue(n),l(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Q(t,e,n),t}function we(t){this.ya=0,this.g=[],this.a=new qc,this.I=new Vd,this.ja=this.wa=this.F=this.ka=this.b=this.K=this.j=this.U=this.h=this.M=this.i=null,this.Ua=this.P=0,this.la=this.B=this.o=this.m=this.l=this.f=null,this.u=this.xa=this.N=-1,this.T=this.w=this.C=0,this.S=t&&t.supportsCrossDomainXhr||!1,this.J="",this.c=new Yd(t&&t.concurrentRequestLimit),this.ma=new he,this.D=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,this.Ta=t&&t.fastHandshake||!1,t&&t.Ea&&this.a.Ea()}function xe(e){if(I(e.a,"disconnect()"),ye(e),3==e.G){var n=e.P++,r=L(e.F);Q(r,"SID",e.J),Q(r,"RID",n),Q(r,"TYPE","terminate"),ze(e,r),(n=new K(e,e.a,n,void 0)).K=2,n.h=Tc(L(r)),r=!1,k.navigator&&k.navigator.sendBeacon&&(r=k.navigator.sendBeacon(n.h.toString(),"")),!r&&k.Image&&((new Image).src=n.h,r=!0),r||(n.a=n.i.da(null),n.a.fa(n.h)),n.D=t(),Wc(n)}Ae(e)}function ye(t){t.B&&(t.B.abort(),t.B=null),t.b&&(t.b.cancel(),t.b=null),t.m&&(k.clearTimeout(t.m),t.m=null),Be(t),t.c.cancel(),t.l&&(k.clearTimeout(t.l),t.l=null)}function Ce(t,e){1e3==t.g.length&&xc(t.a,function(){return"Already have 1000 queued maps upon queueing "+Db(e)}),t.g.push(new Xd(t.Ua++,e)),3==t.G&&De(t)}function De(t){be(t.c)||t.l||(t.l=Ec(r(t.Oa,t),0),t.C=0)}function Ee(t,e){var n=t.c;return(n.b?1:n.a?n.a.s():0)>=t.c.f-(t.l?1:0)?(xc(t.a,"Unexpected retry request is scheduled."),!1):t.l?(I(t.a,"Use the retry request that is already scheduled."),t.g=e.u.concat(t.g),!0):!(1==t.G||2==t.G||2<=t.C||(I(t.a,"Going to retry POST"),t.l=Ec(r(t.Oa,t,e),Fe(t,t.C)),t.C++,0))}function He(t,e){var n;n=e?e.f:t.P++;var r=L(t.F);Q(r,"SID",t.J),Q(r,"RID",n),Q(r,"AID",t.N),ze(t,r),t.h&&t.i&&ve(r,t.h,t.i),n=new K(t,t.a,n,t.C+1),null===t.h&&(n.j=t.i),e&&(t.g=e.u.concat(t.g)),e=Ge(t,n),n.setTimeout(1e4+Math.round(1e4*Math.random())),ae(t.c,n),Sc(n,r,e)}function ze(t,e){t.f&&hd({},function(t,n){Q(e,n,t)})}function Ge(t,e){var n=Math.min(t.g.length,1e3),i=t.f?r(t.f.Va,t.f,t):null;t:for(var o=t.g,s=-1;;){var a=["count="+n];-1==s?0<n?a.push("ofs="+(s=o[0].a)):s=0:a.push("ofs="+s);for(var u=!0,c=0;c<n;c++){var l=o[c].a,h=o[c].b;if(0>(l-=s))s=Math.max(0,o[c].a-100),u=!1;else try{ie(h,a,"req"+l+"_")}catch(t){i&&i(h)}}if(u){i=a.join("&");break t}}return t=t.g.splice(0,n),e.u=t,i}function Ie(t){if(!t.b&&!t.m){t.T=1;var e=t.Na;Tb||Ub(),Wb||(Tb(),Wb=!0),Pb.add(e,t),t.w=0}}function Je(t){return t.b||t.m?(xc(t.a,"Request already in progress"),!1):!(3<=t.w||(I(t.a,"Going to retry GET"),t.T++,t.m=Ec(r(t.Na,t),Fe(t,t.w)),t.w++,0))}function Sd(t,e,n){I(t.a,"Test Connection Finished");var r=e.m;r&&$d(t.c,r),t.la=n,t.u=e.f,I(t.a,"connectChannel_()"),t.F=Ke(t,t.ka),De(t)}function Ud(t,e){I(t.a,"Test Connection Failed"),t.u=e.f,V(t,2)}function Be(t){null!=t.o&&(k.clearTimeout(t.o),t.o=null)}function Fe(t,e){var n=5e3+Math.floor(1e4*Math.random());return t.ra()||(I(t.a,"Inactive channel"),n*=2),n*e}function V(t,e){if(H(t.a,"Error code "+e),2==e){var n=null;t.f&&(n=null);var i=r(t.jb,t);n||(n=new P("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||nd(n,"https"),Tc(n)),je(n.toString(),i)}else J(2);I(t.a,"HttpChannel: error - "+e),t.G=0,t.f&&t.f.Ba(e),Ae(t),ye(t)}function Ae(t){if(t.G=0,t.u=-1,t.f){var e=ee(t.c);0==e.length&&0==t.g.length||(I(t.a,function(){return"Number of undelivered maps, pending: "+e.length+", outgoing: "+t.g.length}),t.c.c.length=0,ya(t.g),t.g.length=0),t.f.Aa()}}function Ke(t,e){return e=Le(t,null,e),I(t.a,"GetForwardChannelUri: "+e),e}function Td(t,e,n){return e=Le(t,t.ia()?e:null,n),I(t.a,"GetBackChannelUri: "+e),e}function Le(t,e,n){var r=Cd(n);if(""!=r.b)e&&od(r,e+"."+r.b),pd(r,r.i);else{var i=k.location;r=Dd(i.protocol,e?e+"."+i.hostname:i.hostname,i.port,n)}return t.U&&Ba(t.U,function(t,e){Q(r,e,t)}),n=t.K,(e=t.j)&&n&&Q(r,e,n),Q(r,"VER",t.oa),ze(t,r),r}function Me(){}function Ne(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}function Oe(){if(z&&!(10<=Number(Ua)))throw Error("Environmental error: no available transport.")}function W(t,e){B.call(this),this.a=new we(e),this.b=t,this.m=e&&e.testUrl?e.testUrl:Ne(this.b,"test"),this.f=oc("goog.labs.net.webChannel.WebChannelBaseTransport"),this.g=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),this.a.M=t,(t=e&&e.httpHeadersOverwriteParam)&&!/^[\s\xa0]*$/.test(t)&&(this.a.h=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.j=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!/^[\s\xa0]*$/.test(e)&&(this.a.j=e,null!==(t=this.g)&&e in t&&(e in(t=this.g)&&delete t[e],E(this.f,"Ignore httpSessionIdParam also specified with messageUrlParams: "+e))),this.h=new Pe(this)}function Qe(t){Od.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Re(){Pd.call(this),this.status=1}function Pe(t){this.a=t}g=T.prototype,g.fa=function(t,e,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.u+"; newUri="+t);e=e?e.toUpperCase():"GET",this.u=t,this.g="",this.j=0,this.M=e,this.I=!1,this.f=!0,this.a=Mc(this.F?this.F:Kc),this.D=Ic(this.F?this.F:Kc),this.a.onreadystatechange=r(this.La,this);try{F(this.b,U(this,"Opening Xhr")),this.J=!0,this.a.open(e,String(t),!0),this.J=!1}catch(t){return F(this.b,U(this,"Error opening Xhr: "+t.message)),void oe(this,t)}t=n||"";var o=new N(this.headers);i&&hd(i,function(t,e){o.set(e,t)}),i=ua(o.O()),n=k.FormData&&t instanceof k.FormData,!(0<=sa(ne,e))||i||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.N&&(this.a.responseType=this.N),"withCredentials"in this.a&&this.a.withCredentials!==this.m&&(this.a.withCredentials=this.m);try{pe(this),0<this.l&&(this.C=qe(this.a),F(this.b,U(this,"Will abort after "+this.l+"ms if incomplete, xhr2 "+this.C)),this.C?(this.a.timeout=this.l,this.a.ontimeout=r(this.Ia,this)):this.B=Zb(this.Ia,this.l,this)),F(this.b,U(this,"Sending request")),this.o=!0,this.a.send(t),this.o=!1}catch(t){F(this.b,U(this,"Send error: "+t.message)),oe(this,t)}},g.Ia=function(){"undefined"!=typeof goog&&this.a&&(this.g="Timed out after "+this.l+"ms, aborting",this.j=8,F(this.b,U(this,this.g)),this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(t){this.a&&this.f&&(F(this.b,U(this,"Aborting")),this.f=!1,this.h=!0,this.a.abort(),this.h=!1,this.j=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),se(this))},g.A=function(){this.a&&(this.f&&(this.f=!1,this.h=!0,this.a.abort(),this.h=!1),se(this,!0)),T.H.A.call(this)},g.La=function(){this.i||(this.J||this.o||this.h?te(this):this.cb())},g.cb=function(){te(this)},g.W=function(){try{return 2<M(this)?this.a.status:-1}catch(t){return-1}},g.Ga=function(){try{return 2<M(this)?this.a.statusText:""}catch(t){return F(this.b,"Can not get status: "+t.message),""}},g.V=function(){try{return this.a?this.a.responseText:""}catch(t){return F(this.b,"Can not get responseText: "+t.message),""}},g.Ya=function(t){if(this.a){var e=this.a.responseText;t&&0==e.indexOf(t)&&(e=e.substring(t.length));t:{if(t=e,k.JSON)try{var n=k.JSON.parse(t);break t}catch(t){}n=Cb(t)}return n}},g.Fa=function(){return this.j},g.ab=function(){return l(this.g)?this.g:String(this.g)},g=we.prototype,g.oa=8,g.G=1,g.Ja=function(){return 0==this.G},g.Oa=function(t){if(this.l=null,I(this.a,"startForwardChannel_"),1==this.G)if(t)xc(this.a,"Not supposed to retry the open");else{I(this.a,"open_()"),this.P=Math.floor(1e5*Math.random()),t=this.P++;var e=new K(this,this.a,t,void 0),n=this.i;this.M&&(n?Ga(n=Ea(n),this.M):n=this.M),null===this.h&&(e.j=n);var r=Ge(this,e),i=L(this.F);Q(i,"RID",t),Q(i,"CVER",21),this.D&&this.j&&Q(i,"X-HTTP-Session-Id",this.j),ze(this,i),this.h&&n&&ve(i,this.h,n),ae(this.c,e),this.Ta?(Q(i,"$req",r),Sc(e,i,null)):Sc(e,i,r),this.G=2}else 3==this.G&&(t?He(this,t):0==this.g.length?I(this.a,"startForwardChannel_ returned: nothing to send"):be(this.c)?xc(this.a,"startForwardChannel_ returned: connection already in progress"):(He(this),I(this.a,"startForwardChannel_ finished, sent request")))},g.Na=function(){this.m=null,I(this.a,"Creating new HttpRequest"),this.b=new K(this,this.a,"rpc",this.T),null===this.h&&(this.b.j=this.i),this.b.P=0;var t=L(this.wa);Q(t,"RID","rpc"),Q(t,"SID",this.J),Q(t,"CI",this.la?"0":"1"),Q(t,"AID",this.N),ze(this,t),Q(t,"TYPE","xmlhttp"),this.h&&this.i&&ve(t,this.h,this.i),Vc(this.b,t,!0,this.ja),I(this.a,"New Request created")},g.Ma=function(t,e){if(0!=this.G&&(this.b==t||ce(this.c,t)))if(this.u=t.C,ce(this.c,t)&&3==this.G){try{var i=this.ma.a.parse(e)}catch(t){i=null}if(n(i)&&3==i.length)if(0==(e=i)[0])t:if(I(this.a,"Server claims our backchannel is missing."),this.m)I(this.a,"But we are currently starting the request.");else{if(this.b){if(!(this.b.D+3e3<t.D))break t;Be(this),this.b.cancel(),this.b=null}else E(this.a.a,"We do not have a BackChannel established");Je(this),J(18)}else this.xa=e[1],0<(t=this.xa-this.N)&&(I(this.a,(e=e[2])+" bytes (in "+t+" arrays) are outstanding on the BackChannel"),37500>e&&this.la&&0==this.w&&!this.o&&(this.o=Ec(r(this.bb,this),6e3)));else I(this.a,"Bad POST response data returned"),V(this,11)}else if(this.b==t&&Be(this),!/^[\s\xa0]*$/.test(e))for(e=i=this.ma.a.parse(e),i=0;i<e.length;i++){var o=e[i];if(this.N=o[0],o=o[1],2==this.G)if("c"==o[0]){this.J=o[1],this.ja=o[2];var s=o[3];null!=s&&(this.oa=s,H(this.a,"VER="+this.oa)),null!=(o=o[4])&&(this.ya=o,H(this.a,"SVER="+this.ya)),this.D&&(o=t.a)&&((s=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)&&$d(this.c,s),this.j&&((o=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)?(this.K=o,Q(this.F,this.j,o)):E(this.a.a,"Missing X_HTTP_SESSION_ID in the handshake response"))),this.G=3,this.f&&this.f.Da(),this.wa=Td(this,this.ja,this.ka),Ie(this)}else"stop"!=o[0]&&"close"!=o[0]||V(this,7);else 3==this.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?V(this,7):xe(this):"noop"!=o[0]&&this.f&&this.f.Ca(o),this.w=0)}},g.bb=function(){null!=this.o&&(this.o=null,this.b.cancel(),this.b=null,Je(this),J(19))},g.ua=function(e){I(this.a,"Request complete");var n=null;if(this.b==e){Be(this),this.b=null;var r=2}else{if(!ce(this.c,e))return;n=e.u,de(this.c,e),r=1}if(this.u=e.C,0!=this.G)if(e.c)1==r?(Dc(e.m?e.m.length:0,t()-e.D,this.C),De(this)):Ie(this);else{var i=e.l;if(3==i||0==i&&0<this.u)I(this.a,"Not retrying due to error type");else{var o=this;if(I(this.a,function(){return"Maybe retrying, last error: "+Pc(i,o.u)}),1==r&&Ee(this,e)||2==r&&Je(this))return;I(this.a,"Exceeded max number of retries")}switch(n&&0<n.length&&fe(this.c,n),I(this.a,"Error: HTTP request failed"),i){case 1:V(this,5);break;case 4:V(this,10);break;case 3:V(this,6);break;default:V(this,2)}}},g.jb=function(t){t?(H(this.a,"Successfully pinged google.com"),J(2)):(H(this.a,"Failed to ping google.com"),J(1))},g.da=function(t){if(t&&!this.S)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new T).m=this.S,t},g.ra=function(){return!!this.f&&!0},g.ia=function(){return this.S},new Ld,g=Me.prototype,g.Da=function(){},g.Ca=function(){},g.Ba=function(){},g.Aa=function(){},g.Va=function(){},Oe.prototype.a=function(t,e){return new W(t,e)},u(W,B),g=W.prototype,g.addEventListener=function(t,e,n,r){W.H.addEventListener.call(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){W.H.removeEventListener.call(this,t,e,n,r)},g.Za=function(){this.a.f=this.h,this.l&&(this.a.S=!0);var t=this.a,e=this.m,n=this.b,r=this.g||void 0;I(t.a,"connect()"),J(0),t.ka=n,t.U=r||{},t.D&&(I(t.a,"connect() bypassed channel-test."),t.I.b=[],t.I.a=!1),I(t.a,"connectTest_()"),t.B=new Qd(t,t.a),null===t.h&&(t.B.i=t.i),n=e,t.h&&t.i&&(n=ve(e,t.h,t.i)),(t=t.B).l=n,e=Ke(t.a,t.l),J(3),null!=(n=t.a.I.b)?(t.g=n[0],t.R=1,Rd(t)):(Xc(e,"MODE","init"),!t.a.D&&t.a.j&&Xc(e,"X-HTTP-Session-Id",t.a.j),t.c=new K(t,t.b,void 0,void 0),t.c.j=t.i,Vc(t.c,e,!1,null),t.R=0)},g.close=function(){xe(this.a)},g.$a=function(t){if(l(t)){var e={};e.__data__=t,Ce(this.a,e)}else this.j?((e={}).__data__=Db(t),Ce(this.a,e)):Ce(this.a,t)},g.A=function(){this.a.f=null,delete this.h,xe(this.a),delete this.a,W.H.A.call(this)},u(Qe,Od),u(Re,Pd),u(Pe,Me),Pe.prototype.Da=function(){pc(this.a.f,"WebChannel opened on "+this.a.b),this.a.dispatchEvent("a")},Pe.prototype.Ca=function(t){this.a.dispatchEvent(new Qe(t))},Pe.prototype.Ba=function(t){pc(this.a.f,"WebChannel aborted on "+this.a.b+" due to channel error: "+t),this.a.dispatchEvent(new Re(t))},Pe.prototype.Aa=function(){pc(this.a.f,"WebChannel closed on "+this.a.b),this.a.dispatchEvent("b")};var Se=ia(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},Oe);function Te(){this.b=[],this.a=[]}function Ue(t){return 0==t.b.length&&(t.b=t.a,t.b.reverse(),t.a=[]),t.b.pop()}function Ve(t,e){if(w.call(this),this.h=t||0,this.c=e||10,this.h>this.c)throw Error(We);this.a=new Te,this.b=new S,this.g=null,this.ba()}Te.prototype.s=function(){return this.b.length+this.a.length},Te.prototype.contains=function(t){return 0<=sa(this.b,t)||0<=sa(this.a,t)},Te.prototype.v=function(){for(var t=[],e=this.b.length-1;0<=e;--e)t.push(this.b[e]);var n=this.a.length;for(e=0;e<n;++e)t.push(this.a[e]);return t},u(Ve,w);var We="[goog.structs.Pool] Min can not be greater than max";function Xe(t){if("function"==typeof t.Z)t.Z();else for(var e in t)t[e]=null}function Ye(t,e){this.a=t,this.b=e}function Ze(t){if(this.a=[],t)t:{if(t instanceof Ze){var e=t.O();if(t=t.v(),0>=this.s()){for(var n=this.a,r=0;r<e.length;r++)n.push(new Ye(e[r],t[r]));break t}}else e=Da(t),t=Ca(t);for(r=0;r<e.length;r++)$e(this,e[r],t[r])}}function $e(t,e,n){var r=t.a;for(r.push(new Ye(e,n)),n=(t=t.a)[e=r.length-1];0<e&&t[r=e-1>>1].a>n.a;)t[e]=t[r],e=r;t[e]=n}function af(){Ze.call(this)}function X(t,e){this.f=new af,Ve.call(this,t,e)}function Y(t,e,n,r){this.l=t,this.j=!!r,X.call(this,e,n)}g=Ve.prototype,g.ea=function(){var e=t();if(!(null!=this.g&&0>e-this.g)){for(var n;0<this.a.s()&&(n=Ue(this.a),!this.ta(n));)this.ba();return!n&&this.s()<this.c&&(n=this.qa()),n&&(this.g=e,this.b.add(n)),n}},g.ib=function(t){return!!kd(this.b.a,Wd(t))&&(this.na(t),!0)},g.na=function(t){kd(this.b.a,Wd(t)),this.ta(t)&&this.s()<this.c?this.a.a.push(t):Xe(t)},g.ba=function(){for(var t=this.a;this.s()<this.h;){var e=this.qa();t.a.push(e)}for(;this.s()>this.c&&0<this.a.s();)Xe(Ue(t))},g.qa=function(){return{}},g.ta=function(t){return"function"!=typeof t.Wa||t.Wa()},g.contains=function(t){return this.a.contains(t)||this.b.contains(t)},g.s=function(){return this.a.s()+this.b.s()},g.A=function(){if(Ve.H.A.call(this),0<this.b.s())throw Error("[goog.structs.Pool] Objects not released");delete this.b;for(var t=this.a;0!=t.b.length||0!=t.a.length;)Xe(Ue(t));delete this.a},Ze.prototype.v=function(){for(var t=this.a,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].b);return e},Ze.prototype.O=function(){for(var t=this.a,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].a);return e},Ze.prototype.s=function(){return this.a.length},u(af,Ze),u(X,Ve),g=X.prototype,g.ea=function(t,e){if(!t)return X.H.ea.call(this);$e(this.f,void 0!==e?e:100,t),this.sa()},g.sa=function(){for(var t=this.f;0<t.s();){var e=this.ea();if(!e)break;var n=t,r=n.a,i=r.length,o=r[0];if(0>=i)o=void 0;else{if(1==i)wa(r);else{r[0]=r.pop(),i=(n=n.a).length;for(var s=n[r=0];r<i>>1;){var a=2*r+1,u=2*r+2;if(n[a=u<i&&n[u].a<n[a].a?u:a].a>s.a)break;n[r]=n[a],r=a}n[r]=s}o=o.b}o.apply(this,[e])}},g.na=function(t){X.H.na.call(this,t),this.sa()},g.ba=function(){X.H.ba.call(this),this.sa()},g.A=function(){X.H.A.call(this),k.clearTimeout(void 0),wa(this.f.a),this.f=null},u(Y,X),Y.prototype.qa=function(){var t=new T,e=this.l;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.j&&(t.m=!0),t},Y.prototype.ta=function(t){return!t.i&&!t.a},Oe.prototype.createWebChannel=Oe.prototype.a,W.prototype.send=W.prototype.$a,W.prototype.open=W.prototype.Za,W.prototype.close=W.prototype.close,Fc.NO_ERROR=0,Fc.TIMEOUT=8,Fc.HTTP_ERROR=6,Gc.COMPLETE="complete",Md.EventType=Nd,Nd.OPEN="a",Nd.CLOSE="b",Nd.ERROR="c",Nd.MESSAGE="d",B.prototype.listen=B.prototype.aa,Y.prototype.getObject=Y.prototype.ea,Y.prototype.releaseObject=Y.prototype.ib,T.prototype.listenOnce=T.prototype.Ha,T.prototype.getLastError=T.prototype.ab,T.prototype.getLastErrorCode=T.prototype.Fa,T.prototype.getStatus=T.prototype.W,T.prototype.getStatusText=T.prototype.Ga,T.prototype.getResponseJson=T.prototype.Ya,T.prototype.getResponseText=T.prototype.V,T.prototype.getResponseText=T.prototype.V,T.prototype.send=T.prototype.fa,module.exports={createWebChannelTransport:Se,ErrorCode:Fc,EventType:Gc,WebChannel:Md,XhrIoPool:Y}}).call("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(exports,__webpack_require__("DuR2"))},DuR2:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},E9F9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=function(){this.blockSize=-1}},EN1B:function(t,e){},Ex2A:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"}},GK6M:function(t,e,n){"use strict";e.a=function(t){return r=t,o};var r,i=n("fKB6");function o(){try{return r.apply(this,arguments)}catch(t){return i.a.e=t,i.a}}},GmLp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Error.captureStackTrace;e.patchCapture=function(t){var e=r;return r=t,e};var i=function(){return function(t,e){if(this.code=t,this.message=e,r)r(this,o.prototype.create);else{var n=Error.apply(this,arguments);this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();e.FirebaseError=i,i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.name="FirebaseError";var o=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],o=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"});var s=new i(o,n=this.serviceName+": "+n+" ("+o+").");for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(s[a]=e[a]);return s},t}();e.ErrorFactory=o},"Gs/g":function(t,e,n){"use strict";var r=setTimeout;function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}a(e.promise,r)}else(1===t._state?a:u)(e.promise,t._value)})):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}var r,i}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return s(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},o.all=function(t){return new o(function(e,n){if(!t||"undefined"==typeof t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){o(t,e)},n)}r[t]=s,0==--i&&e(r)}catch(t){n(t)}}for(var s=0;s<r.length;s++)o(s,r[s])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},t.exports=o},IYGj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("TToO"),i=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return r.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(n("E9F9").Hash);e.Sha1=i},It2I:function(t,e,n){n("bzVp"),t.exports=n("9eBd").default},Jnfr:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="Jnfr"},Jwyl:function(t,e,n){"use strict";e.a=function(t,e){return function(n){var o;if(o="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new i(o,e));var s=Object.create(n,r.a);return s.source=n,s.subjectFactory=o,s}};var r=n("NO/a"),i=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}()},N4j0:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length}},"NO/a":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("TToO"),i=n("g5jc"),o=n("YaPU"),s=n("VwZZ"),a=n("0P3J"),u=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return Object(r.__extends)(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new l(this.getSubject(),this))),t.closed?(this._connection=null,t=s.a.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return Object(a.a)()(this)},e}(o.a).prototype,c={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}},l=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Object(r.__extends)(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.c)},OAVl:function(t,e){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t})},OVmG:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("TToO"),i=n("/iUD"),o=n("VwZZ"),s=n("t7NR"),a=n("tLDX"),u=function(t){function e(n,r,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.a;break;case 1:if(!n){this.destination=s.a;break}if("object"==typeof n){n instanceof e?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return Object(r.__extends)(e,t),e.prototype[a.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.a),c=function(t){function e(e,n,r,o){var a;t.call(this),this._parentSubscriber=e;var u=this;Object(i.a)(n)?a=n:n&&(a=n.next,r=n.error,o=n.complete,n!==s.a&&(u=Object.create(n),Object(i.a)(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=a,this._error=r,this._complete=o}return Object(r.__extends)(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u)},PIsA:function(t,e,n){"use strict";var r=n("AMGY"),i=n("N4j0"),o=n("cQXm"),s=n("dgOU"),a=n("YaPU"),u=n("etqZ"),c=n("TToO"),l=function(t){function e(e,n,r){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}return Object(c.__extends)(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n("OVmG").a),h=n("+CnV");e.a=function(t,e,n,c){var f=new l(t,n,c);if(f.closed)return null;if(e instanceof a.a)return e._isScalar?(f.next(e.value),f.complete(),null):(f.syncErrorThrowable=!0,e.subscribe(f));if(Object(i.a)(e)){for(var p=0,d=e.length;p<d&&!f.closed;p++)f.next(e[p]);f.closed||f.complete()}else{if(Object(o.a)(e))return e.then(function(t){f.closed||(f.next(t),f.complete())},function(t){return f.error(t)}).then(null,function(t){r.a.setTimeout(function(){throw t})}),f;if(e&&"function"==typeof e[u.a])for(var y=e[u.a]();;){var v=y.next();if(v.done){f.complete();break}if(f.next(v.value),f.closed)break}else if(e&&"function"==typeof e[h.a]){var m=e[h.a]();if("function"==typeof m.subscribe)return m.subscribe(new l(t,n,c));f.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var g=Object(s.a)(e)?"an invalid object":"'"+e+"'";f.error(new TypeError("You provided "+g+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}}return null}},Qnch:function(t,e,n){"use strict";e.a=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return"number"==typeof e&&(n=e,e=null),r.lift(new s(t,e,n))}};var r=n("TToO"),i=n("PIsA"),o=n("tZ2B"),s=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.resultSelector,this.concurrent))},t}(),a=function(t){function e(e,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Object(r.__extends)(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Object(i.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._notifyResultSelector(t,e,n,r):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.a)},Rf9G:function(t,e,n){"use strict";e.a=function(){return Object(r.a)()(this)};var r=n("3a3m")},T970:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Deferred=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}()},TILf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("TToO"),i=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return Object(r.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.value,n=t.subscriber;t.done?n.complete():(n.next(e),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.value,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(n("YaPU").a)},TToO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n.d(e,"__assign",function(){return i}),e.__rest=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n},e.__decorate=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},e.__param=function(t,e){return function(n,r){e(n,r,t)}},e.__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},e.__awaiter=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},e.__generator=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},e.__exportStar=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},e.__values=o,e.__read=s,e.__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},e.__await=a,e.__asyncGenerator=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||u(t,e)})})}function u(t,e){try{(n=i[t](e)).value instanceof a?Promise.resolve(n.value.v).then(c,l):h(o[0][2],n)}catch(t){h(o[0][3],t)}var n}function c(t){u("next",t)}function l(t){u("throw",t)}function h(t,e){t(e),o.shift(),o.length&&u(o[0][0],o[0][1])}},e.__asyncDelegator=function(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:a(t[r](e)),done:"return"===r}:i?i(e):e})}},e.__asyncValues=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"==typeof o?o(t):t[Symbol.iterator]()},e.__makeTemplateObject=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},e.__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__importDefault=function(t){return t&&t.__esModule?t:{default:t}};var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(t){return this instanceof a?(this.v=t,this):new a(t)}},"U/B+":function(t,e,n){"use strict";function r(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}Object.defineProperty(e,"__esModule",{value:!0}),e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.errorPrefix=r,e.validateNamespace=function(t,e,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(r(t,e,i)+"must be a valid firebase namespace.")},e.validateCallback=function(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(r(t,e,i)+"must be a valid function.")},e.validateContextObject=function(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(r(t,e,i)+"must be a valid context object.")}},Veqx:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("TToO"),i=n("YaPU"),o=n("TILf"),s=n("+3/4"),a=n("1Q68"),u=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Object(r.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=t[t.length-1];Object(a.a)(r)?t.pop():r=null;var i=t.length;return i>1?new e(t,r):1===i?new o.a(t[0],r):new s.a(r)},e.dispatch=function(t){var e=t.array,n=t.index,r=t.subscriber;n>=t.count?r.complete():(r.next(e[n]),r.closed||(t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.array,r=n.length,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{array:n,index:0,count:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(n[o]);t.complete()},e}(i.a)},VuKk:function(t,e,n){(function(t){(function(){var t,e=n("9eBd").default,r=r||{},i=this;function o(t){return"string"==typeof t}function s(t){return"boolean"==typeof t}function a(){}function u(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function c(t){return null===t}function l(t){return"array"==u(t)}function h(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){return"function"==u(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var d="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:m).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function _(t,e){function n(){}n.prototype=e.prototype,t.lb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.$c=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function S(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function E(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function T(t){if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function I(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");T.call(this,n+t[r])}function C(t,e){throw new I("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function O(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function k(){this.b=this.a=null}_(T,Error),T.prototype.name="CustomError",_(I,T),I.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var A=new x(function(){return new R},function(t){t.reset()});function N(){var t=dt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function R(){this.next=this.b=this.a=null}k.prototype.add=function(t,e){var n=A.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},R.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},R.prototype.reset=function(){this.next=this.b=this.a=null};var D=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(o(t))return o(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},P=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)},M=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=o(t)?t.split(""):t,s=0;s<n;s++)s in i&&(r[s]=e.call(void 0,i[s],s,t));return r},j=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=o(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function L(t,e){return 0<=D(t,e)}function V(t,e){var n;return(n=0<=(e=D(t,e)))&&Array.prototype.splice.call(t,e,1),n}function U(t,e){!function(t,e){var n=t.length,r=o(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(void 0,r[n],n,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function F(t){return Array.prototype.concat.apply([],arguments)}function B(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function q(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}var H=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function W(t){return Z.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(G,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(K,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Q,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(X,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Y,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(J,"&#0;")),t):t}var z,G=/&/g,K=/</g,Q=/>/g,X=/"/g,Y=/'/g,J=/\x00/g,Z=/[\x00&<>"']/;function $(t,e){return-1!=t.indexOf(e)}function tt(t,e){return t<e?-1:t>e?1:0}t:{var et=i.navigator;if(et){var nt=et.userAgent;if(nt){z=nt;break t}}z=""}function rt(t){return $(z,t)}function it(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ot(t){for(var e in t)return!1;return!0}function st(t){var e,n={};for(e in t)n[e]=t[e];return n}var at,ut,ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ct.length;o++)n=ct[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ht(t){i.setTimeout(function(){throw t},0)}function ft(t,e){ut||function(){if(-1!=String(i.Promise).indexOf("[native code]")){var t=i.Promise.resolve(void 0);ut=function(){t.then(yt)}}else ut=function(){var t=yt;!f(i.setImmediate)||i.Window&&i.Window.prototype&&!rt("Edge")&&i.Window.prototype.setImmediate==i.setImmediate?(at||(at=function(){var t=i.MessageChannel;if("undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!rt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=g(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!=typeof t&&!rt("Trident")&&!rt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rb;n.rb=null,t()}},function(t){r.next={rb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){i.setTimeout(t,0)}}()),at(t)):i.setImmediate(t)}}(),pt||(ut(),pt=!0),dt.add(t,e)}var pt=!1,dt=new k;function yt(){for(var t;t=N();){try{t.a.call(t.b)}catch(t){ht(t)}O(A,t)}pt=!1}function vt(t,e){if(this.a=mt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){Ot(n,gt,t)},function(t){if(!(t instanceof Mt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ot(n,bt,t)})}catch(t){Ot(this,bt,t)}}var mt=0,gt=2,bt=3;function wt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}wt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var _t=new x(function(){return new wt},function(t){t.reset()});function St(t,e,n){var r=_t.get();return r.g=t,r.b=e,r.f=n,r}function Et(t){if(t instanceof vt)return t;var e=new vt(a);return Ot(e,gt,t),e}function Tt(t){return new vt(function(e,n){n(t)})}function It(t,e,n){kt(t,e,n,null)||ft(b(e,t))}function Ct(t,e){t.b||t.a!=gt&&t.a!=bt||At(t),t.f?t.f.next=e:t.b=e,t.f=e}function xt(t,e,n,r){var i=St(null,null,null);return i.a=new vt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Mt?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,Ct(t,i),i.a}function Ot(t,e,n){t.a==mt&&(t===n&&(e=bt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,kt(n,t.Jc,t.Kc,t)||(t.i=n,t.a=e,t.c=null,At(t),e!=bt||n instanceof Mt||function(t,e){t.g=!0,ft(function(){t.g&&Pt.call(null,e)})}(t,n)))}function kt(t,e,n,r){if(t instanceof vt)return Ct(t,St(e||a,n||null,r)),!0;if(E(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(f(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function At(t){t.h||(t.h=!0,ft(t.Ub,t))}function Nt(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Rt(t,e,n,r){if(n==bt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Dt(e,n,r);else try{e.c?e.g.call(e.f):Dt(e,n,r)}catch(t){Pt.call(null,t)}O(_t,e)}function Dt(t,e,n){e==gt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}vt.prototype.then=function(t,e,n){return xt(this,f(t)?t:null,f(e)?e:null,n)},S(vt),(t=vt.prototype).ga=function(t,e){return(t=St(t,t,e)).c=!0,Ct(this,t),this},t.o=function(t,e){return xt(this,null,t,e)},t.cancel=function(t){this.a==mt&&ft(function(){!function t(e,n){if(e.a==mt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==mt&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Nt(r),Rt(r,o,bt,n)))}e.c=null}else Ot(e,bt,n)}(this,new Mt(t))},this)},t.Jc=function(t){this.a=mt,Ot(this,gt,t)},t.Kc=function(t){this.a=mt,Ot(this,bt,t)},t.Ub=function(){for(var t;t=Nt(this);)Rt(this,t,this.a,this.i);this.h=!1};var Pt=ht;function Mt(t){T.call(this,t)}function jt(){0!=Lt&&(Vt[this[d]||(this[d]=++y)]=this),this.pa=this.pa,this.oa=this.oa}_(Mt,T),Mt.prototype.name="cancel";var Lt=0,Vt={};function Ut(t){if(!t.pa&&(t.pa=!0,t.ua(),0!=Lt)){var e=t[d]||(t[d]=++y);if(0!=Lt&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Vt[e]}}function Ft(t){return Ft[" "](t),t}jt.prototype.pa=!1,jt.prototype.ua=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()},Ft[" "]=a;var Bt,qt,Ht=rt("Opera"),Wt=rt("Trident")||rt("MSIE"),zt=rt("Edge"),Gt=zt||Wt,Kt=rt("Gecko")&&!($(z.toLowerCase(),"webkit")&&!rt("Edge"))&&!(rt("Trident")||rt("MSIE"))&&!rt("Edge"),Qt=$(z.toLowerCase(),"webkit")&&!rt("Edge");function Xt(){var t=i.document;return t?t.documentMode:void 0}t:{var Yt="",Jt=(qt=z,Kt?/rv:([^\);]+)(\)|;)/.exec(qt):zt?/Edge\/([\d\.]+)/.exec(qt):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qt):Qt?/WebKit\/(\S+)/.exec(qt):Ht?/(?:Version)[ \/]?(\S+)/.exec(qt):void 0);if(Jt&&(Yt=Jt?Jt[1]:""),Wt){var Zt=Xt();if(null!=Zt&&Zt>parseFloat(Yt)){Bt=String(Zt);break t}}Bt=Yt}var $t,te={};function ee(t){return function(t,e){var n=te;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=H(String(Bt)).split("."),r=H(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=tt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||tt(0==s[2].length,0==a[2].length)||tt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var ne=i.document;$t=ne&&Wt?Xt()||("CSS1Compat"==ne.compatMode?parseInt(Bt,10):5):void 0;var re=Object.freeze||function(t){return t},ie=!Wt||9<=Number($t),oe=Wt&&!ee("9"),se=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return i.addEventListener("test",a,e),i.removeEventListener("test",a,e),t}();function ae(t,e){this.type=t,this.b=this.target=e,this.Eb=!0}function ue(t,e){if(ae.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Kt){t:{try{Ft(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=o(t.pointerType)?t.pointerType:ce[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.c()}}ae.prototype.c=function(){this.Eb=!1},_(ue,ae);var ce=re({2:"touch",3:"pen",4:"mouse"});ue.prototype.c=function(){ue.lb.c.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,oe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},ue.prototype.g=function(){return this.a};var le="closure_listenable_"+(1e6*Math.random()|0),he=0;function fe(t){t.ma=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function pe(t){this.src=t,this.a={},this.b=0}function de(t,e){var n=e.type;n in t.a&&V(t.a[n],e)&&(fe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function ye(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ma&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}pe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ye(t,e,r,i);return-1<s?(e=t[s],n||(e.Ha=!1)):((e=new function(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++he,this.ma=this.Ha=!1}(e,this.src,o,!!r,i)).Ha=n,t.push(e)),e};var ve="closure_lm_"+(1e6*Math.random()|0),me={};function ge(t,e,n,r,i){if(r&&r.once)we(t,e,n,r,i);else if(l(e))for(var o=0;o<e.length;o++)ge(t,e[o],n,r,i);else n=ke(n),t&&t[le]?Ne(t,e,n,p(r)?!!r.capture:!!r,i):be(t,e,n,!1,r,i)}function be(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i,a=xe(t);if(a||(t[ve]=a=new pe(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=Ce,e=ie?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)se||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ee(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function we(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)we(t,e[o],n,r,i);else n=ke(n),t&&t[le]?Re(t,e,n,p(r)?!!r.capture:!!r,i):be(t,e,n,!0,r,i)}function _e(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)_e(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=ke(n),t&&t[le]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=ye(o=t.a[e],n,r,i))&&(fe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=xe(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ye(e,n,r,i)),(n=-1<t?e[t]:null)&&Se(n))}function Se(t){if("number"!=typeof t&&t&&!t.ma){var e=t.src;if(e&&e[le])de(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ee(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=xe(e))?(de(n,t),0==n.b&&(n.src=null,e[ve]=null)):fe(t)}}}function Ee(t){return t in me?me[t]:me[t]="on"+t}function Te(t,e,n,r){var i=!0;if((t=xe(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ma&&(o=Ie(o,r),i=i&&!1!==o)}return i}function Ie(t,e){var n=t.listener,r=t.La||t.src;return t.Ha&&Se(t),n.call(r,e)}function Ce(t,e){if(t.ma)return!0;if(!ie){if(!e)t:{e=["window","event"];for(var n=i,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new ue(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=e.b;o;o=o.parentNode)r.push(o);for(t=t.type,o=r.length-1;0<=o;o--){e.b=r[o];var s=Te(r[o],t,!0,e);n=n&&s}for(o=0;o<r.length;o++)e.b=r[o],s=Te(r[o],t,!1,e),n=n&&s}return n}return Ie(t,new ue(e,this))}function xe(t){return(t=t[ve])instanceof pe?t:null}var Oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(t){return f(t)?t:(t[Oe]||(t[Oe]=function(e){return t.handleEvent(e)}),t[Oe])}function Ae(){jt.call(this),this.u=new pe(this),this.Mb=this,this.Ta=null}function Ne(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function Re(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function De(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ma&&s.capture==n){var a=s.listener,u=s.La||s.src;s.Ha&&de(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Eb}function Pe(t,e,n){if(f(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)}function Me(t){var e=null;return new vt(function(n,r){-1==(e=Pe(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw i.clearTimeout(e),t})}function je(t){if(t.R&&"function"==typeof t.R)return t.R();if(o(t))return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Le(t){if(t.T&&"function"==typeof t.T)return t.T();if(!t.R||"function"!=typeof t.R){if(h(t)||o(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Ve(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ve)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ue(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Fe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Fe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Fe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(Ae,jt),Ae.prototype[le]=!0,Ae.prototype.addEventListener=function(t,e,n,r){ge(this,t,e,n,r)},Ae.prototype.removeEventListener=function(t,e,n,r){_e(this,t,e,n,r)},Ae.prototype.dispatchEvent=function(t){var e,n=this.Ta;if(n)for(e=[];n;n=n.Ta)e.push(n);n=this.Mb;var r=t.type||t;if(o(t))t=new ae(t,n);else if(t instanceof ae)t.target=t.target||n;else{var i=t;lt(t=new ae(r,n),i)}if(i=!0,e)for(var s=e.length-1;0<=s;s--){var a=t.b=e[s];i=De(a,r,!0,t)&&i}if(i=De(a=t.b=n,r,!0,t)&&i,i=De(a,r,!1,t)&&i,e)for(s=0;s<e.length;s++)i=De(a=t.b=e[s],r,!1,t)&&i;return i},Ae.prototype.ua=function(){if(Ae.lb.ua.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)fe(n[r]);delete e.a[t],e.b--}}this.Ta=null},(t=Ve.prototype).R=function(){Ue(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.T=function(){return Ue(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Fe(this.b,t)?this.b[t]:e},t.set=function(t,e){Fe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Be=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qe(t,e){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof qe){this.f=void 0!==e?e:t.f,He(this,t.c),this.l=t.l,this.b=t.b,We(this,t.i),this.g=t.g,e=t.a;var n=new on;n.c=e.c,e.a&&(n.a=new Ve(e.a),n.b=e.b),ze(this,n),this.h=t.h}else t&&(n=String(t).match(Be))?(this.f=!!e,He(this,n[1]||"",!0),this.l=Ye(n[2]||""),this.b=Ye(n[3]||"",!0),We(this,n[4]),this.g=Ye(n[5]||"",!0),ze(this,n[6]||"",!0),this.h=Ye(n[7]||"")):(this.f=!!e,this.a=new on(null,this.f))}function He(t,e,n){t.c=n?Ye(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function We(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function ze(t,e,n){e instanceof on?(t.a=e,function(t,e){e&&!t.f&&(sn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(un(this,e),ln(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=Je(e,nn)),t.a=new on(e,t.f))}function Ge(t,e,n){t.a.set(e,n)}function Ke(t,e){return t.a.get(e)}function Qe(t){return t instanceof qe?new qe(t):new qe(t,void 0)}function Xe(t,e){var n=new qe(null,void 0);return He(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Ye(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Je(t,e,n){return o(t)?(t=encodeURI(t).replace(e,Ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}qe.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Je(e,$e,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Je(e,$e,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Je(n,"/"==n.charAt(0)?en:tn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Je(n,rn)),t.join("")};var $e=/[#\/\?@]/g,tn=/[#\?:]/g,en=/[#\?]/g,nn=/[#\?@]/g,rn=/#/g;function on(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function sn(t){t.a||(t.a=new Ve,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function an(t){var e=Le(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new on(null,void 0);t=je(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];l(o)?ln(n,i,o):n.add(i,o)}return n}function un(t,e){sn(t),e=hn(t,e),Fe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Fe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ue(t)))}function cn(t,e){return sn(t),e=hn(t,e),Fe(t.a.b,e)}function ln(t,e,n){un(t,e),0<n.length&&(t.c=null,t.a.set(hn(t,e),B(n)),t.b+=n.length)}function hn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=on.prototype).add=function(t,e){sn(this),this.c=null,t=hn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){sn(this),this.a.forEach(function(n,r){P(n,function(n){t.call(e,n,r,this)},this)},this)},t.T=function(){sn(this);for(var t=this.a.R(),e=this.a.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.R=function(t){sn(this);var e=[];if(o(t))cn(this,t)&&(e=F(e,this.a.get(hn(this,t))));else{t=this.a.R();for(var n=0;n<t.length;n++)e=F(e,t[n])}return e},t.set=function(t,e){return sn(this),this.c=null,cn(this,t=hn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.R(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var fn=!Wt||9<=Number($t);function pn(){this.a="",this.b=yn}function dn(t){return t instanceof pn&&t.constructor===pn&&t.b===yn?t.a:(C("expected object of type Const, got '"+t+"'"),"type_error:Const")}pn.prototype.la=!0,pn.prototype.ja=function(){return this.a},pn.prototype.toString=function(){return"Const{"+this.a+"}"};var yn={};function vn(t){var e=new pn;return e.a=t,e}function mn(){this.a="",this.b=Sn}function gn(t){return t instanceof mn&&t.constructor===mn&&t.b===Sn?t.a:(C("expected object of type TrustedResourceUrl, got '"+t+"' of type "+u(t)),"type_error:TrustedResourceUrl")}function bn(t,e){var n=dn(t);if(!_n.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=new mn;return e.a=t,e}(t=n.replace(wn,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof pn?dn(t):encodeURIComponent(String(t))}))}vn(""),mn.prototype.la=!0,mn.prototype.ja=function(){return this.a},mn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var wn=/%{(\w+)}/g,_n=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,Sn={};function En(){this.a="",this.b=xn}function Tn(t){return t instanceof En&&t.constructor===En&&t.b===xn?t.a:(C("expected object of type SafeUrl, got '"+t+"' of type "+u(t)),"type_error:SafeUrl")}En.prototype.la=!0,En.prototype.ja=function(){return this.a},En.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var In=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Cn(t){return t instanceof En?t:(t=t.la?t.ja():String(t),In.test(t)||(t="about:invalid#zClosurez"),On(t))}var xn={};function On(t){var e=new En;return e.a=t,e}function kn(){this.a="",this.b=An}On("about:blank"),kn.prototype.la=!0,kn.prototype.ja=function(){return this.a},kn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var An={};function Nn(t){var e=new kn;return e.a=t,e}function Rn(t){var e=document;return o(t)?e.getElementById(t):t}function Dn(t,e){it(e,function(e,n){e&&e.la&&(e=e.ja()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Pn.hasOwnProperty(n)?t.setAttribute(Pn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}Nn("<!DOCTYPE html>"),Nn(""),Nn("<br>");var Pn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Mn(t){if(t&&"number"==typeof t.length){if(p(t))return"function"==typeof t.item||"string"==typeof t.item;if(f(t))return"function"==typeof t.item}return!1}function jn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(l(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),Un(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Un(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new function(){},t,e),e.join("")}var Ln={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Vn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Un(t,e){e.push('"',t.replace(Vn,function(t){var e=Ln[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Ln[t]=e),e}),'"')}function Fn(){var t=ir();return Wt&&!!$t&&11==$t||/Edge\/\d+/.test(t)}function Bn(){return i.window&&i.window.location.href||self&&self.location&&self.location.href||""}function qn(t,e){e=e||i.window;var n="about:blank";t&&(n=Tn(Cn(t))),e.location.href=n}function Hn(t){return!!((t=(t||ir()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Wn(t){t=t||i.window;try{t.close()}catch(t){}}function zn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ir().toLowerCase(),r&&(e.target=r,$(n,"crios/")&&(e.target="_blank")),er(ir())==$n&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof En?n:Cn("undefined"!=typeof n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((rt("iPhone")&&!rt("iPod")&&!rt("iPad")||rt("iPad")||rt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(s=r.document.createElement("A"),e instanceof En||e instanceof En||(e=e.la?e.ja():String(e),In.test(e)||(e="about:invalid#zClosurez"),e=On(e)),s.href=Tn(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Tn(e),s&&(Gt&&$(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,vn("b/12014412, meta tag with sanitized URL"),t=Nn(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+W(t)+'">'),s.document.write(function(t){return t instanceof kn&&t.constructor===kn&&t.b===An?t.a:(C("expected object of type SafeHtml, got '"+t+"' of type "+u(t)),"type_error:SafeHtml")}(t)),s.document.close())):(s=r.open(Tn(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var Gn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function Kn(){var t=null;return new vt(function(e){"complete"==i.document.readyState?e():(t=function(){e()},we(window,"load",t))}).o(function(e){throw _e(window,"load",t),e})}function Qn(t){return t=t||ir(),!("file:"!==cr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xn(){var t=i.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Yn(){return"object"!=typeof i.window&&"function"==typeof i.importScripts}function Jn(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":Yn()?"Worker":"Browser"}function Zn(){var t=Jn();return"ReactNative"===t||"Node"===t}var $n="Firefox",tr="Chrome";function er(t){var e=t.toLowerCase();return $(e,"opera/")||$(e,"opr/")||$(e,"opios/")?"Opera":$(e,"iemobile")?"IEMobile":$(e,"msie")||$(e,"trident/")?"IE":$(e,"edge/")?"Edge":$(e,"firefox/")?$n:$(e,"silk/")?"Silk":$(e,"blackberry")?"Blackberry":$(e,"webos")?"Webos":!$(e,"safari/")||$(e,"chrome/")||$(e,"crios/")||$(e,"android")?!$(e,"chrome/")&&!$(e,"crios/")||$(e,"edge/")?$(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":tr:"Safari"}var nr={Pc:"FirebaseCore-web",Rc:"FirebaseUI-web"};function rr(t,e){e=e||[];var n,r=[],i={};for(n in nr)i[nr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!=typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Jn())?r=er(i=ir()):"Worker"===r&&(r=er(i=ir())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ir(){return i.navigator&&i.navigator.userAgent||""}function or(t,e){t=t.split("."),e=e||i;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function sr(){try{var t=i.localStorage,e=dr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Fn()||!!i.indexedDB}catch(t){return Yn()&&!!i.indexedDB}return!1}function ar(){return(ur()||"chrome-extension:"===cr()||Qn())&&!Zn()&&sr()&&!Yn()}function ur(){return"http:"===cr()||"https:"===cr()}function cr(){return i.location&&i.location.protocol||null}function lr(t){return!Hn(t=t||ir())&&er(t)!=$n}function hr(t){return"undefined"==typeof t?null:jn(t)}function fr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function pr(t){if(null!==t)return JSON.parse(t)}function dr(t){return t||Math.floor(1e9*Math.random()).toString()}function yr(t){return"Safari"!=er(t=t||ir())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function vr(){var t=i.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function mr(){var t=i.navigator;return!t||"boolean"!=typeof t.onLine||!ur()&&"chrome-extension:"!==cr()&&"undefined"==typeof t.connection||t.onLine}function gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.c=t,this.b=e,t=ir(),e=Jn(),this.a=Hn(t)||"ReactNative"===e}function br(){var t=i.document;return!t||"undefined"==typeof t.visibilityState||"visible"==t.visibilityState}function wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function _r(){return!(!or("fireauth.oauthhelper",i)&&!or("fireauth.iframe",i))}gr.prototype.get=function(){return this.a?this.b:this.c};var Sr,Er={};try{var Tr={};Object.defineProperty(Tr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Tr,"abcd",{configurable:!0,enumerable:!0,value:2}),Sr=2==Tr.abcd}catch(qt){Sr=!1}function Ir(t,e,n){Sr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Cr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ir(t,n,e[n])}function xr(t){var e={};return Cr(e,t),e}function Or(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ir(e,n,Or(t[n]));return e}function kr(t,e){this.code=Nr+t,this.message=e||Rr[t]||""}function Ar(t){var e=t&&t.code;return e?new kr(e.substring(Nr.length),t.message):null}_(kr,Error),kr.prototype.C=function(){return{code:this.code,message:this.message}},kr.prototype.toJSON=function(){return this.C()};var Nr="auth/",Rr={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Dr(t){var e=t[Lr];if("undefined"==typeof e)throw new kr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new kr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pr];if(n&&"object"==typeof n){e=n[Fr];var r=n[Vr];if(n=n[Ur],"string"==typeof e&&e.length){if(this.a=e,"undefined"!=typeof r&&"boolean"!=typeof r)throw new kr("argument-error",Vr+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!=typeof n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new kr("argument-error",Ur+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!=typeof e)throw new kr("argument-error",Fr+" property must be a non empty string when specified.");if("undefined"!=typeof r||"undefined"!=typeof n)throw new kr("missing-android-pkg-name")}}else if("undefined"!=typeof n)throw new kr("argument-error",Pr+" property must be a non null object when specified.");if(this.f=null,(e=t[jr])&&"object"==typeof e){if("string"==typeof(e=e[Br])&&e.length)this.f=e;else if("undefined"!=typeof e)throw new kr("argument-error",Br+" property must be a non empty string when specified.")}else if("undefined"!=typeof e)throw new kr("argument-error",jr+" property must be a non null object when specified.");if("undefined"!=typeof(t=t[Mr])&&"boolean"!=typeof t)throw new kr("argument-error",Mr+" property must be a boolean when specified.");this.c=!!t}var Pr="android",Mr="handleCodeInApp",jr="iOS",Lr="url",Vr="installApp",Ur="minimumVersion",Fr="packageName",Br="bundleId";function qr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e)null===e[n]&&delete e[n];return e}var Hr=null,Wr=null;function zr(t){this.c=t.sub,w(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Gr(t){if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Wr[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hr){Hr={},Wr={};for(var t=0;65>t;t++)Hr[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Wr[Hr[t]]=t,62<=t&&(Wr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t));if(r.sub&&r.iss&&r.aud&&r.exp)return new zr(r)}catch(t){}return null}zr.prototype.f=function(){return this.b};var Kr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qr=["client_id","response_type","scope","redirect_uri","state"],Xr={Qc:{Ma:"locale",Aa:500,za:600,Na:"facebook.com",cb:Qr},Sc:{Ma:null,Aa:500,za:620,Na:"github.com",cb:Qr},Tc:{Ma:"hl",Aa:515,za:680,Na:"google.com",cb:Qr},Zc:{Ma:"lang",Aa:485,za:705,Na:"twitter.com",cb:Kr}};function Yr(t){for(var e in Xr)if(Xr[e].Na==t)return Xr[e];return null}function Jr(t){var e={};e["facebook.com"]=ni,e["google.com"]=ii,e["github.com"]=ri,e["twitter.com"]=oi;var n=t&&t[$r];try{if(n)return e[n]?new e[n](t):new ei(t);if("undefined"!=typeof t[Zr])return new ti(t)}catch(t){}return null}var Zr="idToken",$r="providerId";function ti(t){var e=t[$r];if(!e&&t[Zr]){var n=Gr(t[Zr]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!=typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Ir(this,"providerId",e),Ir(this,"isNewUser",n)}function ei(t){ti.call(this,t),Ir(this,"profile",Or((t=pr(t.rawUserInfo||"{}"))||{}))}function ni(t){if(ei.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ri(t){if(ei.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ir(this,"username",this.profile&&this.profile.login||null)}function ii(t){if(ei.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oi(t){if(ei.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ir(this,"username",t.screenName||null)}function si(t,e){return t.then(function(t){if(t[Vo]){var n=Gr(t[Vo]);if(!n||e!=n.c)throw new kr("user-mismatch");return t}throw new kr("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==Nr+"user-not-found"?new kr("user-mismatch"):t})}function ai(t,e,n){if(e.idToken||e.accessToken)e.idToken&&Ir(this,"idToken",e.idToken),e.accessToken&&Ir(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new kr("internal-error","failed to construct a credential");Ir(this,"accessToken",e.oauthToken),Ir(this,"secret",e.oauthTokenSecret)}Ir(this,"providerId",t),Ir(this,"signInMethod",n)}function ui(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:an(e).toString(),requestUri:"http://localhost"}}function ci(t,e){this.zc=e||[],Cr(this,{providerId:t,isOAuthProvider:!0}),this.tb={},this.Za=(Yr(t)||{}).Ma||null,this.Xa=null}function li(t){ci.call(this,t,Qr),this.a=[]}function hi(){li.call(this,"facebook.com")}function fi(t){if(!t)throw new kr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new hi).credential(null,e)}function pi(){li.call(this,"github.com")}function di(t){if(!t)throw new kr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new pi).credential(null,e)}function yi(){li.call(this,"google.com"),this.ta("profile")}function vi(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new yi).credential(n,e)}function mi(){ci.call(this,"twitter.com",Kr)}function gi(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new kr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ai("twitter.com",n,"twitter.com")}function bi(t,e,n){this.a=t,this.b=e,Ir(this,"providerId","password"),Ir(this,"signInMethod",n===wi.EMAIL_LINK_SIGN_IN_METHOD?wi.EMAIL_LINK_SIGN_IN_METHOD:wi.EMAIL_PASSWORD_SIGN_IN_METHOD)}function wi(){Cr(this,{providerId:"password",isOAuthProvider:!1})}function _i(t,e){if(!(e=Si(e)))throw new kr("argument-error","Invalid email link!");return new bi(t,e,wi.EMAIL_LINK_SIGN_IN_METHOD)}function Si(t){var e=Ke((t=new function(t){this.a=Qe(t)}(t)).a,"oobCode")||null;return"signIn"===(Ke(t.a,"mode")||null)&&e?e:null}function Ei(t){if(!(t.Ra&&t.Qa||t.Ea&&t.Y))throw new kr("internal-error");this.a=t,Ir(this,"providerId","phone"),Ir(this,"signInMethod","phone")}function Ti(t){return t.a.Ea&&t.a.Y?{temporaryProof:t.a.Ea,phoneNumber:t.a.Y}:{sessionInfo:t.a.Ra,code:t.a.Qa}}function Ii(t){try{this.a=t||e.auth()}catch(t){throw new kr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Cr(this,{providerId:"phone",isOAuthProvider:!1})}function Ci(t,e){if(!t)throw new kr("missing-verification-id");if(!e)throw new kr("missing-verification-code");return new Ei({Ra:t,Qa:e})}function xi(t){if(t.temporaryProof&&t.phoneNumber)return new Ei({Ea:t.temporaryProof,Y:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return vi(t,n);case"facebook.com":return fi(n);case"github.com":return di(n);case"twitter.com":return gi(n,r);default:return new li(e).credential(t,n)}}catch(t){return null}}function Oi(t){if(!t.isOAuthProvider)throw new kr("invalid-oauth-provider")}function ki(t,e,n,r,i){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new kr("invalid-auth-event");if(this.f&&this.a)throw new kr("invalid-auth-event");if(this.f&&!this.g)throw new kr("invalid-auth-event")}function Ai(t){return(t=t||{}).type?new ki(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Ar(t.error)):null}function Ni(){this.b=null,this.a=[]}_(ei,ti),_(ni,ei),_(ri,ei),_(ii,ei),_(oi,ei),ai.prototype.xa=function(t){return es(t,ui(this))},ai.prototype.c=function(t,e){var n=ui(this);return n.idToken=e,ns(t,n)},ai.prototype.f=function(t,e){return si(rs(t,ui(this)),e)},ai.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t},ci.prototype.Ca=function(t){return this.tb=st(t),this},_(li,ci),li.prototype.ta=function(t){return L(this.a,t)||this.a.push(t),this},li.prototype.yb=function(){return B(this.a)},li.prototype.credential=function(t,e){if(!t&&!e)throw new kr("argument-error","credential failed: must provide the ID token and/or the access token.");return new ai(this.providerId,{idToken:t||null,accessToken:e||null},this.providerId)},_(hi,li),Ir(hi,"PROVIDER_ID","facebook.com"),Ir(hi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(pi,li),Ir(pi,"PROVIDER_ID","github.com"),Ir(pi,"GITHUB_SIGN_IN_METHOD","github.com"),_(yi,li),Ir(yi,"PROVIDER_ID","google.com"),Ir(yi,"GOOGLE_SIGN_IN_METHOD","google.com"),_(mi,ci),Ir(mi,"PROVIDER_ID","twitter.com"),Ir(mi,"TWITTER_SIGN_IN_METHOD","twitter.com"),bi.prototype.xa=function(t){return this.signInMethod==wi.EMAIL_LINK_SIGN_IN_METHOD?Rs(t,hs,{email:this.a,oobCode:this.b}):Rs(t,Os,{email:this.a,password:this.b})},bi.prototype.c=function(t,e){return this.signInMethod==wi.EMAIL_LINK_SIGN_IN_METHOD?Rs(t,fs,{idToken:e,email:this.a,oobCode:this.b}):Rs(t,Ss,{idToken:e,email:this.a,password:this.b})},bi.prototype.f=function(t,e){return si(this.xa(t),e)},bi.prototype.C=function(){return{email:this.a,password:this.b,signInMethod:this.signInMethod}},Cr(wi,{PROVIDER_ID:"password"}),Cr(wi,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Cr(wi,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ei.prototype.xa=function(t){return t.Sa(Ti(this))},Ei.prototype.c=function(t,e){var n=Ti(this);return n.idToken=e,Rs(t,As,n)},Ei.prototype.f=function(t,e){var n=Ti(this);return n.operation="REAUTH",si(t=Rs(t,Ns,n),e)},Ei.prototype.C=function(){var t={providerId:"phone"};return this.a.Ra&&(t.verificationId=this.a.Ra),this.a.Qa&&(t.verificationCode=this.a.Qa),this.a.Ea&&(t.temporaryProof=this.a.Ea),this.a.Y&&(t.phoneNumber=this.a.Y),t},Ii.prototype.Sa=function(t,e){var n=this.a.b;return Et(e.verify()).then(function(r){if(!o(r))throw new kr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Rs(n,ws,e)}(0,{phoneNumber:t,recaptchaToken:r}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new kr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Cr(Ii,{PROVIDER_ID:"phone"}),Cr(Ii,{PHONE_SIGN_IN_METHOD:"phone"}),ki.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.C()}};var Ri=null;function Di(t){var e="unauthorized-domain",n=void 0,r=Qe(t);t=r.b,"chrome-extension"==(r=r.c)?n=q("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=q("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",kr.call(this,e,n)}function Pi(t,e,n){kr.call(this,t,n),(t=e||{}).ub&&Ir(this,"email",t.ub),t.Y&&Ir(this,"phoneNumber",t.Y),t.credential&&Ir(this,"credential",t.credential)}function Mi(t){if(t.code){var e=t.code||"";0==e.indexOf(Nr)&&(e=e.substring(Nr.length));var n={credential:xi(t)};if(t.email)n.ub=t.email;else{if(!t.phoneNumber)return new kr(e,t.message||void 0);n.Y=t.phoneNumber}return new Pi(e,n,t.message)}return null}Ni.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=or("universalLinks.subscribe",i))&&t(null,this.b))},Ni.prototype.unsubscribe=function(t){U(this.a,function(e){return e==t})},_(Di,kr),_(Pi,kr),Pi.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&lt(t,e),t},Pi.prototype.toJSON=function(){return this.C()};var ji,Li=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Vi(){}function Ui(){}function Fi(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Bi(){}function qi(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=g(this.ac,this),this.a.onerror=g(this.zb,this),this.a.onprogress=g(this.bc,this),this.a.ontimeout=g(this.ec,this)}function Hi(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Wi(t,e,n){this.reset(t,e,n,void 0,void 0)}function zi(t){this.f=t,this.b=this.c=this.a=null}function Gi(t,e){this.name=t,this.value=e}Vi.prototype.c=null,_(Ui,Vi),Ui.prototype.a=function(){var t=Fi(this);return t?new ActiveXObject(t):new XMLHttpRequest},Ui.prototype.b=function(){var t={};return Fi(this)&&(t[0]=!0,t[1]=!0),t},ji=new Ui,_(Bi,Vi),Bi.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new qi;throw Error("Unsupported browser")},Bi.prototype.b=function(){return{}},(t=qi.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.ac=function(){this.status=200,this.responseText=this.a.responseText,Hi(this,4)},t.zb=function(){this.status=500,this.responseText="",Hi(this,4)},t.ec=function(){this.zb()},t.bc=function(){this.status=200,Hi(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Wi.prototype.a=null,Wi.prototype.reset=function(t,e,n,r,i){r||w(),delete this.a},Gi.prototype.toString=function(){return this.name};var Ki=new Gi("SEVERE",1e3),Qi=new Gi("WARNING",900),Xi=new Gi("CONFIG",700),Yi=new Gi("FINE",500);zi.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(C("Root logger has no level set."),null)}(this).value)for(f(e)&&(e=e()),t=new Wi(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ji={},Zi=null;function $i(t){var e;if(Zi||(Zi=new zi(""),Ji[""]=Zi,Zi.c=Xi),!(e=Ji[t])){e=new zi(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=$i(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Ji[t]=e}return e}function to(t,e){t&&t.log(Yi,e,void 0)}function eo(t){this.f=t}function no(t){Ae.call(this),this.i=t,this.readyState=ro,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=$i("goog.net.FetchXmlHttp")}_(eo,Vi),eo.prototype.a=function(){return new no(this.f)},eo.prototype.b=function(t){return function(){return t}}({}),_(no,Ae);var ro=0;function io(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function oo(t){Ae.call(this),this.headers=new Ve,this.D=t||null,this.c=!1,this.A=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.s=null,this.m=so,this.v=this.O=!1}(t=no.prototype).open=function(t,e){if(this.readyState!=ro)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,io(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.i.fetch(new Request(this.c,e)).then(this.dc.bind(this),this.Ab.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,io(this)),this.readyState=ro},t.dc=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,io(this)),this.a&&(this.readyState=3,io(this),this.a&&t.text().then(this.cc.bind(this,t),this.Ab.bind(this))))},t.cc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,io(this))},t.Ab=function(t){var e=this.f;e&&e.log(Qi,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,io(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(Qi,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(Qi,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},_(oo,Ae);var so="";oo.prototype.b=$i("goog.net.XhrIo");var ao=/^https?$/i,uo=["POST","PUT"];function co(t){return"content-type"==t.toLowerCase()}function lo(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ho(t),po(t)}function ho(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function fo(t){if(t.c&&"undefined"!=typeof r)if(t.A[1]&&4==vo(t)&&2==mo(t))to(t.b,go(t,"Local request error detected and ignored"));else if(t.i&&4==vo(t))Pe(t.Db,0,t);else if(t.dispatchEvent("readystatechange"),4==vo(t)){to(t.b,go(t,"Request complete")),t.c=!1;try{var e,n=mo(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(e=o)){var s;if(s=0===n){var a=String(t.l).match(Be)[1]||null;if(!a&&i.self&&i.self.location){var u=i.self.location.protocol;a=u.substr(0,u.length-1)}s=!ao.test(a?a.toLowerCase():"")}e=s}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<vo(t)?t.a.statusText:""}catch(e){to(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+mo(t)+"]",ho(t)}}finally{po(t)}}}function po(t,e){if(t.a){yo(t);var n=t.a,r=t.A[0]?a:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Ki,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function yo(t){t.a&&t.v&&(t.a.ontimeout=null),t.s&&(i.clearTimeout(t.s),t.s=null)}function vo(t){return t.a?t.a.readyState:0}function mo(t){try{return 2<vo(t)?t.a.status:-1}catch(t){return-1}}function go(t,e){return e+" ["+t.N+" "+t.l+" "+mo(t)+"]"}function bo(t,e){this.g=[],this.v=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function wo(t,e,n){t.a=!0,t.c=n,t.f=!e,To(t)}function _o(t){if(t.a){if(!t.u)throw new Io(t);t.u=!1}}function So(t,e,n,r){t.g.push([e,n,r]),t.a&&To(t)}function Eo(t){return j(t.g,function(t){return f(t[1])})}function To(t){if(t.h&&t.a&&Eo(t)){var e=t.h,n=Oo[e];n&&(i.clearTimeout(n.a),delete Oo[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var o=t.g.shift(),s=o[0],a=o[1];if(o=o[2],s=t.f?a:s)try{var u=s.call(o||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(E(e)||"function"==typeof i.Promise&&e instanceof i.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Eo(t)||(n=!0)}}t.c=e,r&&(u=g(t.m,t,!0),r=g(t.m,t,!1),e instanceof bo?(So(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new xo(e),Oo[e.a]=e,t.h=e.a)}function Io(){T.call(this)}function Co(){T.call(this)}function xo(t){this.a=i.setTimeout(g(this.c,this),0),this.b=t}(t=oo.prototype).Fa=function(){"undefined"!=typeof r&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",to(this.b,go(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(to(this.b,go(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),po(this))},t.ua=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),po(this,!0)),oo.lb.ua.call(this)},t.Db=function(){this.pa||(this.I||this.i||this.f?fo(this):this.sc())},t.sc=function(){fo(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case so:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Ki,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return to(this.b,"Can not get response: "+t.message),null}},bo.prototype.cancel=function(t){if(this.a)this.c instanceof bo&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.s,this):this.u=!0,this.a||(t=new Co(this),_o(this),wo(this,!1,t))}},bo.prototype.m=function(t,e){this.i=!1,wo(this,t,e)},bo.prototype.D=function(){_o(this),wo(this,!0,null)},bo.prototype.then=function(t,e,n){var r,i,o=new vt(function(t,e){r=t,i=e});return So(this,r,function(t){t instanceof Co?o.cancel():i(t)}),o.then(t,e,n)},S(bo),_(Io,T),Io.prototype.message="Deferred has already fired",Io.prototype.name="AlreadyCalledError",_(Co,T),Co.prototype.message="Deferred was canceled",Co.prototype.name="CanceledError",xo.prototype.c=function(){throw delete Oo[this.a],this.b};var Oo={};function ko(t){var e={},n=e.document||document,r=gn(t),i=document.createElement("SCRIPT"),o={Fb:i,Fa:void 0},s=new bo(Ao,o),a=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(a=window.setTimeout(function(){No(i,!0);var t=new Po(Do,"Timeout reached for loading script "+r);_o(s),wo(s,!1,t)},u),o.Fa=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(No(i,e.ad||!1,a),s.D())},i.onerror=function(){No(i,!0,a);var t=new Po(Ro,"Error while loading script "+r);_o(s),wo(s,!1,t)},lt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Dn(i,o),i.src=gn(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ao(){if(this&&this.Fb){var t=this.Fb;t&&"SCRIPT"==t.tagName&&No(t,!0,this.Fa)}}function No(t,e,n){null!=n&&i.clearTimeout(n),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ro=0,Do=1;function Po(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),T.call(this,n),this.code=t}function Mo(t){this.f=t}function jo(t,n,r){if(this.b=t,this.i=(t=n||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||Uo,this.f=st(t.secureTokenHeaders||Fo),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||Bo,this.a=st(t.firebaseHeaders||qo),r&&(this.a["X-Client-Version"]=r,this.f["X-Client-Version"]=r),r="Node"==Jn(),!(r=i.XMLHttpRequest||r&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest)&&!Yn())throw new kr("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,this.c=Yn()?new eo(self):Zn()?new Mo(r):new Bi}_(Po,T),_(Mo,Vi),Mo.prototype.a=function(){return new this.f},Mo.prototype.b=function(){return{}};var Lo,Vo="idToken",Uo=new gr(3e4,6e4),Fo={"Content-Type":"application/x-www-form-urlencoded"},Bo=new gr(3e4,6e4),qo={"Content-Type":"application/json"};function Ho(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Wo(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function zo(t,e,n,r,o,s,a){mr()?(function(){var t=ir();return!((t=er(t)!=tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Wt&&$t&&!(9<$t))}()||Yn()?t=g(t.m,t):(Lo||(Lo=new vt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{i[Ko]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=bn(Go,{onload:Ko});!function(t,e){So(ko(n),null,e,void 0)}(0,function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=g(t.u,t)),t(e,n,r,o,s,a)):n&&n(null)}jo.prototype.m=function(t,e,n,r,s,a){var u=new oo(this.c);if(a){u.g=Math.max(0,a);var c=setTimeout(function(){u.dispatchEvent("timeout")},a)}Ne(u,"complete",function(){c&&clearTimeout(c);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return to(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),Re(u,"ready",function(){c&&clearTimeout(c),Ut(this)}),Re(u,"timeout",function(){c&&clearTimeout(c),Ut(this),e&&e(null)}),function(t,e,n,r,s){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.N=n,t.G=!1,t.c=!0,t.a=t.D?t.D.a():ji.a(),t.A=function(t){return t.c||(t.c=t.b())}(t.D?t.D:ji),t.a.onreadystatechange=g(t.Db,t);try{to(t.b,go(t,"Opening Xhr")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(e){return to(t.b,go(t,"Error opening Xhr: "+e.message)),void lo(t,e)}e=r||"";var a=new Ve(t.headers);s&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||o(t))P(t,e,void 0);else for(var n=Le(t),r=je(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(s,function(t,e){a.set(e,t)}),s=function(t){t:{for(var e=co,n=t.length,r=o(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:o(t)?t.charAt(e):t[e]}(a.T()),r=i.FormData&&e instanceof i.FormData,!L(uo,n)||s||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{yo(t),0<t.g&&(t.v=function(t){return Wt&&ee(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),to(t.b,go(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=g(t.Fa,t)):t.s=Pe(t.Fa,t.g,t)),to(t.b,go(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){to(t.b,go(t,"Send error: "+e.message)),lo(t,e)}}(u,t,n,r,s)};var Go=vn("https://apis.google.com/js/client.js?onload=%{onload}"),Ko="__fcb"+Math.floor(1e6*Math.random()).toString();function Qo(t){if(!Li.test(t.email))throw new kr("invalid-email")}function Xo(t){"email"in t&&Qo(t)}function Yo(t){if(!t[Vo])throw new kr("internal-error")}function Jo(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new kr("internal-error")}else{if(!t.sessionInfo)throw new kr("missing-verification-id");if(!t.code)throw new kr("missing-verification-code")}}jo.prototype.u=function(t,e,n,r,i){var o=this;Lo.then(function(){window.gapi.client.setApiKey(o.b);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},jo.prototype.jb=function(){return Rs(this,Es,{})},jo.prototype.mb=function(t,e){return Rs(this,_s,{idToken:t,email:e})},jo.prototype.nb=function(t,e){return Rs(this,Ss,{idToken:t,password:e})};var Zo={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function $o(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new kr("internal-error")}function ts(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Mi(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Mi(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Mi(t)):t.errorMessage&&(e=Ds(t.errorMessage)),e)throw e;if(!t[Vo])throw new kr("internal-error")}function es(t,e){return e.returnIdpCredential=!0,Rs(t,Ts,e)}function ns(t,e){return e.returnIdpCredential=!0,Rs(t,Cs,e)}function rs(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Rs(t,Is,e)}function is(t){if(!t.oobCode)throw new kr("invalid-action-code")}(t=jo.prototype).ob=function(t,e){var n={idToken:t},r=[];return it(Zo,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Rs(this,_s,n)},t.gb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),Rs(this,vs,t)},t.hb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),Rs(this,ds,t)},t.fb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Rs(this,ys,t)},t.Sa=function(t){return Rs(this,ks,t)},t.Wa=function(t,e){return Rs(this,bs,{oobCode:t,newPassword:e})},t.Ia=function(t){return Rs(this,ss,{oobCode:t})},t.Ua=function(t){return Rs(this,os,{oobCode:t})};var os={endpoint:"setAccountInfo",w:is,$:"email"},ss={endpoint:"resetPassword",w:is,J:function(t){if(!t.email||!t.requestType)throw new kr("internal-error")}},as={endpoint:"signupNewUser",w:function(t){if(Qo(t),!t.password)throw new kr("weak-password")},J:Yo,P:!0},us={endpoint:"createAuthUri"},cs={endpoint:"deleteAccount",S:["idToken"]},ls={endpoint:"setAccountInfo",S:["idToken","deleteProvider"],w:function(t){if(!l(t.deleteProvider))throw new kr("internal-error")}},hs={endpoint:"emailLinkSignin",S:["email","oobCode"],w:Qo,J:Yo,P:!0},fs={endpoint:"emailLinkSignin",S:["idToken","email","oobCode"],w:Qo,J:Yo,P:!0},ps={endpoint:"getAccountInfo"},ds={endpoint:"getOobConfirmationCode",S:["requestType"],w:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new kr("internal-error");Qo(t)},$:"email"},ys={endpoint:"getOobConfirmationCode",S:["idToken","requestType"],w:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new kr("internal-error")},$:"email"},vs={endpoint:"getOobConfirmationCode",S:["requestType"],w:function(t){if("PASSWORD_RESET"!=t.requestType)throw new kr("internal-error");Qo(t)},$:"email"},ms={pb:!0,endpoint:"getProjectConfig",Cb:"GET"},gs={pb:!0,endpoint:"getRecaptchaParam",Cb:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new kr("internal-error")}},bs={endpoint:"resetPassword",w:is,$:"email"},ws={endpoint:"sendVerificationCode",S:["phoneNumber","recaptchaToken"],$:"sessionInfo"},_s={endpoint:"setAccountInfo",S:["idToken"],w:Xo,P:!0},Ss={endpoint:"setAccountInfo",S:["idToken"],w:function(t){if(Xo(t),!t.password)throw new kr("weak-password")},J:Yo,P:!0},Es={endpoint:"signupNewUser",J:Yo,P:!0},Ts={endpoint:"verifyAssertion",w:$o,J:ts,P:!0},Is={endpoint:"verifyAssertion",w:$o,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new kr("user-not-found");if(t.errorMessage)throw Ds(t.errorMessage);if(!t[Vo])throw new kr("internal-error")},P:!0},Cs={endpoint:"verifyAssertion",w:function(t){if($o(t),!t.idToken)throw new kr("internal-error")},J:ts,P:!0},xs={endpoint:"verifyCustomToken",w:function(t){if(!t.token)throw new kr("invalid-custom-token")},J:Yo,P:!0},Os={endpoint:"verifyPassword",w:function(t){if(Qo(t),!t.password)throw new kr("wrong-password")},J:Yo,P:!0},ks={endpoint:"verifyPhoneNumber",w:Jo,J:Yo},As={endpoint:"verifyPhoneNumber",w:function(t){if(!t.idToken)throw new kr("internal-error");Jo(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Mi(t);Yo(t)}},Ns={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",w:Jo,J:Yo};function Rs(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.S))return Tt(new kr("internal-error"));var r,i=e.Cb||"POST";return Et(n).then(e.w).then(function(){return e.P&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var s=Qe(t.g+e);Ge(s,"key",t.b),o&&Ge(s,"cb",w().toString());var a="GET"==n;if(a)for(var u in r)r.hasOwnProperty(u)&&Ge(s,u,r[u]);return new vt(function(e,o){zo(t,s.toString(),function(t){t?t.error?o(Ps(t,i||{})):e(t):o(new kr("network-request-failed"))},n,a?void 0:jn(fr(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Tb,e.pb||!1)}).then(function(t){return r=t}).then(e.J).then(function(){if(!e.$)return r;if(!(e.$ in r))throw new kr("internal-error");return r[e.$]})}function Ds(t){return Ps({error:{errors:[{message:t}],code:400,message:t}})}function Ps(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new kr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",lt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new kr(r[i],e);return!e&&t&&(e=hr(t)),new kr("internal-error",e)}var Ms,js={Vc:{Ya:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://securetoken.googleapis.com/v1/token",id:"p"},Xc:{Ya:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Yc:{Ya:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",eb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ls(t){for(var e in js)if(js[e].id===t)return{firebaseEndpoint:(t=js[e]).Ya,secureTokenEndpoint:t.eb};return null}Ms=Ls("__EID__")?"__EID__":void 0;var Vs,Us=vn("https://apis.google.com/js/api.js?onload=%{onload}"),Fs=new gr(3e4,6e4),Bs=new gr(5e3,15e3),qs=null;function Hs(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Xe(this.i,"/__/auth/iframe"),Ge(this.a,"apiKey",this.g),Ge(this.a,"appName",this.h),this.b=null,this.c=[]}function Ws(t,e,n,r,i){this.m=t,this.u=e,this.c=n,this.l=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function zs(t){try{return e.app(t).auth().Ka()}catch(t){return[]}}function Gs(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.v=null,this.g=[],this.l=this.a=null}function Ks(t){var e=Bn();return function(t){return Rs(t,ms,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Qe(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Qe(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:Gn.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Di(Bn())})}function Qs(t){return t.l?t.l:(t.l=Kn().then(function(){if(!t.s){var e=t.c,n=t.h,r=zs(t.b),o=new Hs(t.u,t.f,t.b);o.f=e,o.b=n,o.c=B(r||[]),t.s=o.toString()}t.i=new function(t){this.b=t,this.a=null,this.ab=function(t){return(qs||(qs=new vt(function(t,e){if(mr()){var n=function(){vr(),or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){vr(),e(Error("Network Error"))},timeout:Fs.get()})};if(or("gapi.iframes.Iframe"))t();else if(or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();i[r]=function(){or("gapi.load")?n():e(Error("Network Error"))},Et(ko(r=bn(Us,{onload:r}))).o(function(){e(Error("Network Error"))})}}else e(Error("Network Error"))}).o(function(t){throw qs=null,t}))).then(function(){return new vt(function(e,n){or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Bs.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}(t.s),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.ab.then(function(){t.a.register("authEvent",e,or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ai(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Et(n)}return n.status="ERROR",Et(n)})}(t)}),t.l)}function Xs(t){return t.m||(t.v=t.c?rr(t.c,zs(t.b)):null,t.m=new jo(t.f,Ls(t.h),t.v)),t.m}function Ys(t,e,n,r,i,o,s,a,u,c){return(t=new Ws(t,e,n,r,i)).i=o,t.g=s,t.h=a,t.b=st(u||null),t.f=c,t.toString()}function Js(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new kr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Zs(){this.a={},this.type="inMemory"}function $s(){try{var t=!!i.indexedDB}catch(e){t=!1}if(!t)throw new kr("web-storage-unsupported");this.f={},this.c=[],this.a=0,this.h=i.indexedDB,this.type="indexedDB"}function ta(t){return t.g||(t.g=function(t){return new vt(function(e,n){var r=t.h.open("firebaseLocalStorageDb",1);r.onerror=function(t){n(Error(t.target.errorCode))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(t){e(t.target.result)}})}(t)),t.g}function ea(t){return t.objectStore("firebaseLocalStorage")}function na(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ra(t){return new vt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})}function ia(){if(!function(){var t="Node"==Jn();if(!(t=oa()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Jn())throw new kr("internal-error","The LocalStorage compatibility library was not found.");throw new kr("web-storage-unsupported")}this.a=oa()||e.INTERNAL.node.localStorage,this.type="localStorage"}function oa(){try{var t=i.localStorage,e=dr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function sa(){this.type="nullStorage"}function aa(){if(!function(){var t="Node"==Jn();if(!(t=ua()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Jn())throw new kr("internal-error","The SessionStorage compatibility library was not found.");throw new kr("web-storage-unsupported")}this.a=ua()||e.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ua(){try{var t=i.sessionStorage,e=dr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}Hs.prototype.toString=function(){return this.f?Ge(this.a,"v",this.f):un(this.a.a,"v"),this.b?Ge(this.a,"eid",this.b):un(this.a.a,"eid"),this.c.length?Ge(this.a,"fw",this.c.join(",")):un(this.a.a,"fw"),this.a.toString()},Ws.prototype.toString=function(){var t=Xe(this.m,"/__/auth/handler");if(Ge(t,"apiKey",this.u),Ge(t,"appName",this.c),Ge(t,"authType",this.l),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().aa()}catch(t){r=null}for(var i in n.Xa=r,Ge(t,"providerId",this.a.providerId),r=fr((n=this.a).tb))r[i]=r[i].toString();i=n.zc,r=st(r);for(var o=0;o<i.length;o++){var s=i[o];s in r&&delete r[s]}n.Za&&n.Xa&&!r[n.Za]&&(r[n.Za]=n.Xa),ot(r)||Ge(t,"customParameters",hr(r))}if("function"==typeof this.a.yb&&(n=this.a.yb()).length&&Ge(t,"scopes",n.join(",")),this.i?Ge(t,"redirectUrl",this.i):un(t.a,"redirectUrl"),this.g?Ge(t,"eventId",this.g):un(t.a,"eventId"),this.h?Ge(t,"v",this.h):un(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Ke(t,a)&&Ge(t,a,this.b[a]);return this.f?Ge(t,"eid",this.f):un(t.a,"eid"),(a=zs(this.c)).length&&Ge(t,"fw",a.join(",")),t.toString()},(t=Gs.prototype).Da=function(t,e,n){var r=new kr("popup-closed-by-user"),i=new kr("web-storage-unsupported"),o=this,s=!1;return this.ca().then(function(){(function(t){var e={type:"webStorageSupport"};return Qs(t).then(function(){return function(t,e){return t.ab.then(function(){return new vt(function(n){t.a.send(e.type,e,n,or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&"undefined"!=typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&Wn(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new vt(function(e){return function n(){Me(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return Me(n).then(function(){e(r)})})},t.Gb=function(){var t=ir();return!lr(t)&&!yr(t)},t.Bb=function(){return!1},t.xb=function(t,e,n,r,i,o,s){if(!t)return Tt(new kr("popup-blocked"));if(s&&!lr())return this.ca().o(function(e){Wn(t),i(e)}),r(),Et();this.a||(this.a=Ks(Xs(this)));var a=this;return this.a.then(function(){var e=a.ca().o(function(e){throw Wn(t),i(e),e});return r(),e}).then(function(){Oi(n),s||qn(Ys(a.u,a.f,a.b,e,n,null,o,a.c,void 0,a.h),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(a.a=null),t})},t.Ba=function(t,e,n){this.a||(this.a=Ks(Xs(this)));var r=this;return this.a.then(function(){Oi(e),qn(Ys(r.u,r.f,r.b,t,e,Bn(),n,r.c,void 0,r.h))}).o(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ca=function(){var t=this;return Qs(this).then(function(){return t.i.ab}).o(function(){throw t.a=null,new kr("network-request-failed")})},t.Lb=function(){return!0},t.va=function(t){this.g.push(t)},t.Ja=function(t){U(this.g,function(e){return e==t})},(t=Js.prototype).get=function(t){return Et(this.a.getItem(t)).then(function(t){return t&&pr(t)})},t.set=function(t,e){return Et(this.a.setItem(t,hr(e)))},t.X=function(t){return Et(this.a.removeItem(t))},t.ia=function(){},t.ea=function(){},(t=Zs.prototype).get=function(t){return Et(this.a[t])},t.set=function(t,e){return this.a[t]=e,Et()},t.X=function(t){return delete this.a[t],Et()},t.ia=function(){},t.ea=function(){},(t=$s.prototype).set=function(t,e){var n,r=!1,i=this;return ta(this).then(function(e){return ra((e=ea(na(n=e,!0))).get(t))}).then(function(o){var s=ea(na(n,!0));return o?(o.value=e,ra(s.put(o))):(i.a++,r=!0,(o={}).fbase_key=t,o.value=e,ra(s.add(o)))}).then(function(){i.f[t]=e}).ga(function(){r&&i.a--})},t.get=function(t){return ta(this).then(function(e){return ra(ea(na(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.X=function(t){var e=!1,n=this;return ta(this).then(function(r){return e=!0,n.a++,ra(ea(na(r,!0)).delete(t))}).then(function(){delete n.f[t]}).ga(function(){e&&n.a--})},t.Ic=function(){var t=this;return ta(this).then(function(t){var e=ea(na(t,!1));return e.getAll?ra(e.getAll()):new vt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(Error(t.target.errorCode))}})}).then(function(e){var n={},r=[];if(0==t.a){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)if(r in n)if(typeof e[r]!=typeof n[r])i.push(r);else if(l(e[r])){t:{var o=void 0,s=e[r],a=n[r];for(o in s)if(!(o in a)||s[o]!==a[o]){o=!1;break t}for(o in a)if(!(o in s)){o=!1;break t}o=!0}o||i.push(r)}else"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r);else i.push(r);for(r in n)r in e||i.push(r);return i}(t.f,n),t.f=n}return r})},t.ia=function(t){0==this.c.length&&function(t){t.b&&t.b.cancel("STOP_EVENT"),function e(){return t.b=Me(800).then(g(t.Ic,t)).then(function(e){0<e.length&&P(t.c,function(t){t(e)})}).then(e).o(function(t){"STOP_EVENT"!=t.message&&e()}),t.b}()}(this),this.c.push(t)},t.ea=function(t){U(this.c,function(e){return e==t}),0==this.c.length&&this.b&&this.b.cancel("STOP_EVENT")},(t=ia.prototype).get=function(t){var e=this;return Et().then(function(){return pr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Et().then(function(){var r=hr(e);null===r?n.X(t):n.a.setItem(t,r)})},t.X=function(t){var e=this;return Et().then(function(){e.a.removeItem(t)})},t.ia=function(t){i.window&&ge(i.window,"storage",t)},t.ea=function(t){i.window&&_e(i.window,"storage",t)},(t=sa.prototype).get=function(){return Et(null)},t.set=function(){return Et()},t.X=function(){return Et()},t.ia=function(){},t.ea=function(){},(t=aa.prototype).get=function(t){var e=this;return Et().then(function(){return pr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Et().then(function(){var r=hr(e);null===r?n.X(t):n.a.setItem(t,r)})},t.X=function(t){var e=this;return Et().then(function(){e.a.removeItem(t)})},t.ia=function(){},t.ea=function(){};var ca,la,ha={B:ia,Pa:aa},fa={B:ia,Pa:aa},pa={B:Js,Pa:sa},da={B:ia,Pa:sa},ya={Uc:"local",NONE:"none",Wc:"session"};function va(){var t=!(yr(ir())||!Xn()),e=lr(),n=sr();this.m=t,this.h=e,this.l=n,this.a={},ca||(ca=new function(){var t={};t.Browser=ha,t.Node=fa,t.ReactNative=pa,t.Worker=da,this.a=t[Jn()]}),t=ca;try{if(!Fn()&&_r()||!i.indexedDB)var r=new t.a.B;else Vs||(Vs=new $s),r=Vs;this.g=r}catch(t){this.g=new Zs,this.h=!0}try{this.i=new t.a.Pa}catch(t){this.i=new Zs}this.u=new Zs,this.f=g(this.Kb,this),this.b={}}function ma(){return la||(la=new va),la}function ga(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function ba(t,e){return"firebase:"+t.name+(e?":"+e:"")}function wa(t,e,n){return n=ba(e,n),"local"==e.B&&(t.b[n]=null),ga(t,e.B).X(n)}function _a(t){t.c&&(clearInterval(t.c),t.c=null)}(t=va.prototype).get=function(t,e){return ga(this,t.B).get(ba(t,e))},t.set=function(t,e,n){var r=ba(t,n),i=this,o=ga(this,t.B);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.B&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=ba(t,e),this.l&&(this.b[t]=i.localStorage.getItem(t)),ot(this.a)&&(ga(this,"local").ia(this.f),this.h||(Fn()||!_r())&&i.indexedDB||!this.l||function(t){_a(t),t.c=setInterval(function(){for(var e in t.a){var n=i.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new ue({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Kb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=ba(t,e),this.a[t]&&(U(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ot(this.a)&&(ga(this,"local").ea(this.f),_a(this))},t.Kb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"==typeof r&&(r=null);var o=i.localStorage.getItem(n);o!==r&&(this.b[n]=o,this.Va(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!=typeof t.a.a?ga(this,"local").ea(this.f):_a(this),this.m)if(n=i.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?i.localStorage.setItem(e,r):i.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"==typeof t.a.a)return;var s=this;n=function(){"undefined"==typeof t.a.a&&s.b[e]===i.localStorage.getItem(e)||(s.b[e]=i.localStorage.getItem(e),s.Va(e))},Wt&&$t&&10==$t&&i.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else P(t,g(this.Va,this))},t.Va=function(t){this.a[t]&&P(this.a[t],function(t){t()})};var Sa,Ea={name:"authEvent",B:"local"};function Ta(t,e){this.b=-1,this.b=Ia,this.f=i.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=i.Int32Array?new Int32Array(64):Array(64),void 0!==Sa||(Sa=i.Int32Array?new Int32Array(Ra):Ra),this.reset()}_(Ta,function(){this.b=-1});for(var Ia=64,Ca=Ia-1,xa=[],Oa=0;Oa<Ca;Oa++)xa[Oa]=0;var ka=F(128,xa);function Aa(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|Sa[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Na(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(o(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Aa(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var s=e[r++];if(!("number"==typeof s&&0<=s&&255>=s&&s==(0|s)))throw Error("message must be a byte array");t.f[i++]=s,i==t.b&&(Aa(t),i=0)}}t.c=i,t.g+=n}Ta.prototype.reset=function(){this.g=this.c=0,this.a=i.Int32Array?new Int32Array(this.h):B(this.h)};var Ra=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Da(){Ta.call(this,8,Pa)}_(Da,Ta);var Pa=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ma(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.v=new function(){this.a=ma()},this.g=new function(t){this.a=t,this.b=ma()}(this.h),this.f=null,this.b=[],this.a=this.c=null}function ja(t){return new kr("invalid-cordova-configuration",t)}function La(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Va(t){return t.f||(t.f=t.ca().then(function(){return new vt(function(e){t.va(function n(r){return e(r),t.Ja(n),!1}),function(t){function e(e){r=!0,o&&o.cancel(),Ua(t).then(function(r){var i=n;if(r&&e&&e.url){i=null;var o=e.url,s=Qe(o),a=Ke(s,"link"),u=Ke(Qe(a),"link");-1!=(o=Ke(Qe(s=Ke(s,"deep_link_id")),"link")||s||u||a||o).indexOf("/__/auth/callback")&&(i=(i="object"==typeof(i=pr(Ke(i=Qe(o),"firebaseError")||null))?Ar(i):null)?new ki(r.b,r.c,null,null,i):new ki(r.b,r.c,o,r.g)),i=i||n}La(t,i)})}var n=new ki("unknown",null,null,null,new kr("no-auth-event")),r=!1,o=Me(500).then(function(){return Ua(t).then(function(){r||La(t,n)})}),s=i.handleOpenURL;i.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(or("BuildInfo.packageName",i).toLowerCase()+"://")&&e({url:t}),"function"==typeof s)try{s(t)}catch(t){console.error(t)}},Ri||(Ri=new Ni),Ri.subscribe(e)}(t)})})),t.f}function Ua(t){var e=null;return function(t){return t.b.get(Ea,t.a).then(function(t){return Ai(t)})}(t.g).then(function(n){return e=n,wa((n=t.g).b,Ea,n.a)}).then(function(){return e})}(t=Ma.prototype).ca=function(){return this.ya?this.ya:this.ya=(Qn(void 0)?Kn().then(function(){return new vt(function(t,e){var n=i.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Tt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof or("universalLinks.subscribe",i))throw ja("cordova-universal-links-plugin is not installed");if("undefined"==typeof or("BuildInfo.packageName",i))throw ja("cordova-plugin-buildinfo is not installed");if("function"!=typeof or("cordova.plugins.browsertab.openUrl",i))throw ja("cordova-plugin-browsertab is not installed");if("function"!=typeof or("cordova.InAppBrowser.open",i))throw ja("cordova-plugin-inappbrowser is not installed")},function(){throw new kr("cordova-not-ready")})},t.Da=function(t,e){return e(new kr("operation-not-supported-in-this-environment")),Et()},t.xb=function(){return Tt(new kr("operation-not-supported-in-this-environment"))},t.Lb=function(){return!1},t.Gb=function(){return!0},t.Bb=function(){return!0},t.Ba=function(t,e,n){if(this.c)return Tt(new kr("redirect-operation-pending"));var r=this,o=i.document,s=null,a=null,u=null,c=null;return this.c=Et().then(function(){return Oi(e),Va(r)}).then(function(){return function(t,e,n,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new ki(e,r,null,o,new kr("no-auth-event")),a=or("BuildInfo.packageName",i);if("string"!=typeof a)throw new kr("invalid-cordova-configuration");var u=or("BuildInfo.displayName",i),c={};if(ir().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!ir().toLowerCase().match(/android/))return Tt(new kr("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=function(t){var e=new Da;Na(e,t),t=[];var n=8*e.g;Na(e,ka,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Aa(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return M(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),c.sessionId=o;var l=Ys(t.u,t.i,t.l,e,n,null,r,t.m,c,t.s);return t.ca().then(function(){var e=t.h;return t.v.a.set(Ea,s.C(),e)}).then(function(){var e=or("cordova.plugins.browsertab.isAvailable",i);if("function"!=typeof e)throw new kr("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=or("cordova.plugins.browsertab.openUrl",i)))throw new kr("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=or("cordova.InAppBrowser.open",i)))throw new kr("invalid-cordova-configuration");e=!(!(e=ir()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=n(l,e?"_blank":"_system","location=yes")}})})}(r,t,e,n)}).then(function(){return new vt(function(t,e){a=function(){var e=or("cordova.plugins.browsertab.close",i);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.va(a),c=function(){br()&&u()},o.addEventListener("resume",u=function(){s||(s=Me(2e3).then(function(){e(new kr("redirect-cancelled-by-user"))}))},!1),ir().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return Ua(r).then(function(){throw t})})}).ga(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&r.Ja(a),r.c=null})},t.va=function(t){this.b.push(t),Va(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new ki("unknown",null,null,null,new kr("no-auth-event")),t(e))})},t.Ja=function(t){U(this.b,function(e){return e==t})};var Fa={name:"pendingRedirect",B:"session"};function Ba(t){return wa(t.b,Fa,t.a)}function qa(t,e,n){this.v=t,this.l=e,this.u=n,this.h=[],this.f=!1,this.i=g(this.m,this),this.c=new Za,this.s=new nu,this.g=new function(t){this.a=t,this.b=ma()}(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.s,this.b.linkViaPopup=this.s,this.b.reauthViaPopup=this.s,this.a=Ha(this.v,this.l,this.u,Ms)}function Ha(t,n,r,i){var o=e.SDK_VERSION||null;return Qn()?new Ma(t,n,r,o,i):new Gs(t,n,r,o,i)}function Wa(t){t.f||(t.f=!0,t.a.va(t.i));var e=t.a;return t.a.ca().o(function(n){throw t.a==e&&t.reset(),n})}function za(t){t.a.Gb()&&Wa(t).o(function(e){var n=new ki("unknown",null,null,null,new kr("operation-not-supported-in-this-environment"));Xa(e)&&t.m(n)}),t.a.Bb()||$a(t.c)}qa.prototype.reset=function(){this.f=!1,this.a.Ja(this.i),this.a=Ha(this.v,this.l,this.u)},qa.prototype.subscribe=function(t){if(L(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(Fa,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?Ba(e.g).then(function(){Wa(e).o(function(t){var n=new ki("unknown",null,null,null,new kr("operation-not-supported-in-this-environment"));Xa(t)&&e.m(n)})}):za(e)}).o(function(){za(e)})}},qa.prototype.unsubscribe=function(t){U(this.h,function(e){return e==t})},qa.prototype.m=function(t){if(!t)throw new kr("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.qb(t.b,t.c)){(e=this.b[t.b])&&e.h(t,r),e=!0;break}}return $a(this.c),e};var Ga=new gr(2e3,1e4),Ka=new gr(3e4,6e4);function Qa(t,e,n,r,i,o){return t.a.xb(e,n,r,function(){t.f||(t.f=!0,t.a.va(t.i))},function(){t.reset()},i,o)}function Xa(t){return!(!t||"auth/cordova-not-ready"!=t.code)}qa.prototype.ba=function(){return this.c.ba()},qa.prototype.Ba=function(t,e,n){var r,i=this;return function(t){return t.b.set(Fa,"pending",t.a)}(this.g).then(function(){return i.a.Ba(t,e,n).o(function(t){if(Xa(t))throw new kr("operation-not-supported-in-this-environment");return r=t,Ba(i.g).then(function(){throw r})}).then(function(){return i.a.Lb()?new vt(function(){}):Ba(i.g).then(function(){return i.ba()}).then(function(){}).o(function(){})})})},qa.prototype.Da=function(t,e,n,r){return this.a.Da(n,function(n){t.fa(e,null,n,r)},Ga.get())};var Ya={};function Ja(t,e,n){var r=e+":"+n;return Ya[r]||(Ya[r]=new qa(t,e,n)),Ya[r]}function Za(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function $a(t){t.g||(t.g=!0,eu(t,!1,null,null))}function tu(t,e){if(t.b=function(){return Et(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function eu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Tt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):tu(t,n):tu(t,{user:null}),t.f=[],t.c=[]}function nu(){}function ru(t,e){this.a=e,Ir(this,"verificationId",t)}function iu(t,e,n,r){return new Ii(t).Sa(e,n).then(function(t){return new ru(t,r)})}function ou(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function su(t){this.f=t,this.b=this.a=null,this.c=0}function au(t,e){var n=e[Vo],r=e.refreshToken;e=uu(e.expiresIn),t.b=n,t.c=e,t.a=r}function uu(t){return w()+1e3*parseInt(t,10)}function cu(t,e){this.a=t||null,this.b=e||null,Cr(this,{lastSignInTime:wr(e||null),creationTime:wr(t||null)})}function lu(t,e){for(var n in ae.call(this,t),e)this[n]=e[n]}function hu(t,n,r){this.D=[],this.G=t.apiKey,this.s=t.appName,this.A=t.authDomain||null,t=e.SDK_VERSION?rr(e.SDK_VERSION):null,this.b=new jo(this.G,Ls(Ms),t),this.h=new su(this.b),gu(this,n[Vo]),au(this.h,n),Ir(this,"refreshToken",this.h.a),_u(this,r||{}),Ae.call(this),this.I=!1,this.A&&ar()&&(this.a=Ja(this.A,this.G,this.s)),this.N=[],this.i=null,this.l=function(t){return new ou(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-w()-3e5;return 0<e?e:0})}(this),this.U=g(this.Ga,this);var i=this;this.ha=null,this.sa=function(t){i.na(t.h)},this.W=null,this.O=[],this.ra=function(t){pu(i,t.f)},this.V=null}function fu(t,e){t.W&&_e(t.W,"languageCodeChanged",t.sa),(t.W=e)&&ge(e,"languageCodeChanged",t.sa)}function pu(t,n){t.O=n,Wo(t.b,e.SDK_VERSION?rr(e.SDK_VERSION,t.O):null)}function du(t,e){t.V&&_e(t.V,"frameworkChanged",t.ra),(t.V=e)&&ge(e,"frameworkChanged",t.ra)}function yu(t){try{return e.app(t.s).auth()}catch(e){throw new kr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.s+"'!")}}function vu(t){t.m||t.l.b||(t.l.start(),_e(t,"tokenChanged",t.U),ge(t,"tokenChanged",t.U))}function mu(t){_e(t,"tokenChanged",t.U),t.l.stop()}function gu(t,e){t.qa=e,Ir(t,"_lat",e)}function bu(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return function(t){return new vt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Zb:!0,value:o}:{Zb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)It(t[o],b(i,o,!0),b(i,o,!1));else e(r)})}(e).then(function(){return t})}function wu(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function _u(t,e){Cr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new cu(e.createdAt,e.lastLoginAt),providerData:[]})}function Su(){}function Eu(t){return Et().then(function(){if(t.m)throw new kr("app-deleted")})}function Tu(t){return M(t.providerData,function(t){return t.providerId})}function Iu(t,e){e&&(Cu(t,e.providerId),t.providerData.push(e))}function Cu(t,e){U(t.providerData,function(t){return t.providerId==e})}function xu(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ir(t,e,n)}function Ou(t,e){t!=e&&(Cr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),Ir(t,"metadata",e.metadata?function(t){return new cu(t.a,t.b)}(e.metadata):new cu),P(e.providerData,function(e){Iu(t,e)}),t.h=e.h,Ir(t,"refreshToken",t.h.a))}function ku(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return Rs(t.b,ps,{idToken:e}).then(g(t.tc,t))}(t,e).then(function(){return n||xu(t,"isAnonymous",!1),e})})}function Au(t,e){e[Vo]&&t.qa!=e[Vo]&&(au(t.h,e),t.dispatchEvent(new lu("tokenChanged")),gu(t,e[Vo]),xu(t,"refreshToken",t.h.a))}function Nu(t,e){return ku(t).then(function(){if(L(Tu(t),e))return bu(t).then(function(){throw new kr("provider-already-linked")})})}function Ru(t,e,n){return xr({user:t,credential:xi(e),additionalUserInfo:e=Jr(e),operationType:n})}function Du(t,e){return Au(t,e),t.reload().then(function(){return t})}function Pu(t,n,r,i,o){if(!ar())return Tt(new kr("operation-not-supported-in-this-environment"));if(t.i&&!o)return Tt(t.i);var s=Yr(r.providerId),a=dr(t.uid+":::"),u=null;(!lr()||Xn())&&t.A&&r.isOAuthProvider&&(u=Ys(t.A,t.G,t.s,n,r,null,a,e.SDK_VERSION||null));var c=zn(u,s&&s.Aa,s&&s.za);return i=i().then(function(){if(ju(t),!o)return t.F().then(function(){})}).then(function(){return Qa(t.a,c,n,r,a,!!u)}).then(function(){return new vt(function(e,r){t.fa(n,null,new kr("cancelled-popup-request"),t.g||null),t.f=e,t.v=r,t.g=a,t.c=t.a.Da(t,n,c,a)})}).then(function(t){return c&&Wn(c),t?xr(t):null}).o(function(t){throw c&&Wn(c),t}),Lu(t,i,o)}function Mu(t,e,n,r,i){if(!ar())return Tt(new kr("operation-not-supported-in-this-environment"));if(t.i&&!i)return Tt(t.i);var o=null,s=dr(t.uid+":::");return r=r().then(function(){if(ju(t),!i)return t.F().then(function(){})}).then(function(){return t.Z=s,bu(t)}).then(function(e){return t.da&&(e=(e=t.da).b.set(Uu,t.C(),e.a)),e}).then(function(){return t.a.Ba(e,n,s)}).o(function(e){if(o=e,t.da)return Fu(t.da);throw o}).then(function(){if(o)throw o}),Lu(t,r,i)}function ju(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new kr("internal-error");throw new kr("auth-domain-config-required")}}function Lu(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Tt(t.i)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new lu("userInvalidated")),t.i=e),e})}(t,e,n);return t.D.push(r),r.ga(function(){V(t.D,r)}),r}function Vu(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Vo]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-w())/1e3;var r=new hu(e,n,t);return t.providerData&&P(t.providerData,function(t){t&&Iu(r,xr(t))}),t.redirectEventId&&(r.Z=t.redirectEventId),r}Za.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Za.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c;"unknown"!=n||t.a&&"auth/web-storage-unsupported"==t.a.code||t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code?t.a?(eu(this,!0,null,t.a),Et()):e.wa(n,r)?function(t,e,n){n=n.wa(e.b,e.c);var r=e.f,i=e.g,o=!!e.b.match(/Redirect$/);n(r,i).then(function(e){eu(t,o,e,null)}).o(function(e){eu(t,o,null,e)})}(this,t,e):Tt(new kr("invalid-auth-event")):(eu(this,!1,null,null),Et())}else Tt(new kr("invalid-auth-event"))},Za.prototype.ba=function(){var t=this;return new vt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new kr("timeout");t.a&&t.a.cancel(),t.a=Me(Ka.get()).then(function(){t.b||eu(t,!0,null,e)})}(t))})},nu.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.fa(t.b,null,t.a,t.c),Et()):e.wa(n,r)?function(t,e){var n=t.c,r=t.b;e.wa(r,n)(t.f,t.g).then(function(t){e.fa(r,t,null,n)}).o(function(t){e.fa(r,null,t,n)})}(t,e):Tt(new kr("invalid-auth-event"))}else Tt(new kr("invalid-auth-event"))},ru.prototype.confirm=function(t){return t=Ci(this.verificationId,t),this.a(t)},ou.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=Me(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return t=i.document,e=null,br()||!t?Et():new vt(function(n){t.addEventListener("visibilitychange",e=function(){br()&&(t.removeEventListener("visibilitychange",e,!1),n())},!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).o(function(n){e.i(n)&&t(e,!1)})}(this,!0)},ou.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},su.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},su.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Tt(new kr("user-token-expired")):t||!this.b||w()>this.c-3e4?this.a?function(t,e){return function(t,e){return new vt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?zo(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(Ps(t)):t.access_token&&t.refresh_token?n(t):r(new kr("internal-error")):r(new kr("network-request-failed"))},"POST",an(e).toString(),t.f,t.l.get()):r(new kr("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=uu(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Et(null):Et({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},cu.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(lu,ae),_(hu,Ae),hu.prototype.na=function(t){this.ha=t,Ho(this.b,t)},hu.prototype.aa=function(){return this.ha},hu.prototype.Ka=function(){return B(this.O)},hu.prototype.Ga=function(){this.l.b&&(this.l.stop(),this.l.start())},Ir(hu.prototype,"providerId","firebase"),(t=hu.prototype).reload=function(){var t=this;return Lu(this,Eu(this).then(function(){return ku(t).then(function(){return bu(t)}).then(Su)}))},t.F=function(t){var e=this;return Lu(this,Eu(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new kr("internal-error");return t.accessToken!=e.qa&&(gu(e,t.accessToken),e.dispatchEvent(new lu("tokenChanged"))),xu(e,"refreshToken",t.refreshToken),t.accessToken}))},t.getToken=function(t){return Er["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(Er["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.F(t)},t.tc=function(t){if(!(t=t.users)||!t.length)throw new kr("internal-error");_u(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?M(t,function(t){return new function(t,e,n,r,i,o){Cr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Iu(this,e[n]);xu(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.bb=function(t){var e=this,n=null;return Lu(this,t.f(this.b,this.uid).then(function(t){return Au(e,t),n=Ru(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.uc=function(t){return this.bb(t).then(function(){})},t.$a=function(t){var e=this,n=null;return Lu(this,Nu(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.c(e.b,n)}).then(function(t){return n=Ru(e,t,"link"),Du(e,t)}).then(function(){return n}))},t.kc=function(t){return this.$a(t).then(function(t){return t.user})},t.mc=function(t,e){var n=this;return Lu(this,Nu(this,"phone").then(function(){return iu(yu(n),t,e,g(n.$a,n))}))},t.vc=function(t,e){var n=this;return Lu(this,Et().then(function(){return iu(yu(n),t,e,g(n.bb,n))}),!0)},t.mb=function(t){var e=this;return Lu(this,this.F().then(function(n){return e.b.mb(n,t)}).then(function(t){return Au(e,t),e.reload()}))},t.Mc=function(t){var e=this;return Lu(this,this.F().then(function(n){return t.c(e.b,n)}).then(function(t){return Au(e,t),e.reload()}))},t.nb=function(t){var e=this;return Lu(this,this.F().then(function(n){return e.b.nb(n,t)}).then(function(t){return Au(e,t),e.reload()}))},t.ob=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Eu(this);var e=this;return Lu(this,this.F().then(function(n){return e.b.ob(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Au(e,t),xu(e,"displayName",t.displayName||null),xu(e,"photoURL",t.photoUrl||null),P(e.providerData,function(t){"password"===t.providerId&&(Ir(t,"displayName",e.displayName),Ir(t,"photoURL",e.photoURL))}),bu(e)}).then(Su))},t.Lc=function(t){var e=this;return Lu(this,ku(this).then(function(n){return L(Tu(e),t)?function(t,e,n){return Rs(t,ls,{idToken:e,deleteProvider:n})}(e.b,n,[t]).then(function(t){var n={};return P(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),P(Tu(e),function(t){n[t]||Cu(e,t)}),n[Ii.PROVIDER_ID]||Ir(e,"phoneNumber",null),bu(e)}):bu(e).then(function(){throw new kr("no-such-provider")})}))},t.delete=function(){var t=this;return Lu(this,this.F().then(function(e){return Rs(t.b,cs,{idToken:e})}).then(function(){t.dispatchEvent(new lu("userDeleted"))})).then(function(){for(var e=0;e<t.D.length;e++)t.D[e].cancel("app-deleted");fu(t,null),du(t,null),t.D=[],t.m=!0,mu(t),Ir(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.qb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.Z||null)==e||"reauthViaRedirect"==t&&(this.Z||null)==e)},t.fa=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?g(this.vb,this):"reauthViaPopup"==t&&e==(this.g||null)?g(this.wb,this):"linkViaRedirect"==t&&(this.Z||null)==e?g(this.vb,this):"reauthViaRedirect"==t&&(this.Z||null)==e?g(this.wb,this):null},t.nc=function(t){var e=this;return Pu(this,"linkViaPopup",t,function(){return Nu(e,t.providerId).then(function(){return bu(e)})},!1)},t.wc=function(t){return Pu(this,"reauthViaPopup",t,function(){return Et()},!0)},t.oc=function(t){var e=this;return Mu(this,"linkViaRedirect",t,function(){return Nu(e,t.providerId)},!1)},t.xc=function(t){return Mu(this,"reauthViaRedirect",t,function(){return Et()},!0)},t.vb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Lu(this,this.F().then(function(r){return ns(n.b,{requestUri:t,sessionId:e,idToken:r})}).then(function(t){return r=Ru(n,t,"link"),Du(n,t)}).then(function(){return r}))},t.wb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Lu(this,Et().then(function(){return si(rs(n.b,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return r=Ru(n,t,"reauthenticate"),Au(n,t),n.i=null,n.reload()}).then(function(){return r}),!0)},t.fb=function(t){var e=this,n=null;return Lu(this,this.F().then(function(e){return n=e,"undefined"==typeof t||ot(t)?{}:qr(new Dr(t))}).then(function(t){return e.b.fb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.C()},t.C=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.s,authDomain:this.A,stsTokenManager:this.h.C(),redirectEventId:this.Z||null};return this.metadata&&lt(t,this.metadata.C()),P(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var Uu={name:"redirectUser",B:"session"};function Fu(t){return wa(t.b,Uu,t.a)}function Bu(t){this.a=t,this.b=ma(),this.c=null,this.f=function(t){var e=Wu("local"),n=Wu("session"),r=Wu("none");return function(t,e,n){var r=ba(e,n),o=ga(t,e.B);return t.get(e,n).then(function(s){var a=null;try{a=pr(i.localStorage.getItem(r))}catch(t){}if(a&&!s)return i.localStorage.removeItem(r),t.set(e,a,n);a&&s&&"localStorage"!=o.type&&i.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Hu,t.a).then(function(t){return t?Wu(t):e})})})}).then(function(e){return t.c=e,qu(t,e.B)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Wu("local"),this.a,g(this.g,this))}function qu(t,e){var n,r=[];for(n in ya)ya[n]!==e&&r.push(wa(t.b,Wu(ya[n]),t.a));return r.push(wa(t.b,Hu,t.a)),function(t){return new vt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)It(t[a],b(o,a),s);else e(i)})}(r)}Bu.prototype.g=function(){var t=this,e=Wu("local");Qu(this,function(){return Et().then(function(){return t.c&&"local"!=t.c.B?t.b.get(e,t.a):null}).then(function(n){if(n)return qu(t,"local").then(function(){t.c=e})})})};var Hu={name:"persistence",B:"session"};function Wu(t){return{name:"authUser",B:t}}function zu(t,e){return Qu(t,function(){return t.b.set(t.c,e.C(),t.a)})}function Gu(t){return Qu(t,function(){return wa(t.b,t.c,t.a)})}function Ku(t,e){return Qu(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Vu(t||{})})})}function Qu(t,e){return t.f=t.f.then(e,e),t.f}function Xu(t){if(this.l=!1,Ir(this,"app",t),!nc(this).options||!nc(this).options.apiKey)throw new kr("invalid-api-key");t=e.SDK_VERSION?rr(e.SDK_VERSION):null,this.b=new jo(nc(this).options&&nc(this).options.apiKey,Ls(Ms),t),this.N=[],this.m=[],this.I=[],this.Ob=e.INTERNAL.createSubscribe(g(this.hc,this)),this.O=void 0,this.Pb=e.INTERNAL.createSubscribe(g(this.ic,this)),tc(this,null),this.h=new Bu(nc(this).options.apiKey+":"+nc(this).name),this.G=new function(t){this.a=t,this.b=ma()}(nc(this).options.apiKey+":"+nc(this).name),this.U=sc(this,function(t){var e=nc(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Uu,t.a).then(function(t){return t&&e&&(t.authDomain=e),Vu(t||{})})}(t.G,nc(t).options.authDomain).then(function(e){return(t.A=e)&&(e.da=t.G),Fu(t.G)});return sc(t,e)}(t).then(function(){return Ku(t.h,e)}).then(function(e){return e?(e.da=t.G,t.A&&(t.A.Z||null)==(e.Z||null)?e:e.reload().then(function(){return zu(t.h,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Gu(t.h)})):null}).then(function(e){tc(t,e||null)});return sc(t,n)}(this)),this.i=sc(this,function(t){return t.U.then(function(){return t.ba()}).o(function(){}).then(function(){if(!t.l)return t.ha()}).o(function(){}).then(function(){if(!t.l){t.W=!0;var e=t.h;e.b.addListener(Wu("local"),e.a,t.ha)}})}(this)),this.W=!1,this.ha=g(this.Hc,this),this.Ga=g(this.ka,this),this.qa=g(this.Yb,this),this.ra=g(this.fc,this),this.sa=g(this.gc,this),function(t){var e=nc(t).options.authDomain,n=nc(t).options.apiKey;e&&ar()&&(t.Nb=t.U.then(function(){if(!t.l){if(t.a=Ja(e,n,nc(t).name),t.a.subscribe(t),rc(t)&&wu(rc(t)),t.A){wu(t.A);var r=t.A;r.na(t.aa()),fu(r,t),pu(r=t.A,t.D),du(r,t),t.A=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=g(this.delete,this),this.INTERNAL.logFramework=g(this.pc,this),this.s=0,Ae.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.aa()},set:function(t){this.na(t)},enumerable:!1}),t.V=null}(this),this.D=[]}function Yu(t){ae.call(this,"languageCodeChanged"),this.h=t}function Ju(t){ae.call(this,"frameworkChanged"),this.f=t}function Zu(t){return t.Nb||Tt(new kr("auth-domain-config-required"))}function $u(t,e){var n={};return n.apiKey=nc(t).options.apiKey,n.authDomain=nc(t).options.authDomain,n.appName=nc(t).name,t.U.then(function(){return function(t,e,n,r){var i=new hu(t,e);return n&&(i.da=n),r&&pu(i,r),i.reload().then(function(){return i})}(n,e,t.G,t.Ka())}).then(function(e){return rc(t)&&e.uid==rc(t).uid?(Ou(rc(t),e),t.ka(e)):(tc(t,e),wu(e),t.ka(e))}).then(function(){oc(t)})}function tc(t,e){rc(t)&&(function(t,e){U(t.N,function(t){return t==e})}(rc(t),t.Ga),_e(rc(t),"tokenChanged",t.qa),_e(rc(t),"userDeleted",t.ra),_e(rc(t),"userInvalidated",t.sa),mu(rc(t))),e&&(e.N.push(t.Ga),ge(e,"tokenChanged",t.qa),ge(e,"userDeleted",t.ra),ge(e,"userInvalidated",t.sa),0<t.s&&vu(e)),Ir(t,"currentUser",e),e&&(e.na(t.aa()),fu(e,t),pu(e,t.D),du(e,t))}function ec(t,e){var n=null,r=null;return sc(t,e.then(function(e){return n=xi(e),r=Jr(e),$u(t,e)}).then(function(){return xr({user:rc(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function nc(t){return t.app}function rc(t){return t.currentUser}function ic(t){return rc(t)&&rc(t)._lat||null}function oc(t){if(t.W){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](ic(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](ic(t))}}function sc(t,e){return t.N.push(e),e.ga(function(){V(t.N,e)}),e}function ac(t,e,n,r,o,s){if(Ir(this,"type","recaptcha"),this.b=this.c=null,this.m=!1,this.l=e,this.a=n||{theme:"light",type:"image"},this.g=[],this.a[lc])throw new kr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[hc],!i.document)throw new kr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Rn(e)||!this.h&&Rn(e).hasChildNodes())throw new kr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new jo(t,s||null,o||null),this.s=r||function(){return null};var a=this;this.i=[];var u=this.a[uc];this.a[uc]=function(t){if(fc(a,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=or(u,i);"function"==typeof e&&e(t)}};var c=this.a[cc];this.a[cc]=function(){if(fc(a,null),"function"==typeof c)c();else if("string"==typeof c){var t=or(c,i);"function"==typeof t&&t()}}}Bu.prototype.ib=function(t){var e=null,n=this;return function(t){var e=new kr("invalid-persistence-type"),n=new kr("unsupported-persistence-type");t:{for(r in ya)if(ya[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Jn()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!sr()&&"none"!==t)throw n}}(t),Qu(this,function(){return t!=n.c.B?n.b.get(n.c,n.a).then(function(r){return e=r,qu(n,t)}).then(function(){if(n.c=Wu(t),e)return n.b.set(n.c,e,n.a)}):Et()})},_(Xu,Ae),_(Yu,ae),_(Ju,ae),(t=Xu.prototype).ib=function(t){return sc(this,t=this.h.ib(t))},t.na=function(t){this.V===t||this.l||(this.V=t,Ho(this.b,this.V),this.dispatchEvent(new Yu(this.aa())))},t.aa=function(){return this.V},t.Nc=function(){var t=i.navigator;this.na(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.pc=function(t){this.D.push(t),Wo(this.b,e.SDK_VERSION?rr(e.SDK_VERSION,this.D):null),this.dispatchEvent(new Ju(this.D))},t.Ka=function(){return B(this.D)},t.toJSON=function(){return{apiKey:nc(this).options.apiKey,authDomain:nc(this).options.authDomain,appName:nc(this).name,currentUser:rc(this)&&rc(this).C()}},t.qb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.fa=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?g(this.Xb,this):null},t.Xb=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var r=null,i=null,o=es(n.b,t).then(function(t){return r=xi(t),i=Jr(t),t});return sc(this,t=n.U.then(function(){return o}).then(function(t){return $u(n,t)}).then(function(){return xr({user:rc(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}))},t.Fc=function(t){if(!ar())return Tt(new kr("operation-not-supported-in-this-environment"));var n=this,r=Yr(t.providerId),i=dr(),o=null;(!lr()||Xn())&&nc(this).options.authDomain&&t.isOAuthProvider&&(o=Ys(nc(this).options.authDomain,nc(this).options.apiKey,nc(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null));var s=zn(o,r&&r.Aa,r&&r.za);return sc(this,r=Zu(this).then(function(e){return Qa(e,s,"signInViaPopup",t,i,!!o)}).then(function(){return new vt(function(t,e){n.fa("signInViaPopup",null,new kr("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=n.a.Da(n,"signInViaPopup",s,i)})}).then(function(t){return s&&Wn(s),t?xr(t):null}).o(function(t){throw s&&Wn(s),t}))},t.Gc=function(t){if(!ar())return Tt(new kr("operation-not-supported-in-this-environment"));var e=this;return sc(this,Zu(this).then(function(){return Qu(t=e.h,function(){return t.b.set(Hu,t.c.B,t.a)});var t}).then(function(){return e.a.Ba("signInViaRedirect",t)}))},t.ba=function(){if(!ar())return Tt(new kr("operation-not-supported-in-this-environment"));var t=this;return sc(this,Zu(this).then(function(){return t.a.ba()}).then(function(t){return t?xr(t):null}))},t.kb=function(){var t=this;return sc(this,this.i.then(function(){return rc(t)?(tc(t,null),Gu(t.h).then(function(){oc(t)})):Et()}))},t.Hc=function(){var t=this;return Ku(this.h,nc(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=rc(t)&&e){n=rc(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Ou(rc(t),e),rc(t).F();(rc(t)||e)&&(tc(t,e),e&&(wu(e),e.da=t.G),t.a&&t.a.subscribe(t),oc(t))}})},t.ka=function(t){return zu(this.h,t)},t.Yb=function(){oc(this),this.ka(rc(this))},t.fc=function(){this.kb()},t.gc=function(){this.kb()},t.hc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(rc(e))})},t.ic=function(t){var e=this;!function(t,e){t.I.push(e),sc(t,t.i.then(function(){!t.l&&L(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(ic(t)))}))}(this,function(){t.next(rc(e))})},t.rc=function(t,n,r){var i=this;return this.W&&e.Promise.resolve().then(function(){f(t)?t(rc(i)):f(t.next)&&t.next(rc(i))}),this.Ob(t,n,r)},t.qc=function(t,n,r){var i=this;return this.W&&e.Promise.resolve().then(function(){i.O=i.getUid(),f(t)?t(rc(i)):f(t.next)&&t.next(rc(i))}),this.Pb(t,n,r)},t.$b=function(t){var e=this;return sc(this,this.i.then(function(){return rc(e)?rc(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Bc=function(t){return this.Hb(t).then(function(t){return t.user})},t.Hb=function(t){var e=this;return this.i.then(function(){return ec(e,Rs(e.b,xs,{token:t}))}).then(function(t){var n=t.user;return xu(n,"isAnonymous",!1),e.ka(n),t})},t.Ib=function(t,e){var n=this;return this.i.then(function(){return ec(n,Rs(n.b,Os,{email:t,password:e}))})},t.Cc=function(t,e){return this.Ib(t,e).then(function(t){return t.user})},t.Sb=function(t,e){return this.sb(t,e).then(function(t){return t.user})},t.sb=function(t,e){var n=this;return this.i.then(function(){return ec(n,Rs(n.b,as,{email:t,password:e}))})},t.Ac=function(t){return this.Oa(t).then(function(t){return t.user})},t.Oa=function(t){var e=this;return this.i.then(function(){return ec(e,t.xa(e.b))})},t.jb=function(){return this.Jb().then(function(t){return t.user})},t.Jb=function(){var t=this;return this.i.then(function(){var e=rc(t);return e&&e.isAnonymous?xr({user:e,credential:null,additionalUserInfo:xr({providerId:null,isNewUser:!1}),operationType:"signIn"}):ec(t,t.b.jb()).then(function(e){var n=e.user;return xu(n,"isAnonymous",!0),t.ka(n),e})})},t.getUid=function(){return rc(this)&&rc(this).uid||null},t.Qb=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&rc(this)&&vu(rc(this))},t.yc=function(t){var e=this;P(this.m,function(n){n==t&&e.s--}),0>this.s&&(this.s=0),0==this.s&&rc(this)&&mu(rc(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),sc(this,this.i.then(function(){e.l||L(e.m,t)&&t(ic(e))}))},t.removeAuthTokenListener=function(t){U(this.m,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(Wu("local"),t.a,this.ha),this.a&&this.a.unsubscribe(this),e.Promise.resolve()},t.Vb=function(t){return sc(this,function(t,e){return Rs(t,us,{identifier:e,continueUri:ur()?Bn():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.b,t))},t.Wb=function(t){return sc(this,function(t,e){return Rs(t,us,{identifier:e,continueUri:ur()?Bn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.jc=function(t){return!!Si(t)},t.hb=function(t,e){var n=this;return sc(this,Et().then(function(){var t=new Dr(e);if(!t.c)throw new kr("argument-error",Mr+" must be true when sending sign in link to email");return qr(t)}).then(function(e){return n.b.hb(t,e)}).then(function(){}))},t.Oc=function(t){return this.Ia(t).then(function(t){return t.data.email})},t.Wa=function(t,e){return sc(this,this.b.Wa(t,e).then(function(){}))},t.Ia=function(t){return sc(this,this.b.Ia(t).then(function(t){return new function(t){var e={},n=t.email,r=t.newEmail;if(!(t=t.requestType)||"EMAIL_SIGNIN"!=t&&!n)throw Error("Invalid provider user info!");e.fromEmail=r||null,e.email=n||null,Ir(this,"operation",t),Ir(this,"data",Or(e))}(t)}))},t.Ua=function(t){return sc(this,this.b.Ua(t).then(function(){}))},t.gb=function(t,e){var n=this;return sc(this,Et().then(function(){return"undefined"==typeof e||ot(e)?{}:qr(new Dr(e))}).then(function(e){return n.b.gb(t,e)}).then(function(){}))},t.Ec=function(t,e){return sc(this,iu(this,t,e,g(this.Oa,this)))},t.Dc=function(t,e){var n=this;return sc(this,Et().then(function(){var r=_i(t,e||Bn());return n.Oa(r)}))};var uc="callback",cc="expired-callback",lc="sitekey",hc="size";function fc(t,e){for(var n=0;n<t.i.length;n++)try{t.i[n](e)}catch(t){}}function pc(t,e){return t.g.push(e),e.ga(function(){V(t.g,e)}),e}function dc(t){if(t.m)throw new kr("internal-error","RecaptchaVerifier instance has been destroyed.")}(t=ac.prototype).ya=function(){var t=this;return this.c?this.c:this.c=pc(this,Et().then(function(){if(ur()&&!Yn())return Kn();throw new kr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return function(t,e){return new vt(function(n,r){mr()?!i.grecaptcha||e!==t.c&&!t.b?(i[t.a]=function(){if(i.grecaptcha){t.c=e;var o=i.grecaptcha.render;i.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},n()}else r(new kr("internal-error"));delete i[t.a]},Et(ko(bn(yc,{onload:t.a,hl:e||""}))).o(function(){r(new kr("internal-error","Unable to load external reCAPTCHA dependencies!"))})):n():r(new kr("network-request-failed"))})}(mc(),t.s())}).then(function(){return Rs(t.u,gs,{})}).then(function(e){t.a[lc]=e.recaptchaSiteKey}).o(function(e){throw t.c=null,e}))},t.render=function(){dc(this);var t=this;return pc(this,this.ya().then(function(){if(null===t.b){var e=t.l;if(!t.h){var n=Rn(e);e=function(t,e,n){var r=arguments,i=document,s=String(r[0]),a=r[1];if(!fn&&a&&(a.name||a.type)){if(s=["<",s],a.name&&s.push(' name="',W(a.name),'"'),a.type){s.push(' type="',W(a.type),'"');var u={};lt(u,a),delete u.type,a=u}s.push(">"),s=s.join("")}return s=i.createElement(s),a&&(o(a)?s.className=a:l(a)?s.className=a.join(" "):Dn(s,a)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(o(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var s=n[i];!h(s)||p(s)&&0<s.nodeType?r(s):P(Mn(s)?B(s):s,r)}}(i,s,r),s}("DIV"),n.appendChild(e)}t.b=grecaptcha.render(e,t.a)}return t.b}))},t.verify=function(){dc(this);var t=this;return pc(this,this.render().then(function(e){return new vt(function(n){var r=grecaptcha.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){U(t.i,function(t){return t==e})}(t,i),n(e))};t.i.push(i),t.h&&grecaptcha.execute(t.b)}})}))},t.reset=function(){dc(this),null!==this.b&&grecaptcha.reset(this.b)},t.clear=function(){dc(this),this.m=!0,mc().b--;for(var t=0;t<this.g.length;t++)this.g[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=Rn(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}};var yc=vn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),vc=null;function mc(){return vc||(vc=new function(){this.b=i.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}),vc}function gc(t,n,r){try{this.f=r||e.app()}catch(t){throw new kr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new kr("invalid-api-key");r=this.f.options.apiKey;var i=this,o=null;try{o=this.f.auth().Ka()}catch(t){}o=e.SDK_VERSION?rr(e.SDK_VERSION,o):null,ac.call(this,r,t,n,function(){try{var t=i.f.auth().aa()}catch(e){t=null}return t},o,Ls(Ms))}function bc(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new kr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=wc.length)throw new kr("internal-error","Argument validator received an unsupported number of arguments.");n=wc[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new kr("argument-error",t+" failed: "+r)}_(gc,ac);var wc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function _c(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:o}}function Sc(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:s}}function Ec(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Tc(t,e){return{name:t||"",K:"a function",optional:!!e,M:f}}function Ic(t,e){return{name:t||"",K:"null",optional:!!e,M:c}}function Cc(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.xa||t&&e.providerId!==t)}}}function xc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&o(t.type)&&f(t.verify))}}}function Oc(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function kc(t,e){for(var n in e){var r=e[n].name;t[r]=Nc(r,t[n],e[n].j)}}function Ac(t,e,n,r){t[e]=Nc(e,n,r)}function Nc(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return bc(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}kc(Xu.prototype,{Ua:{name:"applyActionCode",j:[_c("code")]},Ia:{name:"checkActionCode",j:[_c("code")]},Wa:{name:"confirmPasswordReset",j:[_c("code"),_c("newPassword")]},Sb:{name:"createUserWithEmailAndPassword",j:[_c("email"),_c("password")]},sb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[_c("email"),_c("password")]},Vb:{name:"fetchProvidersForEmail",j:[_c("email")]},Wb:{name:"fetchSignInMethodsForEmail",j:[_c("email")]},ba:{name:"getRedirectResult",j:[]},jc:{name:"isSignInWithEmailLink",j:[_c("emailLink")]},qc:{name:"onAuthStateChanged",j:[Oc(Ec(),Tc(),"nextOrObserver"),Tc("opt_error",!0),Tc("opt_completed",!0)]},rc:{name:"onIdTokenChanged",j:[Oc(Ec(),Tc(),"nextOrObserver"),Tc("opt_error",!0),Tc("opt_completed",!0)]},gb:{name:"sendPasswordResetEmail",j:[_c("email"),Oc(Ec("opt_actionCodeSettings",!0),Ic(null,!0),"opt_actionCodeSettings",!0)]},hb:{name:"sendSignInLinkToEmail",j:[_c("email"),Ec("actionCodeSettings")]},ib:{name:"setPersistence",j:[_c("persistence")]},Oa:{name:"signInAndRetrieveDataWithCredential",j:[Cc()]},jb:{name:"signInAnonymously",j:[]},Jb:{name:"signInAnonymouslyAndRetrieveData",j:[]},Ac:{name:"signInWithCredential",j:[Cc()]},Bc:{name:"signInWithCustomToken",j:[_c("token")]},Hb:{name:"signInAndRetrieveDataWithCustomToken",j:[_c("token")]},Cc:{name:"signInWithEmailAndPassword",j:[_c("email"),_c("password")]},Dc:{name:"signInWithEmailLink",j:[_c("email"),_c("emailLink",!0)]},Ib:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[_c("email"),_c("password")]},Ec:{name:"signInWithPhoneNumber",j:[_c("phoneNumber"),xc()]},Fc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Gc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},kb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[_c(null,!0)]},Nc:{name:"useDeviceLanguage",j:[]},Oc:{name:"verifyPasswordResetCode",j:[_c("code")]}}),function(t,e){for(var n in e){var r=e[n].name;if(r!==n){var i=e[n].Rb;Object.defineProperty(t,r,{get:function(){return this[n]},set:function(t){bc(r,[i],[t],!0),this[n]=t},enumerable:!0})}}}(Xu.prototype,{lc:{name:"languageCode",Rb:Oc(_c(),Ic(),"languageCode")}}),(Xu.Persistence=ya).LOCAL="local",Xu.Persistence.SESSION="session",Xu.Persistence.NONE="none",kc(hu.prototype,{delete:{name:"delete",j:[]},F:{name:"getIdToken",j:[Sc()]},getToken:{name:"getToken",j:[Sc()]},$a:{name:"linkAndRetrieveDataWithCredential",j:[Cc()]},kc:{name:"linkWithCredential",j:[Cc()]},mc:{name:"linkWithPhoneNumber",j:[_c("phoneNumber"),xc()]},nc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},oc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Cc()]},uc:{name:"reauthenticateWithCredential",j:[Cc()]},vc:{name:"reauthenticateWithPhoneNumber",j:[_c("phoneNumber"),xc()]},wc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},xc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},fb:{name:"sendEmailVerification",j:[Oc(Ec("opt_actionCodeSettings",!0),Ic(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[_c(null,!0)]},Lc:{name:"unlink",j:[_c("provider")]},mb:{name:"updateEmail",j:[_c("email")]},nb:{name:"updatePassword",j:[_c("password")]},Mc:{name:"updatePhoneNumber",j:[Cc("phone")]},ob:{name:"updateProfile",j:[Ec("profile")]}}),kc(vt.prototype,{ga:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),kc(ru.prototype,{confirm:{name:"confirm",j:[_c("verificationCode")]}}),Ac(wi,"credential",function(t,e){return new bi(t,e)},[_c("email"),_c("password")]),kc(hi.prototype,{ta:{name:"addScope",j:[_c("scope")]},Ca:{name:"setCustomParameters",j:[Ec("customOAuthParameters")]}}),Ac(hi,"credential",fi,[Oc(_c(),Ec(),"token")]),Ac(wi,"credentialWithLink",_i,[_c("email"),_c("emailLink")]),kc(pi.prototype,{ta:{name:"addScope",j:[_c("scope")]},Ca:{name:"setCustomParameters",j:[Ec("customOAuthParameters")]}}),Ac(pi,"credential",di,[Oc(_c(),Ec(),"token")]),kc(yi.prototype,{ta:{name:"addScope",j:[_c("scope")]},Ca:{name:"setCustomParameters",j:[Ec("customOAuthParameters")]}}),Ac(yi,"credential",vi,[Oc(_c(),Oc(Ec(),Ic()),"idToken"),Oc(_c(),Ic(),"accessToken",!0)]),kc(mi.prototype,{Ca:{name:"setCustomParameters",j:[Ec("customOAuthParameters")]}}),Ac(mi,"credential",gi,[Oc(_c(),Ec(),"token"),_c("secret",!0)]),kc(li.prototype,{ta:{name:"addScope",j:[_c("scope")]},credential:{name:"credential",j:[Oc(_c(),Ic(),"idToken",!0),Oc(_c(),Ic(),"accessToken",!0)]},Ca:{name:"setCustomParameters",j:[Ec("customOAuthParameters")]}}),Ac(Ii,"credential",Ci,[_c("verificationId"),_c("verificationCode")]),kc(Ii.prototype,{Sa:{name:"verifyPhoneNumber",j:[_c("phoneNumber"),xc()]}}),kc(kr.prototype,{toJSON:{name:"toJSON",j:[_c(null,!0)]}}),kc(Pi.prototype,{toJSON:{name:"toJSON",j:[_c(null,!0)]}}),kc(Di.prototype,{toJSON:{name:"toJSON",j:[_c(null,!0)]}}),kc(gc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if("undefined"==typeof e||!e.INTERNAL||!e.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Xu,Error:kr};Ac(t,"EmailAuthProvider",wi,[]),Ac(t,"FacebookAuthProvider",hi,[]),Ac(t,"GithubAuthProvider",pi,[]),Ac(t,"GoogleAuthProvider",yi,[]),Ac(t,"TwitterAuthProvider",mi,[]),Ac(t,"OAuthProvider",li,[_c("providerId")]),Ac(t,"PhoneAuthProvider",Ii,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Xu)}}]),Ac(t,"RecaptchaVerifier",gc,[Oc(_c(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ec("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e.app.App)}}]),e.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:g((t=new Xu(t)).getUid,t),getToken:g(t.$b,t),addAuthTokenListener:g(t.Qb,t),removeAuthTokenListener:g(t.yc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),e.INTERNAL.extendNamespace({User:hu})}()}).call("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(e,n("DuR2"))},VwZZ:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("BX3T"),i=n("dgOU"),o=n("/iUD"),s=n("GK6M"),a=n("fKB6"),u=n("oCQ5"),c=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,c=this._parents,h=this._unsubscribe,f=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,d=c?c.length:0;n;)n.remove(this),n=++p<d&&c[p]||null;if(Object(o.a)(h)&&Object(s.a)(h).call(this)===a.a&&(e=!0,t=t||(a.a.e instanceof u.a?l(a.a.e.errors):[a.a.e])),Object(r.a)(f))for(p=-1,d=f.length;++p<d;){var y=f[p];if(Object(i.a)(y)&&Object(s.a)(y.unsubscribe).call(y)===a.a){e=!0,t=t||[];var v=a.a.e;v instanceof u.a?t=t.concat(l(v.errors)):t.push(v)}}if(e)throw new u.a(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function l(t){return t.reduce(function(t,e){return t.concat(e instanceof u.a?e.errors:e)},[])}},WT6e:function(t,e,n){"use strict";(function(t){n.d(e,"g",function(){return $t}),n.d(e,"O",function(){return Gt}),n.d(e,"Q",function(){return Kt}),n.d(e,"N",function(){return Xt}),n.d(e,"v",function(){return Qt}),n.d(e,"c",function(){return ot}),n.d(e,"z",function(){return ut}),n.d(e,"y",function(){return ct}),n.d(e,"b",function(){return lt}),n.d(e,"d",function(){return rt}),n.d(e,"e",function(){return it}),n.d(e,"P",function(){return ge}),n.d(e,"I",function(){return Vt}),n.d(e,"S",function(){return Ft}),n.d(e,"r",function(){return Be}),n.d(e,"f",function(){return ze}),n.d(e,"l",function(){return At}),n.d(e,"k",function(){return tt}),n.d(e,"C",function(){return Ke}),n.d(e,"D",function(){return Ge}),n.d(e,"a",function(){return f}),n.d(e,"L",function(){return p}),n.d(e,"J",function(){return d}),n.d(e,"o",function(){return P}),n.d(e,"n",function(){return c}),n.d(e,"m",function(){return v}),n.d(e,"x",function(){return m}),n.d(e,"E",function(){return b}),n.d(e,"w",function(){return Nt}),n.d(e,"A",function(){return ee}),n.d(e,"B",function(){return ne}),n.d(e,"i",function(){return pt}),n.d(e,"j",function(){return _t}),n.d(e,"s",function(){return It}),n.d(e,"u",function(){return Tt}),n.d(e,"t",function(){return ie}),n.d(e,"F",function(){return ue}),n.d(e,"G",function(){return se}),n.d(e,"H",function(){return le}),n.d(e,"K",function(){return he}),n.d(e,"h",function(){return fe}),n.d(e,"p",function(){return Me}),n.d(e,"q",function(){return je}),n.d(e,"M",function(){return _e}),n.d(e,"R",function(){return Fe}),n.d(e,"_3",function(){return Ee}),n.d(e,"U",function(){return ht}),n.d(e,"T",function(){return St}),n.d(e,"_1",function(){return S}),n.d(e,"_13",function(){return O}),n.d(e,"_4",function(){return nt}),n.d(e,"_5",function(){return et}),n.d(e,"V",function(){return Vn}),n.d(e,"W",function(){return rr}),n.d(e,"X",function(){return no}),n.d(e,"Y",function(){return fn}),n.d(e,"Z",function(){return Cr}),n.d(e,"_0",function(){return Un}),n.d(e,"_6",function(){return Qn}),n.d(e,"_7",function(){return Kn}),n.d(e,"_9",function(){return dr}),n.d(e,"_11",function(){return xr}),n.d(e,"_14",function(){return Kr}),n.d(e,"_15",function(){return cn}),n.d(e,"_16",function(){return Yr}),n.d(e,"_8",function(){return qe}),n.d(e,"_10",function(){return He}),n.d(e,"_12",function(){return We}),n.d(e,"_2",function(){return st});var r=n("TToO"),i=n("YaPU"),o=n("/nXB"),s=n("Rf9G"),a=n("g5jc"),u=n("VwZZ"),c=function(){function t(t){this._desc=t,this.ngMetadataName="InjectionToken"}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),l="__paramaters__";function h(t,e,n){var r=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var r=t.apply(void 0,e);for(var i in r)this[i]=r[i]}}}(e);function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof i)return r.apply(this,t),this;var n,o=new((n=i).bind.apply(n,[void 0].concat(t)));return s.annotation=o,s;function s(t,e,n){for(var r=t.hasOwnProperty(l)?t[l]:Object.defineProperty(t,l,{value:[]})[l];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}var f=new c("AnalyzeForEntryComponents"),p=function(){var t={Emulated:0,Native:1,None:2};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t}(),d=function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},y=new d("5.2.9"),v=h("Inject",function(t){return{token:t}}),m=h("Optional"),g=h("Self"),b=h("SkipSelf"),w="undefined"!=typeof window&&window,_="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,S=w||"undefined"!=typeof t&&t||_,E=Promise.resolve(0),T=null;function I(){if(!T){var t=S.Symbol;if(t&&t.iterator)T=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(T=r)}}return T}function C(t){"undefined"==typeof Zone?E.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function x(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function O(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(O).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function k(t){return t.__forward_ref__=k,t.toString=function(){return O(this())},t}function A(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===k?t():t}var N="__source",R=new Object,D=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=R),e===R)throw new Error("NullInjectorError: No provider for "+O(t)+"!");return e},t}(),P=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new W(t,e):new W(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=R,t.NULL=new D,t}(),M=function(t){return t},j=[],L=M,V=function(){return Array.prototype.slice.call(arguments)},U={},F=function(t){for(var e in t)if(t[e]===U)return e;throw Error("!prop")}({provide:String,useValue:U}),B=P.NULL,q=/\n/gm,H="\u0275",W=function(){function t(t,e,n){void 0===e&&(e=B),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(P,{token:P,fn:M,deps:j,value:this,useNew:!1}),function t(e,n){if(n)if((n=A(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw K("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw K("Unexpected provider",n);var i=A(n.provide),o=function(t){var e=function(t){var e=j,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((u=A(n[r]))instanceof Array)for(var o=0,s=u;o<s.length;o++){var a=s[o];a instanceof m||a==m?i|=1:a instanceof b||a==b?i&=-3:a instanceof g||a==g?i&=-5:u=a instanceof v?a.token:A(a)}e.push({token:u,options:i})}}else if(t.useExisting){var u;e=[{token:u=A(t.useExisting),options:6}]}else if(!(n||F in t))throw K("'deps' required",t);return e}(t),n=M,r=j,i=!1,o=A(t.provide);if(F in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=A(t.useClass);else{if("function"!=typeof o)throw K("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var s=e.get(i);if(s){if(s.fn!==V)throw z(i)}else e.set(i,s={token:n.provide,deps:[],useNew:!1,fn:V,value:j});s.deps.push({token:i=n,options:6})}var a=e.get(i);if(a&&a.fn==V)throw z(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e){var n=this._records.get(t);try{return function t(e,n,r,i,o){try{return function(e,n,r,i,o){var s,a;if(n){if((s=n.value)==L)throw Error(H+"Circular dependency");if(s===j){n.value=L;var u=n.useNew,c=n.fn,l=n.deps,h=j;if(l.length){h=[];for(var f=0;f<l.length;f++){var p=l[f],d=p.options,y=2&d?r.get(p.token):void 0;h.push(t(p.token,y,r,y||4&d?i:B,1&d?null:P.THROW_IF_NOT_FOUND))}}n.value=s=u?new((a=c).bind.apply(a,[void 0].concat(h))):c.apply(void 0,h)}}else s=i.get(e,o);return s}(e,n,r,i,o)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==L&&(n.value=j),t}}(t,n,this._records,this.parent,e)}catch(e){var r=e.ngTempTokenPath;throw t[N]&&r.unshift(t[N]),e.message=G("\n"+e.message,r,this.source),e.ngTokenPath=r,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(O(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function z(t){return K("Cannot mix multi providers and regular providers",t)}function G(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==H?t.substr(2):t;var r=O(e);if(e instanceof Array)r=e.map(O).join(" -> ");else if("object"==typeof e){var i=[];for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];i.push(o+":"+("string"==typeof s?JSON.stringify(s):O(s)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace(q,"\n  ")}function K(t,e){return new Error(G(t,e))}var Q="ngDebugContext",X="ngOriginalError",Y="ngErrorLogger";function J(t){return t[Q]}function Z(t){return t[X]}function $(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,e)}var tt=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[Y]||$}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?J(t)?J(t):this._findContext(Z(t)):null},t.prototype._findOriginalError=function(t){for(var e=Z(t);e&&Z(e);)e=Z(e);return e},t}();function et(t){return!!t&&"function"==typeof t.then}function nt(t){return!!t&&"function"==typeof t.subscribe}Function;var rt=new c("Application Initializer"),it=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();et(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),ot=new c("AppId");function st(){return""+at()+at()+at()}function at(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var ut=new c("Platform Initializer"),ct=new c("Platform ID"),lt=new c("appBootstrapListener"),ht=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t.ctorParameters=function(){return[]},t}();function ft(){throw new Error("Runtime compiler is not loaded")}var pt=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw ft()},t.prototype.compileModuleAsync=function(t){throw ft()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw ft()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw ft()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t}(),dt=function(){},yt=function(){};function vt(t){var e=Error("No component factory found for "+O(t)+". Did you add it to @NgModule.entryComponents?");return e[bt]=t,e}var mt,gt,bt="ngComponent",wt=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw vt(t)},t}(),_t=function(){function t(){}return t.NULL=new wt,t}(),St=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw vt(t);return new Et(e,this._ngModule)},t}(),Et=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return Object(r.__extends)(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(yt),Tt=function(){},It=function(){},Ct=function(){var t=S.wtf;return!(!t||!(mt=t.trace)||(gt=mt.events,0))}();function xt(t,e){return null}var Ot=Ct?function(t,e){return void 0===e&&(e=null),gt.createScope(t,e)}:function(t,e){return xt},kt=Ct?function(t,e){return mt.leaveScope(t,e),e}:function(t,e){return e},At=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return Object(r.__extends)(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},s=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(s=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(s=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var a=t.prototype.subscribe.call(this,i,o,s);return e instanceof u.a&&e.add(a),a},e}(a.b),Nt=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new At(!1),this.onMicrotaskEmpty=new At(!1),this.onStable=new At(!1),this.onError=new At(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,s){try{return Mt(e),t.invokeTask(r,i,o,s)}finally{jt(e)}},onInvoke:function(t,n,r,i,o,s,a){try{return Mt(e),t.invoke(r,i,o,s,a)}finally{jt(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,Pt(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Dt,Rt,Rt);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Rt(){}var Dt={};function Pt(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function Mt(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function jt(t){t._nesting--,Pt(t)}var Lt=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new At,this.onMicrotaskEmpty=new At,this.onStable=new At,this.onError=new At}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),Vt=function(){function t(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Nt.assertNotInAngularZone(),C(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;this.isStable()?C(function(){for(;0!==t._callbacks.length;)t._callbacks.pop()(t._didWork);t._didWork=!1}):this._didWork=!0},t.prototype.whenStable=function(t){this._callbacks.push(t),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),Ut=function(){function t(){this._applications=new Map,qt.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),qt.findTestabilityInTree(this,t,e)},t.ctorParameters=function(){return[]},t}();function Ft(t){qt=t}var Bt,qt=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),Ht=!0,Wt=!1,zt=new c("AllowMultipleToken");function Gt(){if(Wt)throw new Error("Cannot enable prod mode after platform setup.");Ht=!1}function Kt(){return Wt=!0,Ht}var Qt=function(t,e){this.name=t,this.token=e};function Xt(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,i=new c(r);return function(e){void 0===e&&(e=[]);var o=Yt();if(!o||o.injector.get(zt,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var s=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(Bt&&!Bt.destroyed&&!Bt.injector.get(zt,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Bt=t.get(Jt);var e=t.get(ut,null);e&&e.forEach(function(t){return t()})}(P.create({providers:s,name:r}))}return function(t){var e=Yt();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Yt(){return Bt&&!Bt.destroyed?Bt:null}var Jt=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new Lt:("zone.js"===n?void 0:n)||new Nt({enableLongStackTrace:Kt()}),o=[{provide:Nt,useValue:i}];return i.run(function(){var e=P.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),s=n.injector.get(tt,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return te(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){s.handleError(t)}})}),function(t,e,i){try{var o=((s=n.injector.get(it)).runInitializers(),s.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return et(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var s}(s,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=this.injector.get(dt),i=Zt({},e);return r.createCompiler([i]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,i)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get($t);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+O(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function Zt(t,e){return Array.isArray(e)?e.reduce(Zt,t):Object(r.__assign)({},t,e)}var $t=function(){function t(t,e,n,r,a,u){var c=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Kt(),this._zone.onMicrotaskEmpty.subscribe({next:function(){c._zone.run(function(){c.tick()})}});var l=new i.a(function(t){c._stable=c._zone.isStable&&!c._zone.hasPendingMacrotasks&&!c._zone.hasPendingMicrotasks,c._zone.runOutsideAngular(function(){t.next(c._stable),t.complete()})}),h=new i.a(function(t){var e;c._zone.runOutsideAngular(function(){e=c._zone.onStable.subscribe(function(){Nt.assertNotInAngularZone(),C(function(){c._stable||c._zone.hasPendingMacrotasks||c._zone.hasPendingMicrotasks||(c._stable=!0,t.next(!0))})})});var n=c._zone.onUnstable.subscribe(function(){Nt.assertInAngularZone(),c._stable&&(c._stable=!1,c._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(o.a)(l,s.a.call(h))}return t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof yt?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof Et?null:this._injector.get(Tt),o=n.create(P.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var s=o.injector.get(Vt,null);return s&&o.injector.get(Ut).registerApplication(o.location.nativeElement,s),this._loadComponent(o),Kt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(t){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(t)})}finally{this._runningTick=!1,kt(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;te(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(lt,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),te(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Ot("ApplicationRef#tick()"),t}();function te(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var ee=function(){},ne=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),re=function(t){this.nativeElement=t},ie=function(){},oe=function(){function t(){this.dirty=!0,this._results=[],this.changes=new At,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[I()]=function(){return this._results[I()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),se=function(){},ae={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},ue=function(){function t(t,e){this._compiler=t,this._config=e||ae}return t.prototype.load=function(t){return this._compiler instanceof pt?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,r=t.split("#"),i=r[0],o=r[1];return void 0===o&&(o="default"),n("Jnfr")(i).then(function(t){return t[o]}).then(function(t){return ce(t,i,o)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=t.split("#"),r=e[0],i=e[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("Jnfr")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(t){return t[i+o]}).then(function(t){return ce(t,r,i)})},t}();function ce(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}var le=function(){},he=function(){},fe=function(){},pe=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof de?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),de=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return Object(r.__extends)(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,r=this,i=this.childNodes.indexOf(t);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=r}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return ye(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return ve(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(pe);function ye(t,e,n){t.childNodes.forEach(function(t){t instanceof de&&(e(t)&&n.push(t),ye(t,e,n))})}function ve(t,e,n){t instanceof de&&t.childNodes.forEach(function(t){e(t)&&n.push(t),t instanceof de&&ve(t,e,n)})}var me=new Map;function ge(t){return me.get(t)||null}function be(t){me.set(t.nativeNode,t)}function we(t,e){var n=Ee(t),r=Ee(e);return n&&r?function(t,e,n){for(var r=t[I()](),i=e[I()]();;){var o=r.next(),s=i.next();if(o.done&&s.done)return!0;if(o.done||s.done)return!1;if(!n(o.value,s.value))return!1}}(t,e,we):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||x(t,e)}var _e=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Se=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Ee(t){return!!Te(t)&&(Array.isArray(t)||!(t instanceof Map)&&I()in t)}function Te(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var Ie=function(){function t(){}return t.prototype.supports=function(t){return Ee(t)},t.prototype.create=function(t){return new xe(t)},t}(),Ce=function(t,e){return e},xe=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ce}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Ne(n,r,i)?e:n,s=Ne(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=s-r,c=a-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}s!==a&&t(o,s,a)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Ee(t))throw new Error("Error trying to diff '"+O(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(var a=0;a<this.length;a++)i=this._trackByFn(a,r=t[a]),null!==o&&x(o.trackById,i)?(s&&(o=this._verifyReinsertion(o,r,i,a)),x(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,a),s=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[I()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&x(o.trackById,i)?(s&&(o=e._verifyReinsertion(o,t,i,n)),x(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),s=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(x(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(x(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Oe(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ae),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ae),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Oe=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},ke=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&x(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),Ae=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new ke,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function Ne(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Re=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||Te(t)},t.prototype.create=function(){return new De},t}(),De=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||Te(t)))throw new Error("Error trying to diff '"+O(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Pe(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){x(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),Pe=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Me=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();return new t(e=e.concat(r))}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new b,new m]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t}(),je=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new b,new m]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),Le=[new Re],Ve=new Me([new Ie]),Ue=new je(Le),Fe=Xt(null,"core",[{provide:ct,useValue:"unknown"},{provide:Jt,deps:[P]},{provide:Ut,deps:[]},{provide:ht,deps:[]}]),Be=new c("LocaleId");function qe(){return Ve}function He(){return Ue}function We(t){return t||"en-US"}var ze=function(t){},Ge=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),Ke=function(){};function Qe(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Xe(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Ye(t,e){return t.nodes[e]}function Je(t,e){return t.nodes[e]}function Ze(t,e){return t.nodes[e]}function $e(t,e){return t.nodes[e]}function tn(t,e){return t.nodes[e]}var en={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function nn(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return rn(n,e),n}(i,t)}function rn(t,e){t[Q]=e,t[Y]=e.logError.bind(e)}function on(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var sn=function(){},an=new Map;function un(t){var e=an.get(t);return e||(e=O(t)+"_"+an.size,an.set(t,e)),e}function cn(t,e,n,r){if(_e.isWrapped(r)){r=_e.unwrap(r);var i=t.def.nodes[e].bindingIndex+n,o=_e.unwrap(t.oldValues[i]);t.oldValues[i]=new _e(o)}return r}var ln="$$undefined",hn="$$empty";function fn(t){return{id:ln,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var pn=0;function dn(t,e,n,r){return!(!(2&t.state)&&x(t.oldValues[e.bindingIndex+n],r))}function yn(t,e,n,r){return!!dn(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function vn(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!we(i,r)){var o=e.bindings[n].name;throw nn(en.createDebugContext(t,e.nodeIndex),o+": "+i,o+": "+r,0!=(1&t.state))}}function mn(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function gn(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function bn(t,e,n,r){try{return mn(33554432&t.def.nodes[e].flags?Je(t,e).componentView:t),en.handleEvent(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}function wn(t){return t.parent?Je(t.parent,t.parentNodeDef.nodeIndex):null}function _n(t){return t.parent?t.parentNodeDef.parent:null}function Sn(t,e){switch(201347067&e.flags){case 1:return Je(t,e.nodeIndex).renderElement;case 2:return Ye(t,e.nodeIndex).renderText}}function En(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function Tn(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function In(t){var e={},n=0,r={};return t&&t.forEach(function(t){var i=t[0],o=t[1];"number"==typeof i?(e[i]=o,n|=function(t){return 1<<t%32}(i)):r[i]=o}),{matchedQueries:e,references:r,matchedQueryIds:n}}function Cn(t,e){return t.map(function(t){var n,r;return Array.isArray(t)?(r=t[0],n=t[1]):(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,N,{value:e,configurable:!0}),{flags:r,token:n,tokenKey:un(n)}})}function xn(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===p.Native?Je(t,n.renderParent.nodeIndex).renderElement:void 0:e}var On=new WeakMap;function kn(t){var e=On.get(t);return e||((e=t(function(){return sn})).factory=t,On.set(t,e)),e}function An(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(Sn(t,t.def.lastRenderRootNode))),Nn(t,e,0,t.def.nodes.length-1,n,r,i)}function Nn(t,e,n,r,i,o,s){for(var a=n;a<=r;a++){var u=t.def.nodes[a];11&u.flags&&Dn(t,u,e,i,o,s),a+=u.childCount}}function Rn(t,e,n,r,i,o){for(var s=t;s&&!En(s);)s=s.parent;for(var a=s.parent,u=_n(s),c=u.nodeIndex+u.childCount,l=u.nodeIndex+1;l<=c;l++){var h=a.def.nodes[l];h.ngContentIndex===e&&Dn(a,h,n,r,i,o),l+=h.childCount}if(!a.parent){var f=t.root.projectableNodes[e];if(f)for(l=0;l<f.length;l++)Pn(t,f[l],n,r,i,o)}}function Dn(t,e,n,r,i,o){if(8&e.flags)Rn(t,e.ngContent.index,n,r,i,o);else{var s=Sn(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Pn(t,s,n,r,i,o),32&e.bindingFlags&&Pn(Je(t,e.nodeIndex).componentView,s,n,r,i,o)):Pn(t,s,n,r,i,o),16777216&e.flags)for(var a=Je(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<a.length;u++)An(a[u],n,r,i,o);1&e.flags&&!e.element.name&&Nn(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function Pn(t,e,n,r,i,o){var s=t.renderer;switch(n){case 1:s.appendChild(r,e);break;case 2:s.insertBefore(r,e,i);break;case 3:s.removeChild(r,e);break;case 0:o.push(e)}}var Mn=/^:([^:]+):(.+)$/;function jn(t){if(":"===t[0]){var e=t.match(Mn);return[e[1],e[2]]}return["",t]}function Ln(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function Vn(t,e,n,r,i,o){t|=1;var s=In(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s.matchedQueries,matchedQueryIds:s.matchedQueryIds,references:s.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?kn(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||sn},provider:null,text:null,query:null,ngContent:null}}function Un(t,e,n,r,i,o,s,a,u,c,l,h){void 0===s&&(s=[]),c||(c=sn);var f=In(n),d=f.matchedQueries,y=f.references,v=f.matchedQueryIds,m=null,g=null;o&&(m=(N=jn(o))[0],g=N[1]),a=a||[];for(var b=new Array(a.length),w=0;w<a.length;w++){var _=a[w],S=_[0],E=_[2],T=jn(_[1]),I=T[0],C=T[1],x=void 0,O=void 0;switch(15&S){case 4:O=E;break;case 1:case 8:x=E}b[w]={flags:S,ns:I,name:C,nonMinifiedName:C,securityContext:x,suffix:O}}u=u||[];var k=new Array(u.length);for(w=0;w<u.length;w++){var A=u[w];k[w]={type:0,target:A[0],eventName:A[1],propName:null}}var N,R=(s=s||[]).map(function(t){var e=t[1],n=jn(t[0]);return[n[0],n[1],e]});return h=function(t){if(t&&t.id===ln){var e=null!=t.encapsulation&&t.encapsulation!==p.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+pn++:hn}return t&&t.id===hn&&(t=null),t||null}(h),l&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:v,references:y,ngContentIndex:r,childCount:i,bindings:b,bindingFlags:Ln(b),outputs:k,element:{ns:m,name:g,attrs:R,template:null,componentProvider:null,componentView:l||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||sn},provider:null,text:null,query:null,ngContent:null}}function Fn(t,e,n){var r,i=n.element,o=t.root.selectorOrNode,s=t.renderer;if(t.parent||!o){r=i.name?s.createElement(i.name,i.ns):s.createComment("");var a=xn(t,e,n);a&&s.appendChild(a,r)}else r=s.selectRootElement(o);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var c=i.attrs[u];s.setAttribute(r,c[1],c[2],c[0])}return r}function Bn(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],s=qn(t,n.nodeIndex,(h=o.eventName,(l=o.target)?l+":"+h:h)),a=o.target,u=t;"component"===o.target&&(a=null,u=e);var c=u.renderer.listen(a||r,o.eventName,s);t.disposables[n.outputIndex+i]=c}var l,h}function qn(t,e,n){return function(r){return bn(t,e,n,r)}}function Hn(t,e,n,r){if(!yn(t,e,n,r))return!1;var i=e.bindings[n],o=Je(t,e.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var s=e.securityContext,a=s?t.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(t,i,s,i.ns,a,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,s,a,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(Ge.STYLE,i);if(null!=o){o=o.toString();var s=e.suffix;null!=s&&(o+=s)}else o=null;var a=t.renderer;null!=o?a.setStyle(n,r,o):a.removeStyle(n,r)}(t,i,s,a,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,s=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,s)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,s,a,r)}return!0}var Wn=new Object,zn=un(P),Gn=un(Tt);function Kn(t,e,n,r){return n=A(n),{index:-1,deps:Cn(r,O(e)),flags:t,token:e,value:n}}function Qn(t){for(var e={},n=0;n<t.length;n++){var r=t[n];r.index=n,e[un(r.token)]=r}return{factory:null,providersByKey:e,providers:t}}function Xn(t,e,n){if(void 0===n&&(n=P.THROW_IF_NOT_FOUND),8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var r=e.tokenKey;switch(r){case zn:case Gn:return t}var i=t._def.providersByKey[r];if(i){var o=t._providers[i.index];return void 0===o&&(o=t._providers[i.index]=Yn(t,i)),o===Wn?void 0:o}return t._parent.get(e.token,n)}function Yn(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(Xn(t,n[0]));case 2:return new e(Xn(t,n[0]),Xn(t,n[1]));case 3:return new e(Xn(t,n[0]),Xn(t,n[1]),Xn(t,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Xn(t,n[o]);return new(e.bind.apply(e,[void 0].concat(i)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(Xn(t,n[0]));case 2:return e(Xn(t,n[0]),Xn(t,n[1]));case 3:return e(Xn(t,n[0]),Xn(t,n[1]),Xn(t,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Xn(t,n[o]);return e.apply(void 0,i)}}(t,e.value,e.deps);break;case 2048:n=Xn(t,e.deps[0]);break;case 256:n=e.value}return void 0===n?Wn:n}function Jn(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,er(n,e),en.dirtyParentQueries(r),$n(r),r}function Zn(t,e,n){var r=e?Sn(e,e.def.lastRenderRootNode):t.renderElement;An(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function $n(t){An(t,3,null,null,void 0)}function tr(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function er(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var nr=new Object;function rr(t,e,n,r,i,o){return new ir(t,e,n,r,i,o)}var ir=function(t){function e(e,n,r,i,o,s){var a=t.call(this)||this;return a.selector=e,a.componentType=n,a._inputs=i,a._outputs=o,a.ngContentSelectors=s,a.viewDefFactory=r,a}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=kn(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=en.createRootView(t,e||[],n,i,r,nr),a=Ze(s,o).instance;return n&&s.renderer.setAttribute(Je(s,0).renderElement,"ng-version",y.full),new or(s,new cr(s),a)},e}(yt),or=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new re(Je(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new pr(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(function(){});function sr(t,e,n){return new ar(t,e,n)}var ar=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new re(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new pr(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=_n(t),t=t.parent;return t?new pr(t,e):new pr(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Jn(this._data,t);en.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new cr(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof Et||(i=o.get(Tt));var s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,s=t;return i=s._view,o=(n=this._data).viewContainer._embeddedViews,null!==(r=e)&&void 0!==r||(r=o.length),i.viewContainerParent=this._view,tr(o,r,i),function(t,e){var n=wn(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),en.dirtyParentQueries(i),Zn(n,r>0?o[r-1]:null,i),s.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,s,a=this._embeddedViews.indexOf(t._view);return i=e,s=(o=(n=this._data).viewContainer._embeddedViews)[r=a],er(o,r),null==i&&(i=o.length),tr(o,i,s),en.dirtyParentQueries(s),$n(s),Zn(n,i>0?o[i-1]:null,s),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Jn(this._data,t);e&&en.destroyView(e)},t.prototype.detach=function(t){var e=Jn(this._data,t);return e?new cr(e):null},t}();function ur(t){return new cr(t)}var cr=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return An(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){mn(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{en.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){en.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),en.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,$n(this._view),en.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function lr(t,e){return new hr(t,e)}var hr=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return Object(r.__extends)(e,t),e.prototype.createEmbeddedView=function(t){return new cr(en.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new re(Je(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(le);function fr(t,e){return new pr(t,e)}var pr=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=P.THROW_IF_NOT_FOUND),en.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:un(t)},e)},t}();function dr(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=Je(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Ye(t,n.nodeIndex).renderText;if(20240&n.flags)return Ze(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function yr(t){return new vr(t.renderer)}var vr=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=jn(e),r=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,r),r},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=jn(e),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(t,o,n,i):this.delegate.removeAttribute(t,o,i)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function mr(t,e,n,r){return new gr(t,e,n,r)}var gr=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||(n[r]=Yn(t,i))}}(this)}return t.prototype.get=function(t,e){return void 0===e&&(e=P.THROW_IF_NOT_FOUND),Xn(this,{token:t,tokenKey:un(t),flags:0},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(_t)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+O(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){var i=t._providers[r];i&&i!==Wn&&i.ngOnDestroy()}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),br=un(function(){}),wr=un(function(){}),_r=un(re),Sr=un(he),Er=un(le),Tr=un(fe),Ir=un(P);function Cr(t,e,n,r,i,o,s,a){var u=[];if(s)for(var c in s){var l=s[c];u[l[0]]={flags:8,name:c,nonMinifiedName:l[1],ns:null,securityContext:null,suffix:null}}var h=[];if(a)for(var f in a)h.push({type:1,propName:f,target:null,eventName:a[f]});return Or(t,e|=16384,n,r,i,i,o,u,h)}function xr(t,e,n){return Or(-1,t|=16,null,0,e,e,n)}function Or(t,e,n,r,i,o,s,a,u){var c=In(n),l=c.matchedQueries,h=c.references,f=c.matchedQueryIds;u||(u=[]),a||(a=[]),o=A(o);var p=Cn(s,O(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:Ln(a),outputs:u,element:null,provider:{token:i,value:o,deps:p},text:null,query:null,ngContent:null}}function kr(t,e){return Dr(t,e)}function Ar(t,e){for(var n=t;n.parent&&!En(n);)n=n.parent;return Pr(n.parent,_n(n),!0,e.provider.value,e.provider.deps)}function Nr(t,e){var n=Pr(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName].subscribe(Rr(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=o.unsubscribe.bind(o)}return n}function Rr(t,e,n){return function(r){return bn(t,e,n,r)}}function Dr(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return Pr(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(jr(t,e,n,i[0]));case 2:return r(jr(t,e,n,i[0]),jr(t,e,n,i[1]));case 3:return r(jr(t,e,n,i[0]),jr(t,e,n,i[1]),jr(t,e,n,i[2]));default:for(var s=Array(o),a=0;a<o;a++)s[a]=jr(t,e,n,i[a]);return r.apply(void 0,s)}}(t,e.parent,n,r.value,r.deps);case 2048:return jr(t,e.parent,n,r.deps[0]);case 256:return r.value}}function Pr(t,e,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(jr(t,e,n,i[0]));case 2:return new r(jr(t,e,n,i[0]),jr(t,e,n,i[1]));case 3:return new r(jr(t,e,n,i[0]),jr(t,e,n,i[1]),jr(t,e,n,i[2]));default:for(var s=new Array(o),a=0;a<o;a++)s[a]=jr(t,e,n,i[a]);return new(r.bind.apply(r,[void 0].concat(s)))}}var Mr={};function jr(t,e,n,r,i){if(void 0===i&&(i=P.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var s=r.tokenKey;for(s===Tr&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);t;){if(e)switch(s){case br:return yr(Lr(t,e,n));case wr:return Lr(t,e,n).renderer;case _r:return new re(Je(t,e.nodeIndex).renderElement);case Sr:return Je(t,e.nodeIndex).viewContainer;case Er:if(e.element.template)return Je(t,e.nodeIndex).template;break;case Tr:return ur(Lr(t,e,n));case Ir:return fr(t,e);default:var a=(n?e.element.allProviders:e.element.publicProviders)[s];if(a){var u=Ze(t,a.nodeIndex);return u||(u={instance:Dr(t,a)},t.nodes[a.nodeIndex]=u),u.instance}}n=En(t),e=_n(t),t=t.parent}var c=o.root.injector.get(r.token,Mr);return c!==Mr||i===Mr?c:o.root.ngModule.injector.get(r.token,i)}function Lr(t,e,n){var r;if(n)r=Je(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!En(r);)r=r.parent;return r}function Vr(t,e,n,r,i,o){if(32768&n.flags){var s=Je(t,n.parent.nodeIndex).componentView;2&s.def.flags&&(s.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var a=_e.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Se(a,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function Ur(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],s=o.parent;for(!s&&o.flags&e&&Br(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(r=Fr(t,s,e,r)),s=s.parent}}function Fr(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&Br(t,i,o.flags&n,r++),i+=o.childCount}return r}function Br(t,e,n,r){var i=Ze(t,e);if(i){var o=i.instance;o&&(en.setCurrentNode(t,e),1048576&n&&Xe(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Xe(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function qr(t){for(var e=t.def.nodeMatchedQueries;t.parent&&Tn(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&tn(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&tn(t,i).setDirty(),i+=o.childCount}}function Hr(t,e){var n=tn(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=Wr(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=Ze(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=Wr(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var s=e.query.bindings,a=!1,u=0;u<s.length;u++){var c=s[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,a=!0}r[c.propName]=l}a&&n.notifyOnChanges()}}function Wr(t,e,n,r,i){for(var o=e;o<=n;o++){var s=t.def.nodes[o],a=s.matchedQueries[r.id];if(null!=a&&i.push(zr(t,s,a)),1&s.flags&&s.element.template&&(s.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Je(t,o);if((s.childMatchedQueries&r.filterId)===r.filterId&&(Wr(t,o+1,o+s.childCount,r,i),o+=s.childCount),16777216&s.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var h=c[l],f=wn(h);f&&f===u&&Wr(h,0,h.def.nodes.length-1,r,i)}var p=u.template._projectedViews;if(p)for(l=0;l<p.length;l++){var d=p[l];Wr(d,0,d.def.nodes.length-1,r,i)}}(s.childMatchedQueries&r.filterId)!==r.filterId&&(o+=s.childCount)}return i}function zr(t,e,n){if(null!=n)switch(n){case 1:return Je(t,e.nodeIndex).renderElement;case 0:return new re(Je(t,e.nodeIndex).renderElement);case 2:return Je(t,e.nodeIndex).template;case 3:return Je(t,e.nodeIndex).viewContainer;case 4:return Ze(t,e.nodeIndex).instance}}function Gr(t,e,n){var r=xn(t,e,n);r&&Rn(t,n.ngContent.index,1,r,null,void 0)}function Kr(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Qr(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=xn(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function Xr(t,e){return(null!=t?t.toString():"")+e.suffix}function Yr(t,e,n,r){for(var i=0,o=0,s=0,a=0,u=0,c=null,l=null,h=!1,f=!1,p=null,d=0;d<e.length;d++){var y=e[d];if(y.nodeIndex=d,y.parent=c,y.bindingIndex=i,y.outputIndex=o,y.renderParent=l,s|=y.flags,u|=y.matchedQueryIds,y.element){var v=y.element;v.publicProviders=c?c.element.publicProviders:Object.create(null),v.allProviders=v.publicProviders,h=!1,f=!1,y.element.template&&(u|=y.element.template.nodeMatchedQueries)}if(Zr(c,y,e.length),i+=y.bindings.length,o+=y.outputs.length,!l&&3&y.flags&&(p=y),20224&y.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var m=0!=(32768&y.flags);0==(8192&y.flags)||m?c.element.publicProviders[un(y.provider.token)]=y:(f||(f=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[un(y.provider.token)]=y),m&&(c.element.componentProvider=y)}if(c?(c.childFlags|=y.flags,c.directChildFlags|=y.flags,c.childMatchedQueries|=y.matchedQueryIds,y.element&&y.element.template&&(c.childMatchedQueries|=y.element.template.nodeMatchedQueries)):a|=y.flags,y.childCount>0)c=y,Jr(y)||(l=y);else for(;c&&d===c.nodeIndex+c.childCount;){var g=c.parent;g&&(g.childFlags|=c.childFlags,g.childMatchedQueries|=c.childMatchedQueries),l=(c=g)&&Jr(c)?c.renderParent:c}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||sn,updateRenderer:r||sn,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:p}}function Jr(t){return 0!=(1&t.flags)&&null===t.element.name}function Zr(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function $r(t,e,n,r){var i=ni(t.root,t.renderer,t,e,n);return ri(i,t.component,r),ii(i),i}function ti(t,e,n){var r=ni(t,t.renderer,null,null,e);return ri(r,n,n),ii(r),r}function ei(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,ni(t.root,i,t,e.element.componentProvider,n)}function ni(t,e,n,r,i){var o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function ri(t,e,n){t.component=e,t.context=n}function ii(t){var e;En(t)&&(e=Je(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];en.setCurrentNode(t,i);var s=void 0;switch(201347067&o.flags){case 1:var a=Fn(t,e,o),u=void 0;if(33554432&o.flags){var c=kn(o.element.componentView);u=en.createComponentView(t,o,c,a)}Bn(t,u,o,a),s={renderElement:a,componentView:u,viewContainer:null,template:o.element.template?lr(t,o):void 0},16777216&o.flags&&(s.viewContainer=sr(t,o,s));break;case 2:s=Qr(t,e,o);break;case 512:case 1024:case 2048:case 256:(s=r[i])||4096&o.flags||(s={instance:kr(t,o)});break;case 16:s={instance:Ar(t,o)};break;case 16384:(s=r[i])||(s={instance:Nr(t,o)}),32768&o.flags&&ri(Je(t,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new oe;break;case 8:Gr(t,e,o),s=void 0}r[i]=s}pi(t,fi.CreateViewNodes),mi(t,201326592,268435456,0)}function oi(t){ui(t),en.updateDirectives(t,1),di(t,fi.CheckNoChanges),en.updateRenderer(t,1),pi(t,fi.CheckNoChanges),t.state&=-97}function si(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Qe(t,0,256),ui(t),en.updateDirectives(t,0),di(t,fi.CheckAndUpdate),mi(t,67108864,536870912,0);var e=Qe(t,256,512);Ur(t,2097152|(e?1048576:0)),en.updateRenderer(t,0),pi(t,fi.CheckAndUpdate),mi(t,134217728,536870912,0),Ur(t,8388608|((e=Qe(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Qe(t,768,1024)}function ai(t,e,n,r,i,o,s,a,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,s,a,u,c,l,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,s,a,u,c,l,h){var f=e.bindings.length,p=!1;return f>0&&Hn(t,e,0,n)&&(p=!0),f>1&&Hn(t,e,1,r)&&(p=!0),f>2&&Hn(t,e,2,i)&&(p=!0),f>3&&Hn(t,e,3,o)&&(p=!0),f>4&&Hn(t,e,4,s)&&(p=!0),f>5&&Hn(t,e,5,a)&&(p=!0),f>6&&Hn(t,e,6,u)&&(p=!0),f>7&&Hn(t,e,7,c)&&(p=!0),f>8&&Hn(t,e,8,l)&&(p=!0),f>9&&Hn(t,e,9,h)&&(p=!0),p}(t,e,n,r,i,o,s,a,u,c,l,h);case 2:return function(t,e,n,r,i,o,s,a,u,c,l,h){var f=!1,p=e.bindings,d=p.length;if(d>0&&yn(t,e,0,n)&&(f=!0),d>1&&yn(t,e,1,r)&&(f=!0),d>2&&yn(t,e,2,i)&&(f=!0),d>3&&yn(t,e,3,o)&&(f=!0),d>4&&yn(t,e,4,s)&&(f=!0),d>5&&yn(t,e,5,a)&&(f=!0),d>6&&yn(t,e,6,u)&&(f=!0),d>7&&yn(t,e,7,c)&&(f=!0),d>8&&yn(t,e,8,l)&&(f=!0),d>9&&yn(t,e,9,h)&&(f=!0),f){var y=e.text.prefix;d>0&&(y+=Xr(n,p[0])),d>1&&(y+=Xr(r,p[1])),d>2&&(y+=Xr(i,p[2])),d>3&&(y+=Xr(o,p[3])),d>4&&(y+=Xr(s,p[4])),d>5&&(y+=Xr(a,p[5])),d>6&&(y+=Xr(u,p[6])),d>7&&(y+=Xr(c,p[7])),d>8&&(y+=Xr(l,p[8])),d>9&&(y+=Xr(h,p[9]));var v=Ye(t,e.nodeIndex).renderText;t.renderer.setValue(v,y)}return f}(t,e,n,r,i,o,s,a,u,c,l,h);case 16384:return function(t,e,n,r,i,o,s,a,u,c,l,h){var f=Ze(t,e.nodeIndex),p=f.instance,d=!1,y=void 0,v=e.bindings.length;return v>0&&dn(t,e,0,n)&&(d=!0,y=Vr(t,f,e,0,n,y)),v>1&&dn(t,e,1,r)&&(d=!0,y=Vr(t,f,e,1,r,y)),v>2&&dn(t,e,2,i)&&(d=!0,y=Vr(t,f,e,2,i,y)),v>3&&dn(t,e,3,o)&&(d=!0,y=Vr(t,f,e,3,o,y)),v>4&&dn(t,e,4,s)&&(d=!0,y=Vr(t,f,e,4,s,y)),v>5&&dn(t,e,5,a)&&(d=!0,y=Vr(t,f,e,5,a,y)),v>6&&dn(t,e,6,u)&&(d=!0,y=Vr(t,f,e,6,u,y)),v>7&&dn(t,e,7,c)&&(d=!0,y=Vr(t,f,e,7,c,y)),v>8&&dn(t,e,8,l)&&(d=!0,y=Vr(t,f,e,8,l,y)),v>9&&dn(t,e,9,h)&&(d=!0,y=Vr(t,f,e,9,h,y)),y&&p.ngOnChanges(y),65536&e.flags&&Xe(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),d}(t,e,n,r,i,o,s,a,u,c,l,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,s,a,u,c,l,h){var f=e.bindings,p=!1,d=f.length;if(d>0&&yn(t,e,0,n)&&(p=!0),d>1&&yn(t,e,1,r)&&(p=!0),d>2&&yn(t,e,2,i)&&(p=!0),d>3&&yn(t,e,3,o)&&(p=!0),d>4&&yn(t,e,4,s)&&(p=!0),d>5&&yn(t,e,5,a)&&(p=!0),d>6&&yn(t,e,6,u)&&(p=!0),d>7&&yn(t,e,7,c)&&(p=!0),d>8&&yn(t,e,8,l)&&(p=!0),d>9&&yn(t,e,9,h)&&(p=!0),p){var y=$e(t,e.nodeIndex),v=void 0;switch(201347067&e.flags){case 32:v=new Array(f.length),d>0&&(v[0]=n),d>1&&(v[1]=r),d>2&&(v[2]=i),d>3&&(v[3]=o),d>4&&(v[4]=s),d>5&&(v[5]=a),d>6&&(v[6]=u),d>7&&(v[7]=c),d>8&&(v[8]=l),d>9&&(v[9]=h);break;case 64:v={},d>0&&(v[f[0].name]=n),d>1&&(v[f[1].name]=r),d>2&&(v[f[2].name]=i),d>3&&(v[f[3].name]=o),d>4&&(v[f[4].name]=s),d>5&&(v[f[5].name]=a),d>6&&(v[f[6].name]=u),d>7&&(v[f[7].name]=c),d>8&&(v[f[8].name]=l),d>9&&(v[f[9].name]=h);break;case 128:var m=n;switch(d){case 1:v=m.transform(n);break;case 2:v=m.transform(r);break;case 3:v=m.transform(r,i);break;case 4:v=m.transform(r,i,o);break;case 5:v=m.transform(r,i,o,s);break;case 6:v=m.transform(r,i,o,s,a);break;case 7:v=m.transform(r,i,o,s,a,u);break;case 8:v=m.transform(r,i,o,s,a,u,c);break;case 9:v=m.transform(r,i,o,s,a,u,c,l);break;case 10:v=m.transform(r,i,o,s,a,u,c,l,h)}}y.value=v}return p}(t,e,n,r,i,o,s,a,u,c,l,h);default:throw"unreachable"}}(t,e,r,i,o,s,a,u,c,l,h,f):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)Hn(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)yn(t,e,o,n[o])&&(i=!0);if(i){var s="";for(o=0;o<n.length;o++)s+=Xr(n[o],r[o]);s=e.text.prefix+s;var a=Ye(t,e.nodeIndex).renderText;t.renderer.setValue(a,s)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=Ze(t,e.nodeIndex),i=r.instance,o=!1,s=void 0,a=0;a<n.length;a++)dn(t,e,a,n[a])&&(o=!0,s=Vr(t,r,e,a,n[a],s));return s&&i.ngOnChanges(s),65536&e.flags&&Xe(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)yn(t,e,o,n[o])&&(i=!0);if(i){var s=$e(t,e.nodeIndex),a=void 0;switch(201347067&e.flags){case 32:a=n;break;case 64:for(a={},o=0;o<n.length;o++)a[r[o].name]=n[o];break;case 128:var u=n[0],c=n.slice(1);a=u.transform.apply(u,c)}s.value=a}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function ui(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=Je(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var s=i[o];s.state|=32,gn(s,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function ci(t,e,n,r,i,o,s,a,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,s,a,u,c,l,h){var f=e.bindings.length;f>0&&vn(t,e,0,n),f>1&&vn(t,e,1,r),f>2&&vn(t,e,2,i),f>3&&vn(t,e,3,o),f>4&&vn(t,e,4,s),f>5&&vn(t,e,5,a),f>6&&vn(t,e,6,u),f>7&&vn(t,e,7,c),f>8&&vn(t,e,8,l),f>9&&vn(t,e,9,h)}(t,e,r,i,o,s,a,u,c,l,h,f):function(t,e,n){for(var r=0;r<n.length;r++)vn(t,e,r,n[r])}(t,e,r),!1}function li(t,e){if(tn(t,e.nodeIndex).dirty)throw nn(en.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function hi(t){if(!(128&t.state)){if(di(t,fi.Destroy),pi(t,fi.Destroy),Ur(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=wn(t);if(e){var n=e.template._projectedViews;n&&(er(n,n.indexOf(t)),en.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Je(t,n).renderElement):2&r.flags?t.renderer.destroyNode(Ye(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&tn(t,n).destroy()}}(t),En(t)&&t.renderer.destroy(),t.state|=128}}var fi=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function pi(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?yi(Je(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function di(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Je(t,r).viewContainer._embeddedViews,s=0;s<o.length;s++)yi(o[s],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function yi(t,e){var n=t.state;switch(e){case fi.CheckNoChanges:0==(128&n)&&(12==(12&n)?oi(t):64&n&&vi(t,fi.CheckNoChangesProjectedViews));break;case fi.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?oi(t):64&n&&vi(t,e));break;case fi.CheckAndUpdate:0==(128&n)&&(12==(12&n)?si(t):64&n&&vi(t,fi.CheckAndUpdateProjectedViews));break;case fi.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?si(t):64&n&&vi(t,e));break;case fi.Destroy:hi(t);break;case fi.CreateViewNodes:ii(t)}}function vi(t,e){di(t,e),pi(t,e)}function mi(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var s=t.def.nodes[o];if(s.flags&e&&s.flags&n)switch(en.setCurrentNode(t,s.nodeIndex),r){case 0:Hr(t,s);break;case 1:li(t,s)}s.childFlags&e&&s.childFlags&n||(o+=s.childCount)}}var gi=!1;function bi(t,e,n,r,i,o){return ti(_i(t,i,i.injector.get(ee),e,n),r,o)}function wi(t,e,n,r,i,o){var s=i.injector.get(ee),a=_i(t,i,new to(s),e,n),u=Ai(r);return Zi(Ui.create,ti,null,[a,u,o])}function _i(t,e,n,r,i){var o=e.injector.get(Ke),s=e.injector.get(tt);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:s}}function Si(t,e,n,r){var i=Ai(n);return Zi(Ui.create,$r,null,[t,e,i,r])}function Ei(t,e,n,r){return n=Ci.get(e.element.componentProvider.provider.token)||Ai(n),Zi(Ui.create,ei,null,[t,e,n,r])}function Ti(t,e,n,r){return mr(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===Ii.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=Ii.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=Ii.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=Cn(i.deps),r.value=i.value)}}(t=t.factory(function(){return sn})),t):t}(r))}var Ii=new Map,Ci=new Map;function xi(t){Ii.set(t.token,t)}function Oi(t,e){var n=kn(kn(e.viewDefFactory).nodes[0].element.componentView);Ci.set(t,n)}function ki(){Ii.clear(),Ci.clear()}function Ai(t){if(0===Ii.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Ii.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return sn});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=Ii.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=Cn(o.deps),i.value=o.value)}}}}function Ni(t,e,n,r,i,o,s,a,u,c,l,h,f){var p=t.def.nodes[e];return ai(t,p,n,r,i,o,s,a,u,c,l,h,f),224&p.flags?$e(t,e).value:void 0}function Ri(t,e,n,r,i,o,s,a,u,c,l,h,f){var p=t.def.nodes[e];return ci(t,p,n,r,i,o,s,a,u,c,l,h,f),224&p.flags?$e(t,e).value:void 0}function Di(t){return Zi(Ui.detectChanges,si,null,[t])}function Pi(t){return Zi(Ui.checkNoChanges,oi,null,[t])}function Mi(t){return Zi(Ui.destroy,hi,null,[t])}var ji,Li,Vi,Ui=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();function Fi(t,e){Li=t,Vi=e}function Bi(t,e,n,r){return Fi(t,e),Zi(Ui.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function qi(t,e){if(128&t.state)throw on(Ui[ji]);return Fi(t,Qi(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=t.def.nodes[n];return 0===e?Wi(t,s,r,i):zi(t,s,r,i),16384&s.flags&&Fi(t,Qi(t,n)),224&s.flags?$e(t,s.nodeIndex).value:void 0},t)}function Hi(t,e){if(128&t.state)throw on(Ui[ji]);return Fi(t,Xi(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=t.def.nodes[n];return 0===e?Wi(t,s,r,i):zi(t,s,r,i),3&s.flags&&Fi(t,Xi(t,n)),224&s.flags?$e(t,s.nodeIndex).value:void 0},t)}function Wi(t,e,n,r){if(ai.apply(void 0,[t,e,n].concat(r))){var i=1===n?r[0]:r;if(16384&e.flags){for(var o={},s=0;s<e.bindings.length;s++){var a=e.bindings[s],u=i[s];8&a.flags&&(o[(f=a.nonMinifiedName,"ng-reflect-"+(f=f.replace(/[$@]/g,"_").replace(Gi,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=Ki(u))}var c=e.parent,l=Je(t,c.nodeIndex).renderElement;if(c.element.name)for(var h in o)null!=(u=o[h])?t.renderer.setAttribute(l,h,u):t.renderer.removeAttribute(l,h);else t.renderer.setValue(l,"bindings="+JSON.stringify(o,null,2))}}var f}function zi(t,e,n,r){ci.apply(void 0,[t,e,n].concat(r))}var Gi=/([A-Z])/g;function Ki(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function Qi(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Xi(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Yi=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=_n(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Je(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return fr(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Ji(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Ji(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!En(t);)t=t.parent;return t.parent?Je(t.parent,_n(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Sn(this.view,this.nodeDef):Sn(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var o=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),s=-1;e.factory(function(){return++s===o?(e=t.error).bind.apply(e,[t].concat(r)):sn;var e}),s<o&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,r))},t}();function Ji(t,e,n){for(var r in e.references)n[r]=zr(t,e,e.references[r])}function Zi(t,e,n,r){var i=ji,o=Li,s=Vi;try{ji=t;var a=e.apply(n,r);return Li=o,Vi=s,ji=i,a}catch(t){if(J(t)||!Li)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),rn(t,e),t}(t,$i())}}function $i(){return Li?new Yi(Li,Vi):null}var to=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new eo(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),eo=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){me.delete(t.nativeNode)}(ge(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=$i();if(r){var i=new de(n,null,r);i.name=t,be(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=$i();return n&&be(new pe(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=$i();return n&&be(new pe(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=ge(t),r=ge(e);n&&r&&n instanceof de&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=ge(t),i=ge(e),o=ge(n);r&&i&&r instanceof de&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=ge(t),r=ge(e);n&&r&&n instanceof de&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=$i();return n&&be(new de(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,r){var i=ge(t);i&&i instanceof de&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=ge(t);r&&r instanceof de&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=ge(t);n&&n instanceof de&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=ge(t);n&&n instanceof de&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=ge(t);i&&i instanceof de&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=ge(t);r&&r instanceof de&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=ge(t);r&&r instanceof de&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=ge(t);r&&r.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function no(t,e,n){return new io(t,e,n)}var ro,io=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.__extends)(e,t),e.prototype.create=function(t){!function(){if(!gi){gi=!0;var t=Kt()?{setCurrentNode:Fi,createRootView:wi,createEmbeddedView:Si,createComponentView:Ei,createNgModuleRef:Ti,overrideProvider:xi,overrideComponentView:Oi,clearOverrides:ki,checkAndUpdateView:Di,checkNoChangesView:Pi,destroyView:Mi,createDebugContext:function(t,e){return new Yi(t,e)},handleEvent:Bi,updateDirectives:qi,updateRenderer:Hi}:{setCurrentNode:function(){},createRootView:bi,createEmbeddedView:$r,createComponentView:ei,createNgModuleRef:mr,overrideProvider:sn,overrideComponentView:sn,clearOverrides:sn,checkAndUpdateView:si,checkNoChangesView:oi,destroyView:hi,createDebugContext:function(t,e){return new Yi(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Ni:Ri,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Ni:Ri,t)}};en.setCurrentNode=t.setCurrentNode,en.createRootView=t.createRootView,en.createEmbeddedView=t.createEmbeddedView,en.createComponentView=t.createComponentView,en.createNgModuleRef=t.createNgModuleRef,en.overrideProvider=t.overrideProvider,en.overrideComponentView=t.overrideComponentView,en.clearOverrides=t.clearOverrides,en.checkAndUpdateView=t.checkAndUpdateView,en.checkNoChangesView=t.checkNoChangesView,en.destroyView=t.destroyView,en.resolveDep=jr,en.createDebugContext=t.createDebugContext,en.handleEvent=t.handleEvent,en.updateDirectives=t.updateDirectives,en.updateRenderer=t.updateRenderer,en.dirtyParentQueries=qr}}();var e=kn(this._ngModuleDefFactory);return en.createNgModuleRef(this.moduleType,t||P.NULL,this._bootstrapComponents,e)},e}(It);"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&(window.ngDevMode=!0),"undefined"!=typeof self&&(self.ngDevMode=!0),"undefined"!=typeof t&&(t.ngDevMode=!0)),ro=function(t,e,n){return{parent:ro,id:null,node:null,data:[],ngStaticData:[],cleanup:null,renderer:null,child:null,tail:null,next:null,bindingStartIndex:null,creationMode:!0,viewHookStartIndex:null}}()}).call(e,n("DuR2"))},Whum:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.forEach=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},e.extend=function(t,n){return e.forEach(n,function(e,n){t[e]=n}),t},e.clone=function(t){return e.extend({},t)},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.findKey=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},e.findValue=function(t,n,r){var i=e.findKey(t,n,r);return i&&t[i]},e.getAnyKey=function(t){for(var e in t)return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0}},YNQF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Whum");e.querystring=function(t){var e=[];return r.forEach(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e}},YaPU:function(t,e,n){"use strict";var r=n("AMGY"),i=n("OVmG"),o=n("tLDX"),s=n("t7NR"),a=n("+CnV"),u=n("f9aG");n.d(e,"a",function(){return c});var c=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,a=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(s.a)}(t,e,n);if(r?r.call(a,this.source):a.add(this.source||!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?e=r.a.Rx.config.Promise:r.a.Promise&&(e=r.a.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var i;i=n.subscribe(function(e){if(i)try{t(e)}catch(t){r(t),i.unsubscribe()}else t(e)},r,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[a.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:Object(u.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?t=r.a.Rx.config.Promise:r.a.Promise&&(t=r.a.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}()},ZCyv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};e.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!=a&&(r.push(s<<4&240|a>>2),64!=u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},e.base64Encode=function(t){var n=r(t);return e.base64.encodeByteArray(n,!0)},e.base64Decode=function(t){try{return e.base64.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}},bzVp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("+iia"),i=(n.n(r),n("m9DX")),o=(n.n(i),n("OAVl"));n.n(o)},cQXm:function(t,e,n){"use strict";e.a=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},dgOU:function(t,e,n){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},etqZ:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var n=t.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=t.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&r.prototype[s]===r.prototype.entries)return s}return"@@iterator"}(n("AMGY").a)},f9aG:function(t,e,n){"use strict";e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i(t)},e.b=i;var r=n("gIN1");function i(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.a}},fKB6:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={e:{}}},g5jc:function(t,e,n){"use strict";n.d(e,"c",function(){return l}),n.d(e,"b",function(){return h}),n.d(e,"a",function(){return f});var r=n("TToO"),i=n("YaPU"),o=n("OVmG"),s=n("VwZZ"),a=n("x6VL"),u=n("1Bqh"),c=n("tLDX"),l=function(t){function e(e){t.call(this,e),this.destination=e}return Object(r.__extends)(e,t),e}(o.a),h=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return Object(r.__extends)(e,t),e.prototype[c.a]=function(){return new l(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),s.a.EMPTY):this.isStopped?(t.complete(),s.a.EMPTY):(this.observers.push(t),new u.a(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(i.a),f=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return Object(r.__extends)(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.a.EMPTY},e}(h)},gIN1:function(t,e,n){"use strict";e.a=function(){}},iNRZ:function(t,e,n){"use strict";function r(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=r(t[n],e[n]));return t}Object.defineProperty(e,"__esModule",{value:!0}),e.deepCopy=function(t){return r(void 0,t)},e.deepExtend=r,e.patchProperty=function(t,e,n){t[e]=n}},lAP5:function(t,e,n){"use strict";e.a=function(t){return t}},lt8x:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("ZCyv"),i=n("sA4o");e.decode=function(t){var e={},n={},o={},s="";try{var a=t.split(".");e=i.jsonEval(r.base64Decode(a[0])||""),n=i.jsonEval(r.base64Decode(a[1])||""),s=a[2],o=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:o,signature:s}},e.isValidTimestamp=function(t){var n,r,i=e.decode(t).claims,o=Math.floor((new Date).getTime()/1e3);return"object"==typeof i&&(i.hasOwnProperty("nbf")?n=i.nbf:i.hasOwnProperty("iat")&&(n=i.iat),r=i.hasOwnProperty("exp")?i.exp:n+86400),o&&n&&r&&o>=n&&o<=r},e.issuedAtTime=function(t){var n=e.decode(t).claims;return"object"==typeof n&&n.hasOwnProperty("iat")?n.iat:null},e.isValidFormat=function(t){var n=e.decode(t),r=n.claims;return!!n.signature&&!!r&&"object"==typeof r&&r.hasOwnProperty("iat")},e.isAdmin=function(t){var n=e.decode(t).claims;return"object"==typeof n&&!0===n.admin}},m4rg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("9/vk");e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var s=o-55296;r.assert(++i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},m9DX:function(t,e){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){if(t.call(r,e[i],i,e))return i;i++}return-1}})},oCQ5:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("TToO"),i=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return Object(r.__extends)(e,t),e}(Error)},r3eQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSubscribe=function(t,e){var n=new r(t,e);return n.subscribe.bind(n)};var r=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=i),void 0===r.error&&(r.error=i),void 0===r.complete&&(r.complete=i);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function i(){}e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}},sA4o:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.jsonEval=function(t){return JSON.parse(t)},e.stringify=function(t){return JSON.stringify(t)}},t7NR:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},tLDX:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("AMGY").a.Symbol,i="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber"},tZ2B:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("TToO"),i=function(t){function e(){t.apply(this,arguments)}return Object(r.__extends)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n("OVmG").a)},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};n.d(r,"audit",function(){return Zp}),n.d(r,"auditTime",function(){return ed}),n.d(r,"buffer",function(){return yf}),n.d(r,"bufferCount",function(){return gf}),n.d(r,"bufferTime",function(){return Sf}),n.d(r,"bufferToggle",function(){return Of}),n.d(r,"bufferWhen",function(){return Nf}),n.d(r,"catchError",function(){return vt}),n.d(r,"combineAll",function(){return Pf}),n.d(r,"combineLatest",function(){return yh}),n.d(r,"concat",function(){return Mf}),n.d(r,"concatAll",function(){return _t}),n.d(r,"concatMap",function(){return j}),n.d(r,"concatMapTo",function(){return jf}),n.d(r,"count",function(){return Lf}),n.d(r,"debounce",function(){return Hf}),n.d(r,"debounceTime",function(){return Gf}),n.d(r,"defaultIfEmpty",function(){return zt}),n.d(r,"delay",function(){return Yf}),n.d(r,"delayWhen",function(){return tp}),n.d(r,"dematerialize",function(){return Ff}),n.d(r,"distinct",function(){return sp}),n.d(r,"distinctUntilChanged",function(){return cp}),n.d(r,"distinctUntilKeyChanged",function(){return fp}),n.d(r,"elementAt",function(){return Cp}),n.d(r,"every",function(){return kt}),n.d(r,"exhaust",function(){return mp}),n.d(r,"exhaustMap",function(){return wp}),n.d(r,"expand",function(){return Ep}),n.d(r,"filter",function(){return An}),n.d(r,"finalize",function(){return kp}),n.d(r,"find",function(){return Dp}),n.d(r,"findIndex",function(){return jp}),n.d(r,"first",function(){return Tt}),n.d(r,"groupBy",function(){return Fp}),n.d(r,"ignoreElements",function(){return Gp}),n.d(r,"isEmpty",function(){return Xp}),n.d(r,"last",function(){return Dt}),n.d(r,"map",function(){return U}),n.d(r,"mapTo",function(){return rd}),n.d(r,"materialize",function(){return sd}),n.d(r,"max",function(){return cd}),n.d(r,"merge",function(){return ld}),n.d(r,"mergeAll",function(){return wt.a}),n.d(r,"mergeMap",function(){return M.a}),n.d(r,"flatMap",function(){return M.a}),n.d(r,"mergeMapTo",function(){return hd}),n.d(r,"mergeScan",function(){return yd}),n.d(r,"min",function(){return gd}),n.d(r,"multicast",function(){return bd.a}),n.d(r,"observeOn",function(){return at}),n.d(r,"onErrorResumeNext",function(){return Mh}),n.d(r,"pairwise",function(){return wd}),n.d(r,"partition",function(){return Ed}),n.d(r,"pluck",function(){return Td}),n.d(r,"publish",function(){return Id}),n.d(r,"publishBehavior",function(){return Cd}),n.d(r,"publishLast",function(){return Od}),n.d(r,"publishReplay",function(){return xd}),n.d(r,"race",function(){return kd}),n.d(r,"reduce",function(){return Xt}),n.d(r,"repeat",function(){return Ad}),n.d(r,"repeatWhen",function(){return Dd}),n.d(r,"retry",function(){return jd}),n.d(r,"retryWhen",function(){return Ud}),n.d(r,"refCount",function(){return xv.a}),n.d(r,"sample",function(){return qd}),n.d(r,"sampleTime",function(){return zd}),n.d(r,"scan",function(){return Vt}),n.d(r,"sequenceEqual",function(){return Xd}),n.d(r,"share",function(){return Ov.a}),n.d(r,"shareReplay",function(){return $d}),n.d(r,"single",function(){return ty}),n.d(r,"skip",function(){return ry}),n.d(r,"skipLast",function(){return sy}),n.d(r,"skipUntil",function(){return cy}),n.d(r,"skipWhile",function(){return fy}),n.d(r,"startWith",function(){return yy}),n.d(r,"switchAll",function(){return Sy}),n.d(r,"switchMap",function(){return bo}),n.d(r,"switchMapTo",function(){return Ty}),n.d(r,"take",function(){return xy}),n.d(r,"takeLast",function(){return qt}),n.d(r,"takeUntil",function(){return Ay}),n.d(r,"takeWhile",function(){return Dy}),n.d(r,"tap",function(){return pp}),n.d(r,"throttle",function(){return Ly}),n.d(r,"throttleTime",function(){return Fy}),n.d(r,"timeInterval",function(){return Wy}),n.d(r,"timeout",function(){return Qy}),n.d(r,"timeoutWith",function(){return Jy}),n.d(r,"timestamp",function(){return tv}),n.d(r,"toArray",function(){return rv}),n.d(r,"window",function(){return iv}),n.d(r,"windowCount",function(){return av}),n.d(r,"windowTime",function(){return lv}),n.d(r,"windowToggle",function(){return mv}),n.d(r,"windowWhen",function(){return wv}),n.d(r,"withLatestFrom",function(){return Ev}),n.d(r,"zip",function(){return Hh}),n.d(r,"zipAll",function(){return Cv});var i=n("WT6e"),o=n("TToO"),s=function(){},a=new i.n("Location Initialized"),u=function(){},c=new i.n("appBaseHref"),l=function(){function t(e){var n=this;this._subject=new i.l,this._platformStrategy=e;var r=this._platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(h(r)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,type:t.type})})}return t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(e,n){return void 0===n&&(n=""),this.path()==this.normalize(e+t.normalizeQueryParams(n))},t.prototype.normalize=function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,h(e)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e){void 0===e&&(e=""),this._platformStrategy.pushState(null,"",t,e)},t.prototype.replaceState=function(t,e){void 0===e&&(e=""),this._platformStrategy.replaceState(null,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)},t}();function h(t){return t.replace(/\/index.html$/,"")}var f=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return Object(o.__extends)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=l.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(u),p=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return Object(o.__extends)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return l.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+l.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(u),d=["en",[["a","p"],["AM","PM"]],[["AM","PM"],,],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",,"{1} 'at' {0}"],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],y={},v=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),m=new i.n("UseV4Plurals"),g=function(){},b=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return Object(o.__extends)(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=y[e];if(n)return n;var r=e.split("-")[0];if(n=y[r])return n;if("en"===r)return d;throw new Error('Missing locale data for the locale "'+t+'".')}(t)[17]}(e||this.locale)(t)){case v.Zero:return"zero";case v.One:return"one";case v.Two:return"two";case v.Few:return"few";case v.Many:return"many";default:return"other"}},e}(g),w=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),_=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._differ=null}return Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Object(i.Q)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){if("ngForOf"in t){var e=t.ngForOf.currentValue;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(t){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var n},t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this.ngForOf);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new w(null,e.ngForOf,-1,-1),i),s=new S(t,o);n.push(s)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),s=new S(t,o),n.push(s))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}(),S=function(t,e){this.record=t,this.view=e},E=function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.subscribe({next:e,error:function(t){throw t}})},t.prototype.dispose=function(t){t.unsubscribe()},t.prototype.onDestroy=function(t){t.unsubscribe()},t}(),T=new(function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.then(e,function(t){throw t})},t.prototype.dispose=function(t){},t.prototype.onDestroy=function(t){},t}()),I=new E,C=function(){function t(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return t.prototype.ngOnDestroy=function(){this._subscription&&this._dispose()},t.prototype.transform=function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,i.M.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)},t.prototype._subscribe=function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,function(n){return e._updateLatestValue(t,n)})},t.prototype._selectStrategy=function(e){if(Object(i._5)(e))return T;if(Object(i._4)(e))return I;throw n=t,Error("InvalidPipeArgument: '"+e+"' for pipe '"+Object(i._13)(n)+"'");var n},t.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},t.prototype._updateLatestValue=function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())},t}(),x=function(){function t(){}return t.prototype.transform=function(t){return JSON.stringify(t,null,2)},t}(),O=function(){},k=new i.n("DocumentToken"),A=n("g5jc"),N=n("x6VL"),R=function(t){function e(e){t.call(this),this._value=e}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new N.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(A.b),D=n("Veqx"),P=D.a.of,M=n("Qnch");function j(t,e){return Object(M.a)(t,e,1)}function L(t,e){return j(t,e)(this)}var V=n("OVmG");function U(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new F(t,e))}}var F=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new B(t,this.project,this.thisArg))},t}(),B=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.count=0,this.thisArg=r||this}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(V.a);function q(t,e){return U(t,e)(this)}function H(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),Object(M.a)(t,e,n)(this)}var W=n("YaPU"),z=n("BX3T"),G=n("N4j0"),K=n("cQXm"),Q=n("AMGY"),X=function(t){function e(e,n){t.call(this),this.promise=e,this.scheduler=n}return Object(o.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=this.promise,r=this.scheduler;if(null==r)this._isScalar?t.closed||(t.next(this.value),t.complete()):n.then(function(n){e.value=n,e._isScalar=!0,t.closed||(t.next(n),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){Q.a.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return r.schedule(Y,0,{value:this.value,subscriber:t})}else n.then(function(n){e.value=n,e._isScalar=!0,t.closed||t.add(r.schedule(Y,0,{value:n,subscriber:t}))},function(e){t.closed||t.add(r.schedule(J,0,{err:e,subscriber:t}))}).then(null,function(t){Q.a.setTimeout(function(){throw t})})},e}(W.a);function Y(t){var e=t.subscriber;e.closed||(e.next(t.value),e.complete())}function J(t){var e=t.subscriber;e.closed||e.error(t.err)}var Z=n("etqZ"),$=function(t){function e(e,n){if(t.call(this),this.scheduler=n,null==e)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[Z.a];if(!e&&"string"==typeof t)return new tt(t);if(!e&&void 0!==t.length)return new et(t);if(!e)throw new TypeError("object is not iterable");return t[Z.a]()}(e)}return Object(o.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.iterator,r=t.subscriber;if(t.hasError)r.error(t.error);else{var i=n.next();i.done?r.complete():(r.next(i.value),t.index=e+1,r.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var n=this.iterator,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{index:0,iterator:n,subscriber:t});for(;;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed){"function"==typeof n.return&&n.return();break}}},e}(W.a),tt=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.str=t,this.idx=e,this.len=n}return t.prototype[Z.a]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),et=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=function(e){var n,r,i=+t.length;return isNaN(i)?0:0!==i&&"number"==typeof(n=i)&&Q.a.isFinite(n)?(i=(0==(r=+i)?r:isNaN(r)?r:r<0?-1:1)*Math.floor(Math.abs(i)))<=0?0:i>nt?nt:i:i}()),this.arr=t,this.idx=e,this.len=n}return t.prototype[Z.a]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}(),nt=Math.pow(2,53)-1,rt=n("TILf"),it=n("+3/4"),ot=function(t){function e(e,n){t.call(this),this.arrayLike=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Object(o.__extends)(e,t),e.create=function(t,n){var r=t.length;return 0===r?new it.a:1===r?new rt.a(t[0],n):new e(t,n)},e.dispatch=function(t){var e=t.arrayLike,n=t.index,r=t.subscriber;r.closed||(n>=t.length?r.complete():(r.next(e[n]),t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.arrayLike,r=this.scheduler,i=n.length;if(r)return r.schedule(e.dispatch,0,{arrayLike:n,index:0,length:i,subscriber:t});for(var o=0;o<i&&!t.closed;o++)t.next(n[o]);t.complete()},e}(W.a),st=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return W.a.of(this.value);case"E":return W.a.throw(this.error);case"C":return W.a.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!=typeof e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function at(t,e){return void 0===e&&(e=0),function(n){return n.lift(new ut(t,e))}}var ut=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new ct(t,this.scheduler,this.delay))},t}(),ct=function(t){function e(e,n,r){void 0===r&&(r=0),t.call(this,e),this.scheduler=n,this.delay=r}return Object(o.__extends)(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new lt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(st.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(st.createError(t))},e.prototype._complete=function(){this.scheduleMessage(st.createComplete())},e}(V.a),lt=function(t,e){this.notification=t,this.destination=e},ht=n("+CnV"),ft=function(t){function e(e,n){t.call(this,null),this.ish=e,this.scheduler=n}return Object(o.__extends)(e,t),e.create=function(t,n){if(null!=t){if("function"==typeof t[ht.a])return t instanceof W.a&&!n?t:new e(t,n);if(Object(z.a)(t))return new D.a(t,n);if(Object(K.a)(t))return new X(t,n);if("function"==typeof t[Z.a]||"string"==typeof t)return new $(t,n);if(Object(G.a)(t))return new ot(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,n=this.scheduler;return null==n?e[ht.a]().subscribe(t):e[ht.a]().subscribe(new ct(t,n,0))},e}(W.a),pt=ft.create,dt=n("tZ2B"),yt=n("PIsA");function vt(t){return function(e){var n=new mt(t),r=e.lift(n);return n.caught=r}}var mt=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new gt(t,this.selector,this.caught))},t}(),gt=function(t){function e(e,n,r){t.call(this,e),this.selector=n,this.caught=r}return Object(o.__extends)(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(Object(yt.a)(this,n))}},e}(dt.a);function bt(t){return vt(t)(this)}var wt=n("8D5t");function _t(){return Object(wt.a)(1)}function St(){return _t()(this)}var Et=function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return Object(o.__extends)(e,t),e}(Error);function Tt(t,e,n){return function(r){return r.lift(new It(t,e,n,r))}}var It=function(){function t(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new Ct(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),Ct=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}n&&this._emit(t,e)},e.prototype._emit=function(t,e){this.resultSelector?this._tryResultSelector(t,e):this._emitFinal(t)},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this._emitFinal(n)},e.prototype._emitFinal=function(t){var e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)},e.prototype._complete=function(){var t=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||t.error(new Et):(t.next(this.defaultValue),t.complete())},e}(V.a);function xt(t,e,n){return Tt(t,e,n)(this)}var Ot=X.create;function kt(t,e){return function(n){return n.lift(new At(t,e,n))}}var At=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new Nt(t,this.predicate,this.thisArg,this.source))},t}(),Nt=function(t){function e(e,n,r,i){t.call(this,e),this.predicate=n,this.thisArg=r,this.source=i,this.index=0,this.thisArg=r||this}return Object(o.__extends)(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(V.a);function Rt(t,e){return kt(t,e)(this)}function Dt(t,e,n){return function(r){return r.lift(new Pt(t,e,n,r))}}var Pt=function(){function t(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new Mt(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),Mt=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=o,this.hasValue=!1,this.index=0,"undefined"!=typeof i&&(this.lastValue=i,this.hasValue=!0)}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.index++;if(this.predicate)this._tryPredicate(t,e);else{if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}if(n){if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this.lastValue=n,this.hasValue=!0},e.prototype._complete=function(){var t=this.destination;this.hasValue?(t.next(this.lastValue),t.complete()):t.error(new Et)},e}(V.a);function jt(t,e,n){return Dt(t,e,n)(this)}function Lt(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(wt.a)(t)(this)}function Vt(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ut(t,e,n))}}var Ut=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new Ft(t,this.accumulator,this.seed,this.hasSeed))},t}(),Ft=function(t){function e(e,n,r,i){t.call(this,e),this.accumulator=n,this._seed=r,this.hasSeed=i,this.index=0}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(V.a),Bt=function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return Object(o.__extends)(e,t),e}(Error);function qt(t){return function(e){return 0===t?new it.a:e.lift(new Ht(t))}}var Ht=function(){function t(t){if(this.total=t,this.total<0)throw new Bt}return t.prototype.call=function(t,e){return e.subscribe(new Wt(t,this.total))},t}(),Wt=function(t){function e(e,n){t.call(this,e),this.total=n,this.ring=new Array,this.count=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(V.a);function zt(t){return void 0===t&&(t=null),function(e){return e.lift(new Gt(t))}}var Gt=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new Kt(t,this.defaultValue))},t}(),Kt=function(t){function e(e,n){t.call(this,e),this.defaultValue=n,this.isEmpty=!0}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(V.a),Qt=n("f9aG");function Xt(t,e){return arguments.length>=2?function(n){return Object(Qt.a)(Vt(t,e),qt(1),zt(e))(n)}:function(e){return Object(Qt.a)(Vt(function(e,n,r){return t(e,n,r+1)}),qt(1))(e)}}function Yt(t,e){return arguments.length>=2?Xt(t,e)(this):Xt(t)(this)}var Jt=null;function Zt(){return Jt}var $t,te={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},ee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ne={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};i._1.Node&&($t=i._1.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var re,ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,Jt||(Jt=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var r;(r=t)[e].apply(r,n)},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return te},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return $t.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ne.hasOwnProperty(e)&&(e=ne[e]))}return ee[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=oe||(oe=document.querySelector("base"))?oe.getAttribute("href"):null;return null==n?null:(e=n,re||(re=document.createElement("a")),re.setAttribute("href",e),"/"===re.pathname.charAt(0)?re.pathname:"/"+re.pathname)},e.prototype.resetBaseElement=function(){oe=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return function(t,e){e=encodeURIComponent(e);for(var n=0,r=t.split(";");n<r.length;n++){var i=r[n],o=i.indexOf("="),s=-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],a=s[1];if(s[0].trim()===e)return decodeURIComponent(a)}return null}(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return Object(o.__extends)(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),oe=null,se=k;function ae(){return!!window.history.pushState}var ue=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return Object(o.__extends)(e,t),e.prototype._init=function(){this.location=Zt().getLocation(),this._history=Zt().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return Zt().getBaseHref(this._doc)},e.prototype.onPopState=function(t){Zt().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){Zt().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){ae()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){ae()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:i.m,args:[se]}]}]},e}(s),ce=function(){function t(t){this._doc=t,this._dom=Zt()}return t.prototype.addTag=function(t,e){return void 0===e&&(e=!1),t?this._getOrCreateElement(t,e):null},t.prototype.addTags=function(t,e){var n=this;return void 0===e&&(e=!1),t?t.reduce(function(t,r){return r&&t.push(n._getOrCreateElement(r,e)),t},[]):[]},t.prototype.getTag=function(t){return t&&this._dom.querySelector(this._doc,"meta["+t+"]")||null},t.prototype.getTags=function(t){if(!t)return[];var e=this._dom.querySelectorAll(this._doc,"meta["+t+"]");return e?[].slice.call(e):[]},t.prototype.updateTag=function(t,e){if(!t)return null;e=e||this._parseSelector(t);var n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)},t.prototype.removeTag=function(t){this.removeTagElement(this.getTag(t))},t.prototype.removeTagElement=function(t){t&&this._dom.remove(t)},t.prototype._getOrCreateElement=function(t,e){if(void 0===e&&(e=!1),!e){var n=this._parseSelector(t),r=this.getTag(n);if(r&&this._containsAttributes(t,r))return r}var i=this._dom.createElement("meta");this._setMetaElementAttributes(t,i);var o=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(o,i),i},t.prototype._setMetaElementAttributes=function(t,e){var n=this;return Object.keys(t).forEach(function(r){return n._dom.setAttribute(e,r,t[r])}),e},t.prototype._parseSelector=function(t){var e=t.name?"name":"property";return e+'="'+t[e]+'"'},t.prototype._containsAttributes=function(t,e){var n=this;return Object.keys(t).every(function(r){return n._dom.getAttribute(e,r)===t[r]})},t}(),le=new i.n("TRANSITION_ID"),he=[{provide:i.d,useFactory:function(t,e,n){return function(){n.get(i.e).donePromise.then(function(){var n=Zt();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[le,se,i.o],multi:!0}],fe=function(){function t(){}return t.init=function(){Object(i.S)(new t)},t.prototype.addToWindow=function(t){i._1.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i._1.getAllAngularTestabilities=function(){return t.getAllTestabilities()},i._1.getAllAngularRootElements=function(){return t.getAllRootElements()},i._1.frameworkStabilizers||(i._1.frameworkStabilizers=[]),i._1.frameworkStabilizers.push(function(t){var e=i._1.getAllAngularTestabilities(),n=e.length,r=!1,o=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?Zt().isShadowRoot(e)?this.findTestabilityInTree(t,Zt().getHost(e),!0):this.findTestabilityInTree(t,Zt().parentElement(e),!0):null},t}(),pe=function(){function t(t){this._doc=t}return t.prototype.getTitle=function(){return Zt().getTitle(this._doc)},t.prototype.setTitle=function(t){Zt().setTitle(this._doc,t)},t}();function de(t,e){"undefined"!=typeof COMPILED&&COMPILED||((i._1.ng=i._1.ng||{})[t]=e)}var ye={ApplicationRef:i.g,NgZone:i.w};function ve(t){return Object(i.P)(t)}var me=new i.n("EventManagerPlugins"),ge=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},t}(),be=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=Zt().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),we=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),_e=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return Object(o.__extends)(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return Zt().remove(t)})},e}(we),Se={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ee=/%COMP%/g,Te="_nghost-%COMP%",Ie="_ngcontent-%COMP%";function Ce(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Ce(t,i,n):(i=i.replace(Ee,t),n.push(i))}return n}function xe(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Oe=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new ke(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.L.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new De(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case i.L.Native:return new Pe(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=Ce(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),ke=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(Se[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=Se[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=Se[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&i.B.DashCase?t.style.setProperty(e,n,r&i.B.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&i.B.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){Ne(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return Ne(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,xe(n)):this.eventManager.addEventListener(t,e,xe(n))},t}(),Ae="@".charCodeAt(0);function Ne(t,e){if(t.charCodeAt(0)===Ae)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Re,De=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.component=r;var o=Ce(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=Ie.replace(Ee,r.id),i.hostAttr=Te.replace(Ee,r.id),i}return Object(o.__extends)(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(ke),Pe=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=Ce(i.id,i.styles,[]),a=0;a<s.length;a++){var u=document.createElement("style");u.textContent=s[a],o.shadowRoot.appendChild(u)}return o}return Object(o.__extends)(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(ke),Me="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},je=Me("addEventListener"),Le=Me("removeEventListener"),Ve={},Ue="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[Me("BLACK_LISTED_EVENTS")]&&(Re={});var Fe=function(t){return!!Re&&Re.hasOwnProperty(t)},Be=function(t){var e=Ve[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(s=n[0]).zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[Ue];o++){var s;(s=i[o]).zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r)}}}},qe=function(t){function e(e,n){var r=t.call(this,e)||this;return r.ngZone=n,r.patchEvent(),r}return Object(o.__extends)(e,t),e.prototype.patchEvent=function(){if(Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Ue]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this,o=n;if(!t[je]||i.w.isInAngularZone()&&!Fe(e))t.addEventListener(e,o,!1);else{var s=Ve[e];s||(s=Ve[e]=Me("ANGULAR"+e+"FALSE"));var a=t[s],u=a&&a.length>0;a||(a=t[s]=[]);var c=Fe(e)?Zone.root:Zone.current;if(0===a.length)a.push({zone:c,handler:o});else{for(var l=!1,h=0;h<a.length;h++)if(a[h].handler===o){l=!0;break}l||a.push({zone:c,handler:o})}u||t[je](e,Be,!1)}return function(){return r.removeEventListener(t,e,o)}},e.prototype.removeEventListener=function(t,e,n){var r=t[Le];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=Ve[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(t,[e,Be,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(be),He={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},We=new i.n("HammerGestureConfig"),ze=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),Ge=function(t){function e(e,n){var r=t.call(this,e)||this;return r._config=n,r}return Object(o.__extends)(e,t),e.prototype.supports=function(t){if(!He.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+t+" event");return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();return e=e.toLowerCase(),i.runOutsideAngular(function(){var o=r._config.buildHammer(t),s=function(t){i.runGuarded(function(){n(t)})};return o.on(e,s),function(){return o.off(e,s)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(be),Ke=["alt","control","meta","shift"],Qe={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Xe=function(t){function e(e){return t.call(this,e)||this}return Object(o.__extends)(e,t),e.prototype.supports=function(t){return null!=e.parseEventName(t)},e.prototype.addEventListener=function(t,n,r){var i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Zt().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=e._normalizeKey(n.pop()),o="";if(Ke.forEach(function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;var s={};return s.domEventName=r,s.fullKey=o,s},e.getEventFullKey=function(t){var e="",n=Zt().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Ke.forEach(function(r){r!=n&&(0,Qe[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,n,r){return function(i){e.getEventFullKey(i)===t&&r.runGuarded(function(){return n(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(be),Ye=function(){function t(t,e){this.defaultDoc=t,this.DOM=e;var n=this.DOM.createHtmlDocument();if(this.inertBodyElement=n.body,null==this.inertBodyElement){var r=this.DOM.createElement("html",n);this.inertBodyElement=this.DOM.createElement("body",n),this.DOM.appendChild(r,this.inertBodyElement),this.DOM.appendChild(n,r)}this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(t){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(null);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(t){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.DOM.createElement("template");return"content"in e?(this.DOM.setInnerHTML(e,t),e):(this.DOM.setInnerHTML(this.inertBodyElement,t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){var e=this;this.DOM.attributeMap(t).forEach(function(n,r){"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.DOM.removeAttribute(t,r)});for(var n=0,r=this.DOM.childNodesAsList(t);n<r.length;n++){var i=r[n];this.DOM.isElementNode(i)&&this.stripCustomNsAttrs(i)}},t}(),Je=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Ze=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $e(t){return(t=String(t)).match(Je)||t.match(Ze)?t:(Object(i.Q)()&&Zt().log("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function tn(t){for(var e={},n=0,r=t.split(",");n<r.length;n++)e[r[n]]=!0;return e}function en(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];for(var s in o)o.hasOwnProperty(s)&&(n[s]=!0)}return n}var nn,rn=tn("area,br,col,hr,img,wbr"),on=tn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),sn=tn("rp,rt"),an=en(sn,on),un=en(rn,en(on,tn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),en(sn,tn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),an),cn=tn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ln=tn("srcset"),hn=en(cn,ln,tn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),fn=function(){function t(){this.sanitizedSomething=!1,this.buf=[],this.DOM=Zt()}return t.prototype.sanitizeChildren=function(t){for(var e=this.DOM.firstChild(t);e;)if(this.DOM.isElementNode(e)?this.startElement(e):this.DOM.isTextNode(e)?this.chars(this.DOM.nodeValue(e)):this.sanitizedSomething=!0,this.DOM.firstChild(e))e=this.DOM.firstChild(e);else for(;e;){this.DOM.isElementNode(e)&&this.endElement(e);var n=this.checkClobberedElement(e,this.DOM.nextSibling(e));if(n){e=n;break}e=this.checkClobberedElement(e,this.DOM.parentElement(e))}return this.buf.join("")},t.prototype.startElement=function(t){var e=this,n=this.DOM.nodeName(t).toLowerCase();un.hasOwnProperty(n)?(this.buf.push("<"),this.buf.push(n),this.DOM.attributeMap(t).forEach(function(t,n){var r,i=n.toLowerCase();hn.hasOwnProperty(i)?(cn[i]&&(t=$e(t)),ln[i]&&(r=t,t=(r=String(r)).split(",").map(function(t){return $e(t.trim())}).join(", ")),e.buf.push(" "),e.buf.push(n),e.buf.push('="'),e.buf.push(yn(t)),e.buf.push('"')):e.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=this.DOM.nodeName(t).toLowerCase();un.hasOwnProperty(e)&&!rn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(yn(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&this.DOM.contains(t,e))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(t));return e},t}(),pn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dn=/([^\#-~ |!])/g;function yn(t){return t.replace(/&/g,"&amp;").replace(pn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(dn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var vn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),mn=/^url\(([^)]+)\)$/,gn=function(){},bn=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return Object(o.__extends)(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case i.D.NONE:return e;case i.D.HTML:return e instanceof _n?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=Zt(),r=null;try{nn=nn||new Ye(t,n);var o=e?String(e):"";r=nn.getInertBodyElement(o);var s=5,a=o;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,o=a,a=n.getInnerHTML(r),r=nn.getInertBodyElement(o)}while(o!==a);var u=new fn,c=u.sanitizeChildren(n.getTemplateContent(r)||r);return Object(i.Q)()&&u.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),c}finally{if(r)for(var l=n.getTemplateContent(r)||r,h=0,f=n.childNodesAsList(l);h<f.length;h++)n.removeChild(l,f[h])}}(this._doc,String(e)));case i.D.STYLE:return e instanceof Sn?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(mn);return e&&$e(e[1])===e[1]||t.match(vn)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Object(i.Q)()&&Zt().log("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case i.D.SCRIPT:if(e instanceof En)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case i.D.URL:return e instanceof In||e instanceof Tn?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),$e(String(e)));case i.D.RESOURCE_URL:if(e instanceof In)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof wn)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new _n(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new Sn(t)},e.prototype.bypassSecurityTrustScript=function(t){return new En(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new Tn(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new In(t)},e}(gn),wn=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),_n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(wn),Sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getTypeName=function(){return"Style"},e}(wn),En=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getTypeName=function(){return"Script"},e}(wn),Tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getTypeName=function(){return"URL"},e}(wn),In=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(wn),Cn=[{provide:i.y,useValue:"browser"},{provide:i.z,useValue:function(){ie.makeCurrent(),fe.init()},multi:!0},{provide:s,useClass:ue,deps:[se]},{provide:se,useFactory:function(){return document},deps:[]}],xn=Object(i.N)(i.R,"browser",Cn);function On(){return new i.k}var kn=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.withServerTransition=function(e){return{ngModule:t,providers:[{provide:i.c,useValue:e.appId},{provide:le,useExisting:i.c},he]}},t}();function An(t,e){return function(n){return n.lift(new Nn(t,e))}}"undefined"!=typeof window&&window;var Nn=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Rn(t,this.predicate,this.thisArg))},t}(),Rn=function(t){function e(e,n,r){t.call(this,e),this.predicate=n,this.thisArg=r,this.count=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(V.a);function Dn(t,e){return An(t,e)(this)}var Pn=function(t,e){this.id=t,this.url=e},Mn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},e}(Pn),jn=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},e}(Pn),Ln=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.reason=r,i}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},e}(Pn),Vn=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.error=r,i}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},e}(Pn),Un=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Pn),Fn=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Pn),Bn=function(t){function e(e,n,r,i,o){var s=t.call(this,e,n)||this;return s.urlAfterRedirects=r,s.state=i,s.shouldActivate=o,s}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},e}(Pn),qn=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Pn),Hn=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Pn),Wn=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},t}(),zn=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},t}(),Gn=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Kn=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Qn=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Xn=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Yn="primary",Jn=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}();function Zn(t){return new Jn(t)}function $n(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}var tr=function(t,e){this.routes=t,this.module=e};function er(t,e){void 0===e&&(e="");for(var n=0;n<t.length;n++){var r=t[n];nr(r,rr(e,r))}}function nr(t,e){if(!t)throw new Error("\n      Invalid configuration of route '"+e+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(t))throw new Error("Invalid configuration of route '"+e+"': Array cannot be specified");if(!t.component&&t.outlet&&t.outlet!==Yn)throw new Error("Invalid configuration of route '"+e+"': a componentless route cannot have a named outlet set");if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '"+e+"': redirectTo and children cannot be used together");if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': redirectTo and loadChildren cannot be used together");if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': children and loadChildren cannot be used together");if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '"+e+"': redirectTo and component cannot be used together");if(t.path&&t.matcher)throw new Error("Invalid configuration of route '"+e+"': path and matcher cannot be used together");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '"+e+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '"+e+"': routes must have either a path or a matcher specified");if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '"+e+"': path cannot start with a slash");if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \""+e+'", redirectTo: "'+t.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '"+e+"': pathMatch can only be set to 'prefix' or 'full'");t.children&&er(t.children,e)}function rr(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:t+"/"+e.path:"":t}function ir(t){var e=t.children&&t.children.map(ir);return e?Object(o.__assign)({},t,{children:e}):Object(o.__assign)({},t)}function or(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(t[n=r[o]]!==e[n])return!1;return!0}function sr(t){return Array.prototype.concat.apply([],t)}function ar(t){return t.length>0?t[t.length-1]:null}function ur(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function cr(t){var e=Lt.call(t);return Rt.call(e,function(t){return!0===t})}function lr(t){return Object(i._4)(t)?t:Object(i._5)(t)?Ot(Promise.resolve(t)):P(t)}function hr(t,e,n){return n?function(t,e){return or(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!yr(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!yr(s=n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!yr(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var s=i.slice(0,n.segments.length),a=i.slice(n.segments.length);return!!yr(n.segments,s)&&!!n.children[Yn]&&e(n.children[Yn],r,a)}(e,n,n.segments)}(t.root,e.root)}var fr=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return br.serialize(this)},t}(),pr=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,ur(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return wr(this)},t}(),dr=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=Zn(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return Cr(this)},t}();function yr(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function vr(t,e){var n=[];return ur(t.children,function(t,r){r===Yn&&(n=n.concat(e(t,r)))}),ur(t.children,function(t,r){r!==Yn&&(n=n.concat(e(t,r)))}),n}var mr=function(){},gr=function(){function t(){}return t.prototype.parse=function(t){var e=new Nr(t);return new fr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e,n;return"/"+function t(e,n){if(!e.hasChildren())return wr(e);if(n){var r=e.children[Yn]?t(e.children[Yn],!1):"",i=[];return ur(e.children,function(e,n){n!==Yn&&i.push(n+":"+t(e,!1))}),i.length>0?r+"("+i.join("//")+")":r}var o=vr(e,function(n,r){return r===Yn?[t(e.children[Yn],!1)]:[r+":"+t(n,!1)]});return wr(e)+"/("+o.join("//")+")"}(t.root,!0)+(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return Sr(t)+"="+Sr(e)}).join("&"):Sr(t)+"="+Sr(n)})).length?"?"+n.join("&"):"")+("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"")},t}(),br=new gr;function wr(t){return t.segments.map(function(t){return Cr(t)}).join("/")}function _r(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sr(t){return _r(t).replace(/%3B/gi,";")}function Er(t){return _r(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tr(t){return decodeURIComponent(t)}function Ir(t){return Tr(t.replace(/\+/g,"%20"))}function Cr(t){return""+Er(t.path)+(e=t.parameters,Object.keys(e).map(function(t){return";"+Er(t)+"="+Er(e[t])}).join(""));var e}var xr=/^[^\/()?;=&#]+/;function Or(t){var e=t.match(xr);return e?e[0]:""}var kr=/^[^=?&#]+/,Ar=/^[^?&#]+/,Nr=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pr([],{}):new pr([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t},t.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},t.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Yn]=new pr(t,e)),n},t.prototype.parseSegment=function(){var t=Or(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(t),new dr(Tr(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=Or(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=Or(this.remaining);r&&this.capture(n=r)}t[Tr(e)]=Tr(n)}},t.prototype.parseQueryParam=function(t){var e,n=(e=this.remaining.match(kr))?e[0]:"";if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var i=function(t){var e=t.match(Ar);return e?e[0]:""}(this.remaining);i&&this.capture(r=i)}var o=Ir(n),s=Ir(r);if(t.hasOwnProperty(o)){var a=t[o];Array.isArray(a)||(t[o]=a=[a]),a.push(s)}else t[o]=s}},t.prototype.parseParens=function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Or(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Yn);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o[Yn]:new pr([],o),this.consumeOptional("//")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected "'+t+'".')},t}(),Rr=function(t){this.segmentGroup=t||null},Dr=function(t){this.urlTree=t};function Pr(t){return new W.a(function(e){return e.error(new Rr(t))})}function Mr(t){return new W.a(function(e){return e.error(new Dr(t))})}function jr(t){return new W.a(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+t+"'"))})}var Lr=function(){function t(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.u)}return t.prototype.apply=function(){var t=this,e=this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Yn),n=q.call(e,function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)});return bt.call(n,function(e){if(e instanceof Dr)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Rr)throw t.noMatchError(e);throw e})},t.prototype.match=function(t){var e=this,n=this.expandSegmentGroup(this.ngModule,this.config,t.root,Yn),r=q.call(n,function(n){return e.createUrlTree(n,t.queryParams,t.fragment)});return bt.call(r,function(t){if(t instanceof Rr)throw e.noMatchError(t);throw t})},t.prototype.noMatchError=function(t){return new Error("Cannot match any routes. URL Segment: '"+t.segmentGroup+"'")},t.prototype.createUrlTree=function(t,e,n){var r,i=t.segments.length>0?new pr([],((r={})[Yn]=t,r)):t;return new fr(i,e,n)},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?q.call(this.expandChildren(t,e,n),function(t){return new pr([],t)}):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return P({});var o=[],s=[],a={};ur(n,function(n,i){var u=q.call(r.expandSegmentGroup(t,e,n,i),function(t){return a[i]=t});i===Yn?o.push(u):s.push(u)});var u=St.call(P.apply(void 0,o.concat(s))),c=jt.call(u);return q.call(c,function(){return a})}(n.children)},t.prototype.expandSegment=function(t,e,n,r,i,o){var s=this,a=P.apply(void 0,n),u=q.call(a,function(a){var u=s.expandSegmentAgainstRoute(t,e,n,a,r,i,o);return bt.call(u,function(t){if(t instanceof Rr)return P(null);throw t})}),c=St.call(u),l=xt.call(c,function(t){return!!t});return bt.call(l,function(t,n){if(t instanceof Et||"EmptyError"===t.name){if(s.noLeftoversInUrl(e,r,i))return P(new pr([],{}));throw new Rr(e)}throw t})},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,i,o,s){return Br(r)!==o?Pr(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Pr(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Mr(o):H.call(this.lineralizeSegments(n,o),function(n){var o=new pr(n,{});return i.expandSegment(t,o,e,n,r,!1)})},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){var s=this,a=Vr(e,r,i),u=a.consumedSegments,c=a.lastChild,l=a.positionalParamSegments;if(!a.matched)return Pr(e);var h=this.applyRedirectCommands(u,r.redirectTo,l);return r.redirectTo.startsWith("/")?Mr(h):H.call(this.lineralizeSegments(r,h),function(r){return s.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)})},t.prototype.matchSegmentAgainstRoute=function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?q.call(this.configLoader.load(t.injector,n),function(t){return n._loadedConfig=t,new pr(r,{})}):P(new pr(r,{}));var s=Vr(e,n,r),a=s.consumedSegments,u=s.lastChild;if(!s.matched)return Pr(e);var c=r.slice(u),l=this.getChildConfig(t,n);return H.call(l,function(t){var n=t.module,r=t.routes,s=function(t,e,n,r){return n.length>0&&function(t,e,n){return r.some(function(n){return Fr(t,e,n)&&Br(n)!==Yn})}(t,n)?{segmentGroup:Ur(new pr(e,function(t,e){var n={};n[Yn]=e;for(var r=0,i=t;r<i.length;r++){var o=i[r];""===o.path&&Br(o)!==Yn&&(n[Br(o)]=new pr([],{}))}return n}(r,new pr(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return r.some(function(n){return Fr(t,e,n)})}(t,n)?{segmentGroup:Ur(new pr(t.segments,function(t,e,n,i){for(var s={},a=0,u=r;a<u.length;a++){var c=u[a];Fr(t,e,c)&&!i[Br(c)]&&(s[Br(c)]=new pr([],{}))}return Object(o.__assign)({},i,s)}(t,n,0,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,a,c,r),u=s.segmentGroup,l=s.slicedSegments;if(0===l.length&&u.hasChildren()){var h=i.expandChildren(n,r,u);return q.call(h,function(t){return new pr(a,t)})}if(0===r.length&&0===l.length)return P(new pr(a,{}));var f=i.expandSegment(n,u,r,l,Yn,!0);return q.call(f,function(t){return new pr(a.concat(t.segments),t.children)})})},t.prototype.getChildConfig=function(t,e){var n=this;return e.children?P(new tr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?P(e._loadedConfig):H.call(function(t,e){var n=e.canLoad;return n&&0!==n.length?cr(q.call(pt(n),function(n){var r=t.get(n);return lr(r.canLoad?r.canLoad(e):r(e))})):P(!0)}(t.injector,e),function(r){return r?q.call(n.configLoader.load(t.injector,e),function(t){return e._loadedConfig=t,t}):function(t){return new W.a(function(e){return e.error(((n=Error("NavigationCancelingError: Cannot load children because the guard of the route \"path: '"+t.path+"'\" returned false")).ngNavigationCancelingError=!0,n));var n})}(e)}):P(new tr([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return P(n);if(r.numberOfChildren>1||!r.children[Yn])return jr(t.redirectTo);r=r.children[Yn]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new fr(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return ur(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),s={};return ur(e.children,function(e,o){s[o]=i.createSegmentGroup(t,e,n,r)}),new pr(o,s)},t.prototype.createSegments=function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '"+t+"'. Cannot find '"+e.path+"'.");return r},t.prototype.findOrReturn=function(t,e){for(var n=0,r=0,i=e;r<i.length;r++){var o=i[r];if(o.path===t.path)return e.splice(n),o;n++}return t},t}();function Vr(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||$n)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Ur(t){if(1===t.numberOfChildren&&t.children[Yn]){var e=t.children[Yn];return new pr(t.segments.concat(e.segments),e.children)}return t}function Fr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Br(t){return t.outlet||Yn}var qr=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=Hr(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=Hr(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=Wr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return Wr(t,this._root).map(function(t){return t.value})},t}();function Hr(t,e){if(t===e.value)return e;for(var n=0,r=e.children;n<r.length;n++){var i=Hr(t,r[n]);if(i)return i}return null}function Wr(t,e){if(t===e.value)return[e];for(var n=0,r=e.children;n<r.length;n++){var i=Wr(t,r[n]);if(i.length)return i.unshift(e),i}return[]}var zr=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return"TreeNode("+this.value+")"},t}();function Gr(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var Kr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.snapshot=n,$r(r,e),r}return Object(o.__extends)(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(qr);function Qr(t,e){var n=function(t,e){var n=new Jr([],{},{},"",{},Yn,e,null,t.root,-1,{});return new Zr("",new zr(n,[]))}(t,e),r=new R([new dr("",{})]),i=new R({}),o=new R({}),s=new R({}),a=new R(""),u=new Xr(r,i,s,a,o,Yn,e,n.root);return u.snapshot=n.root,new Kr(new zr(u,[]),n)}var Xr=function(){function t(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=q.call(this.params,function(t){return Zn(t)})),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=q.call(this.queryParams,function(t){return Zn(t)})),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},t}();function Yr(t,e){void 0===e&&(e="emptyOnly");var n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function(t){return t.reduce(function(t,e){return{params:Object(o.__assign)({},t.params,e.params),data:Object(o.__assign)({},t.data,e.data),resolve:Object(o.__assign)({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Jr=function(){function t(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}return Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=Zn(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Route(url:'"+this.url.map(function(t){return t.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},t}(),Zr=function(t){function e(e,n){var r=t.call(this,n)||this;return r.url=e,$r(r,n),r}return Object(o.__extends)(e,t),e.prototype.toString=function(){return ti(this._root)},e}(qr);function $r(t,e){e.value._routerState=t,e.children.forEach(function(e){return $r(t,e)})}function ti(t){var e=t.children.length>0?" { "+t.children.map(ti).join(", ")+" } ":"";return""+t.value+e}function ei(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,or(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),or(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!or(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),or(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ni(t,e){var n,r;return or(t.params,e.params)&&yr(n=t.url,r=e.url)&&n.every(function(t,e){return or(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||ni(t.parent,e.parent))}function ri(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ii(t,e,n,r,i){var o={};return r&&ur(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return""+t}):""+t}),new fr(n.root===t?e:function t(e,n,r){var i={};return ur(e.children,function(e,o){i[o]=e===n?r:t(e,n,r)}),new pr(e.segments,i)}(n.root,t,e),o,i)}var oi=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ri(n[0]))throw new Error("Root segment cannot have matrix parameters");var r=n.find(function(t){return"object"==typeof t&&null!=t&&t.outlets});if(r&&r!==ar(n))throw new Error("{outlets:{}} has to be the last command")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},t}(),si=function(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n};function ai(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[Yn]:""+t}function ui(t,e,n){if(t||(t=new pr([],{})),0===t.segments.length&&t.hasChildren())return ci(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var s=t.segments[i],a=ai(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!pi(a,u,s))return o;r+=2}else{if(!pi(a,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new pr(t.segments.slice(0,r.pathIndex),{});return o.children[Yn]=new pr(t.segments.slice(r.pathIndex),t.children),ci(o,0,i)}return r.match&&0===i.length?new pr(t.segments,{}):r.match&&!t.hasChildren()?li(t,e,n):r.match?ci(t,0,i):li(t,e,n)}function ci(t,e,n){if(0===n.length)return new pr(t.segments,{});var r=function(t){return"object"!=typeof t[0]?((e={})[Yn]=t,e):void 0===t[0].outlets?((n={})[Yn]=t,n):t[0].outlets;var e,n}(n),i={};return ur(r,function(n,r){null!==n&&(i[r]=ui(t.children[r],e,n))}),ur(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new pr(t.segments,i)}function li(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=hi(n[i].outlets);return new pr(r,o)}if(0===i&&ri(n[0]))r.push(new dr(t.segments[e].path,n[0])),i++;else{var s=ai(n[i]),a=i<n.length-1?n[i+1]:null;s&&a&&ri(a)?(r.push(new dr(s,fi(a))),i+=2):(r.push(new dr(s,{})),i++)}}return new pr(r,{})}function hi(t){var e={};return ur(t,function(t,n){null!==t&&(e[n]=li(new pr([],{}),0,t))}),e}function fi(t){var e={};return ur(t,function(t,n){return e[n]=""+t}),e}function pi(t,e,n){return t==n.path&&or(e,n.parameters)}var di=function(t){this.path=t,this.route=this.path[this.path.length-1]},yi=function(t,e){this.component=t,this.route=e},vi=function(){function t(t,e,n,r){this.future=t,this.curr=e,this.moduleInjector=n,this.forwardEvent=r,this.canActivateChecks=[],this.canDeactivateChecks=[]}return t.prototype.initialize=function(t){var e=this.future._root;this.setupChildRouteGuards(e,this.curr?this.curr._root:null,t,[e.value])},t.prototype.checkGuards=function(){var t=this;if(!this.isDeactivating()&&!this.isActivating())return P(!0);var e=this.runCanDeactivateChecks();return H.call(e,function(e){return e?t.runCanActivateChecks():P(!1)})},t.prototype.resolveData=function(t){var e=this;if(!this.isActivating())return P(null);var n=pt(this.canActivateChecks),r=L.call(n,function(n){return e.runResolve(n.route,t)});return Yt.call(r,function(t,e){return t})},t.prototype.isDeactivating=function(){return 0!==this.canDeactivateChecks.length},t.prototype.isActivating=function(){return 0!==this.canActivateChecks.length},t.prototype.setupChildRouteGuards=function(t,e,n,r){var i=this,o=Gr(e);t.children.forEach(function(t){i.setupRouteGuards(t,o[t.value.outlet],n,r.concat([t.value])),delete o[t.value.outlet]}),ur(o,function(t,e){return i.deactivateRouteAndItsChildren(t,n.getContext(e))})},t.prototype.setupRouteGuards=function(t,e,n,r){var i=t.value,o=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){var a=this.shouldRunGuardsAndResolvers(o,i,i.routeConfig.runGuardsAndResolvers);a?this.canActivateChecks.push(new di(r)):(i.data=o.data,i._resolvedData=o._resolvedData),this.setupChildRouteGuards(t,e,i.component?s?s.children:null:n,r),a&&this.canDeactivateChecks.push(new yi(s.outlet.component,o))}else o&&this.deactivateRouteAndItsChildren(e,s),this.canActivateChecks.push(new di(r)),this.setupChildRouteGuards(t,null,i.component?s?s.children:null:n,r)},t.prototype.shouldRunGuardsAndResolvers=function(t,e,n){switch(n){case"always":return!0;case"paramsOrQueryParamsChange":return!ni(t,e)||!or(t.queryParams,e.queryParams);case"paramsChange":default:return!ni(t,e)}},t.prototype.deactivateRouteAndItsChildren=function(t,e){var n=this,r=Gr(t),i=t.value;ur(r,function(t,r){n.deactivateRouteAndItsChildren(t,i.component?e?e.children.getContext(r):null:e)}),this.canDeactivateChecks.push(new yi(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))},t.prototype.runCanDeactivateChecks=function(){var t=this,e=pt(this.canDeactivateChecks),n=H.call(e,function(e){return t.runCanDeactivate(e.component,e.route)});return Rt.call(n,function(t){return!0===t})},t.prototype.runCanActivateChecks=function(){var t=this,e=pt(this.canActivateChecks),n=L.call(e,function(e){return cr(pt([t.fireChildActivationStart(e.route.parent),t.fireActivationStart(e.route),t.runCanActivateChild(e.path),t.runCanActivate(e.route)]))});return Rt.call(n,function(t){return!0===t})},t.prototype.fireActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new Qn(t)),P(!0)},t.prototype.fireChildActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new Gn(t)),P(!0)},t.prototype.runCanActivate=function(t){var e=this,n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?cr(q.call(pt(n),function(n){var r,i=e.getToken(n,t);return r=lr(i.canActivate?i.canActivate(t,e.future):i(t,e.future)),xt.call(r)})):P(!0)},t.prototype.runCanActivateChild=function(t){var e=this,n=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(function(t){return e.extractCanActivateChild(t)}).filter(function(t){return null!==t});return cr(q.call(pt(r),function(t){return cr(q.call(pt(t.guards),function(r){var i,o=e.getToken(r,t.node);return i=lr(o.canActivateChild?o.canActivateChild(n,e.future):o(n,e.future)),xt.call(i)}))}))},t.prototype.extractCanActivateChild=function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null},t.prototype.runCanDeactivate=function(t,e){var n=this,r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!r||0===r.length)return P(!0);var i=H.call(pt(r),function(r){var i,o=n.getToken(r,e);return i=lr(o.canDeactivate?o.canDeactivate(t,e,n.curr,n.future):o(t,e,n.curr,n.future)),xt.call(i)});return Rt.call(i,function(t){return!0===t})},t.prototype.runResolve=function(t,e){return q.call(this.resolveNode(t._resolve,t),function(n){return t._resolvedData=n,t.data=Object(o.__assign)({},t.data,Yr(t,e).resolve),null})},t.prototype.resolveNode=function(t,e){var n=this,r=Object.keys(t);if(0===r.length)return P({});if(1===r.length){var i=r[0];return q.call(this.getResolver(t[i],e),function(t){return(e={})[i]=t,e;var e})}var o={},s=H.call(pt(r),function(r){return q.call(n.getResolver(t[r],e),function(t){return o[r]=t,t})});return q.call(jt.call(s),function(){return o})},t.prototype.getResolver=function(t,e){var n=this.getToken(t,e);return lr(n.resolve?n.resolve(e,this.future):n(e,this.future))},t.prototype.getToken=function(t,e){var n=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(n?n.module.injector:this.moduleInjector).get(t)},t}(),mi=function(){},gi=function(){function t(t,e,n,r,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i}return t.prototype.recognize=function(){try{var t=_i(this.urlTree.root,[],[],this.config).segmentGroup,e=this.processSegmentGroup(this.config,t,Yn),n=new Jr([],Object.freeze({}),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,{},Yn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new zr(n,e),i=new Zr(this.url,r);return this.inheritParamsAndData(i._root),P(i)}catch(t){return new W.a(function(e){return e.error(t)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,r=Yr(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n,r=this,i=vr(e,function(e,n){return r.processSegmentGroup(t,e,n)});return n={},i.forEach(function(t){var e=n[t.value.outlet];if(e){var r=e.url.map(function(t){return t.toString()}).join("/"),i=t.value.url.map(function(t){return t.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+i+"'.")}n[t.value.outlet]=t.value}),i.sort(function(t,e){return t.value.outlet===Yn?-1:e.value.outlet===Yn?1:t.value.outlet.localeCompare(e.value.outlet)}),i},t.prototype.processSegment=function(t,e,n,r){for(var i=0,o=t;i<o.length;i++){var s=o[i];try{return this.processSegmentAgainstRoute(s,e,n,r)}catch(t){if(!(t instanceof mi))throw t}}if(this.noLeftoversInUrl(e,n,r))return[];throw new mi},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,r){if(t.redirectTo)throw new mi;if((t.outlet||Yn)!==r)throw new mi;var i,s=[],a=[];if("**"===t.path){var u=n.length>0?ar(n).parameters:{};i=new Jr(n,u,Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,Ti(t),r,t.component,t,bi(e),wi(e)+n.length,Ii(t))}else{var c=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new mi;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||$n)(n,t,e);if(!r)throw new mi;var i={};ur(r.posParams,function(t,e){i[e]=t.path});var s=r.consumed.length>0?Object(o.__assign)({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(e,t,n);s=c.consumedSegments,a=n.slice(c.lastChild),i=new Jr(s,c.parameters,Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,Ti(t),r,t.component,t,bi(e),wi(e)+s.length,Ii(t))}var l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),h=_i(e,s,a,l),f=h.segmentGroup,p=h.slicedSegments;if(0===p.length&&f.hasChildren()){var d=this.processChildren(l,f);return[new zr(i,d)]}if(0===l.length&&0===p.length)return[new zr(i,[])];var y=this.processSegment(l,f,p,Yn);return[new zr(i,y)]},t}();function bi(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function wi(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function _i(t,e,n,r){if(n.length>0&&function(t,e,n){return r.some(function(n){return Si(t,e,n)&&Ei(n)!==Yn})}(t,n)){var i=new pr(e,function(t,e,n,r){var i={};i[Yn]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(var o=0,s=n;o<s.length;o++){var a=s[o];if(""===a.path&&Ei(a)!==Yn){var u=new pr([],{});u._sourceSegment=t,u._segmentIndexShift=e.length,i[Ei(a)]=u}}return i}(t,e,r,new pr(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return r.some(function(n){return Si(t,e,n)})}(t,n)){var s=new pr(t.segments,function(t,e,n,i){for(var s={},a=0,u=r;a<u.length;a++){var c=u[a];if(Si(t,e,c)&&!i[Ei(c)]){var l=new pr([],{});l._sourceSegment=t,l._segmentIndexShift=t.segments.length,s[Ei(c)]=l}}return Object(o.__assign)({},i,s)}(t,n,0,t.children));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var a=new pr(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}function Si(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Ei(t){return t.outlet||Yn}function Ti(t){return t.data||{}}function Ii(t){return t.resolve||{}}var Ci=function(){},xi=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),Oi=new i.n("ROUTES"),ki=function(){function t(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}return t.prototype.load=function(t,e){var n=this;this.onLoadStartListener&&this.onLoadStartListener(e);var r=this.loadModuleFactory(e.loadChildren);return q.call(r,function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new tr(sr(i.injector.get(Oi)).map(ir),i)})},t.prototype.loadModuleFactory=function(t){var e=this;return"string"==typeof t?Ot(this.loader.load(t)):H.call(lr(t()),function(t){return t instanceof i.s?P(t):Ot(e.compiler.compileModuleAsync(t))})},t}(),Ai=function(){},Ni=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}();function Ri(t){throw t}function Di(t){return P(null)}var Pi=function(){function t(t,e,n,r,o,s,a,u){var c=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=u,this.navigations=new R(null),this.navigationId=0,this.events=new A.b,this.errorHandler=Ri,this.navigated=!1,this.hooks={beforePreactivation:Di,afterPreactivation:Di},this.urlHandlingStrategy=new Ni,this.routeReuseStrategy=new xi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.ngModule=o.get(i.u),this.resetConfig(u),this.currentUrlTree=new fr(new pr([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.configLoader=new ki(s,a,function(t){return c.triggerEvent(new Wn(t))},function(t){return c.triggerEvent(new zn(t))}),this.routerState=Qr(this.currentUrlTree,this.rootComponentType),this.processNavigations()}return t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.urlSerializer.parse(e.url),r="popstate"===e.type?"popstate":"hashchange";setTimeout(function(){t.scheduleNavigation(n,r,{replaceUrl:!0})},0)}))},Object.defineProperty(t.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),t.prototype.triggerEvent=function(t){this.events.next(t)},t.prototype.resetConfig=function(t){er(t),this.config=t.map(ir),this.navigated=!1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,r=e.queryParams,s=e.fragment,a=e.preserveQueryParams,u=e.queryParamsHandling,c=e.preserveFragment;Object(i.Q)()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var l=n||this.routerState.root,h=c?this.currentUrlTree.fragment:s,f=null;if(u)switch(u){case"merge":f=Object(o.__assign)({},this.currentUrlTree.queryParams,r);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=r||null}else f=a?this.currentUrlTree.queryParams:r||null;return null!==f&&(f=this.removeEmptyProps(f)),function(t,e,n,r,i){if(0===n.length)return ii(e.root,e.root,e,r,i);var o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new oi(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return ur(r.outlets,function(t,e){o[e]="string"==typeof t?t.split("/"):t}),t.concat([{outlets:o}])}if(r.segmentPath)return t.concat([r.segmentPath])}return"string"!=typeof r?t.concat([r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):t.concat([r])},[]);return new oi(n,e,r)}(n);if(o.toRoot())return ii(e.root,new pr([],{}),e,r,i);var s=function(t,n,r){if(t.isAbsolute)return new si(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new si(r.snapshot._urlSegment,!0,0);var i=ri(t.commands[0])?0:1;return function(e,n,o){for(var s=r.snapshot._urlSegment,a=r.snapshot._lastPathIndex+i,u=t.numberOfDoubleDots;u>a;){if(u-=a,!(s=s.parent))throw new Error("Invalid number of '../'");a=s.segments.length}return new si(s,!1,a-u)}()}(o,0,t),a=s.processChildren?ci(s.segmentGroup,s.index,o.commands):ui(s.segmentGroup,s.index,o.commands);return ii(s.segmentGroup,a,e,r,i)}(l,this.currentUrlTree,t,f,h)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1});var n=t instanceof fr?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains "+n+" segment at index "+e)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){return this.urlSerializer.parse(t)},t.prototype.isActive=function(t,e){if(t instanceof fr)return hr(this.currentUrlTree,t,e);var n=this.urlSerializer.parse(t);return hr(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!==r&&void 0!==r&&(e[n]=r),e},{})},t.prototype.processNavigations=function(){var t=this;L.call(this.navigations,function(e){return e?(t.executeScheduledNavigation(e),e.promise.catch(function(){})):P(null)}).subscribe(function(){})},t.prototype.scheduleNavigation=function(t,e,n){var r=this.navigations.value;if(r&&"imperative"!==e&&"imperative"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"hashchange"==e&&"popstate"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"popstate"==e&&"hashchange"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);var i=null,o=null,s=new Promise(function(t,e){i=t,o=e}),a=++this.navigationId;return this.navigations.next({id:a,source:e,rawUrl:t,extras:n,resolve:i,reject:o,promise:s}),s.catch(function(t){return Promise.reject(t)})},t.prototype.executeScheduledNavigation=function(t){var e=this,n=t.id,r=t.rawUrl,i=t.extras,o=t.resolve,s=t.reject,a=this.urlHandlingStrategy.extract(r),u=!this.navigated||a.toString()!==this.currentUrlTree.toString();("reload"===this.onSameUrlNavigation||u)&&this.urlHandlingStrategy.shouldProcessUrl(r)?(this.events.next(new Mn(n,this.serializeUrl(a))),Promise.resolve().then(function(t){return e.runNavigate(a,r,!!i.skipLocationChange,!!i.replaceUrl,n,null)}).then(o,s)):u&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)?(this.events.next(new Mn(n,this.serializeUrl(a))),Promise.resolve().then(function(t){return e.runNavigate(a,r,!1,!1,n,Qr(a,e.rootComponentType).snapshot)}).then(o,s)):(this.rawUrlTree=r,o(null))},t.prototype.runNavigate=function(t,e,n,r,i,o){var s=this;return i!==this.navigationId?(this.events.next(new Ln(i,this.serializeUrl(t),"Navigation ID "+i+" is not equal to the current navigation id "+this.navigationId)),Promise.resolve(!1)):new Promise(function(a,u){var c;if(o)c=P({appliedUrl:t,snapshot:o});else{var l=new Lr(s.ngModule.injector,s.configLoader,s.urlSerializer,t,s.config).apply();c=H.call(l,function(e){return q.call(function(t,e,n,r,i){return void 0===i&&(i="emptyOnly"),new gi(t,e,n,r,i).recognize()}(s.rootComponentType,s.config,e,s.serializeUrl(e),s.paramsInheritanceStrategy),function(n){return s.events.next(new Un(i,s.serializeUrl(t),s.serializeUrl(e),n)),{appliedUrl:e,snapshot:n}})})}var h,f=H.call(c,function(t){return q.call(s.hooks.beforePreactivation(t.snapshot),function(){return t})}),p=q.call(f,function(t){var e=t.appliedUrl,n=t.snapshot;return(h=new vi(n,s.routerState.snapshot,s.ngModule.injector,function(t){return s.triggerEvent(t)})).initialize(s.rootContexts),{appliedUrl:e,snapshot:n}}),d=H.call(p,function(e){var n=e.appliedUrl,r=e.snapshot;return s.navigationId!==i?P(!1):(s.triggerEvent(new Fn(i,s.serializeUrl(t),n,r)),q.call(h.checkGuards(),function(e){return s.triggerEvent(new Bn(i,s.serializeUrl(t),n,r,e)),{appliedUrl:n,snapshot:r,shouldActivate:e}}))}),y=H.call(d,function(e){return s.navigationId!==i?P(!1):e.shouldActivate&&h.isActivating()?(s.triggerEvent(new qn(i,s.serializeUrl(t),e.appliedUrl,e.snapshot)),q.call(h.resolveData(s.paramsInheritanceStrategy),function(){return s.triggerEvent(new Hn(i,s.serializeUrl(t),e.appliedUrl,e.snapshot)),e})):P(e)}),v=H.call(y,function(t){return q.call(s.hooks.afterPreactivation(t.snapshot),function(){return t})}),m=q.call(v,function(t){var e,n,r,i=t.appliedUrl,o=t.shouldActivate;return o?{appliedUrl:i,state:(r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){(a=r.value)._futureSnapshot=n.value;var i=function(e,n,r){return n.children.map(function(n){for(var i=0,o=r.children;i<o.length;i++){var s=o[i];if(e.shouldReuseRoute(s.value.snapshot,n.value))return t(e,n,s)}return t(e,n)})}(e,n,r);return new zr(a,i)}if(e.retrieve(n.value)){var o=e.retrieve(n.value).route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,o),o}var s,a=new Xr(new R((s=n.value).url),new R(s.params),new R(s.queryParams),new R(s.fragment),new R(s.data),s.outlet,s.component,s);return i=n.children.map(function(n){return t(e,n)}),new zr(a,i)}(s.routeReuseStrategy,(e=t.snapshot)._root,(n=s.routerState)?n._root:void 0),new Kr(r,e)),shouldActivate:o}:{appliedUrl:i,state:null,shouldActivate:o}});s.activateRoutes(m,s.routerState,s.currentUrlTree,i,t,e,n,r,a,u)})},t.prototype.activateRoutes=function(t,e,n,r,i,o,s,a,u,c){var l,h=this;t.forEach(function(t){var n=t.state;if(t.shouldActivate&&r===h.navigationId){if(h.currentUrlTree=t.appliedUrl,h.rawUrlTree=h.urlHandlingStrategy.merge(h.currentUrlTree,o),h.routerState=n,!s){var i=h.urlSerializer.serialize(h.rawUrlTree);h.location.isCurrentPathEqualTo(i)||a?h.location.replaceState(i):h.location.go(i)}new Mi(h.routeReuseStrategy,n,e,function(t){return h.triggerEvent(t)}).activate(h.rootContexts),l=!0}else l=!1}).then(function(){l?(h.navigated=!0,h.events.next(new jn(r,h.serializeUrl(i),h.serializeUrl(h.currentUrlTree))),u(!0)):(h.resetUrlToCurrentUrlTree(),h.events.next(new Ln(r,h.serializeUrl(i),"")),u(!1))},function(t){if((s=t)&&s.ngNavigationCancelingError)h.navigated=!0,h.resetStateAndUrl(e,n,o),h.events.next(new Ln(r,h.serializeUrl(i),t.message)),u(!1);else{h.resetStateAndUrl(e,n,o),h.events.next(new Vn(r,h.serializeUrl(i),t));try{u(h.errorHandler(t))}catch(t){c(t)}}var s})},t.prototype.resetStateAndUrl=function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},t.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree))},t}(),Mi=function(){function t(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ei(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var r=this,i=Gr(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),ur(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=Gr(t),o=t.value.component?r.children:e;ur(i,function(t,e){return n.deactivateRouteAndItsChildren(t,o)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var r=this,i=Gr(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Xn(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Kn(t.value.snapshot))},t.prototype.activateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(ei(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component)if(o=n.getOrCreateContext(r.outlet),this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),ji(s.route)}else{var a=function(t){for(var e=r.snapshot.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),u=a?a.module.componentFactoryResolver:null;o.route=r,o.resolver=u,o.outlet&&o.outlet.activateWith(r,u),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)},t}();function ji(t){ei(t.value),t.children.forEach(ji)}var Li=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Vi,this.attachRef=null}}(),Vi=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new Li,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),Ui=function(){function t(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.l,this.deactivateEvents=new i.l,this.name=r||Yn,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Fi(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},t}(),Fi=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===Xr?this.route:t===Vi?this.childContexts:this.parent.get(t,e)},t}(),Bi=function(){},qi=function(){function t(){}return t.prototype.preload=function(t,e){return bt.call(e(),function(){return P(null)})},t}(),Hi=function(){function t(){}return t.prototype.preload=function(t,e){return P(null)},t}(),Wi=function(){function t(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ki(e,n,function(e){return t.triggerEvent(new Wn(e))},function(e){return t.triggerEvent(new zn(e))})}return t.prototype.setUpPreloading=function(){var t=this,e=Dn.call(this.router.events,function(t){return t instanceof jn});this.subscription=L.call(e,function(){return t.preload()}).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get(i.u);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var s=o._loadedConfig;n.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?n.push(this.preloadConfig(t,o)):o.children&&n.push(this.processRoutes(t,o.children))}return Lt.call(pt(n))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){var r=n.loader.load(t.injector,e);return H.call(r,function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})})},t}(),zi=new i.n("ROUTER_CONFIGURATION"),Gi=new i.n("ROUTER_FORROOT_GUARD"),Ki=[l,{provide:mr,useClass:gr},{provide:Pi,useFactory:$i,deps:[i.g,mr,Vi,l,i.o,i.t,i.i,Oi,zi,[Ai,new i.x],[Ci,new i.x]]},Vi,{provide:Xr,useFactory:to,deps:[Pi]},{provide:i.t,useClass:i.F},Wi,Hi,qi,{provide:zi,useValue:{enableTracing:!1}}];function Qi(){return new i.v("Router",Pi)}var Xi=function(){function t(t,e){}return t.forRoot=function(e,n){return{ngModule:t,providers:[Ki,Zi(e),{provide:Gi,useFactory:Ji,deps:[[Pi,new i.x,new i.E]]},{provide:zi,useValue:n||{}},{provide:u,useFactory:Yi,deps:[s,[new i.m(c),new i.x],zi]},{provide:Bi,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Hi},{provide:i.v,multi:!0,useFactory:Qi},[eo,{provide:i.d,multi:!0,useFactory:no,deps:[eo]},{provide:io,useFactory:ro,deps:[eo]},{provide:i.b,multi:!0,useExisting:io}]]}},t.forChild=function(e){return{ngModule:t,providers:[Zi(e)]}},t}();function Yi(t,e,n){return void 0===n&&(n={}),n.useHash?new f(t,e):new p(t,e)}function Ji(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Zi(t){return[{provide:i.a,multi:!0,useValue:t},{provide:Oi,multi:!0,useValue:t}]}function $i(t,e,n,r,i,o,s,a,u,c,l){void 0===u&&(u={});var h=new Pi(null,e,n,r,i,o,s,sr(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.enableTracing){var f=Zt();h.events.subscribe(function(t){f.logGroup("Router Event: "+t.constructor.name),f.log(t.toString()),f.log(t),f.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),h}function to(t){return t.routerState.root}var eo=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new A.b}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(a,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(Pi),i=t.injector.get(zi);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '"+i.initialNavigation+"'");r.hooks.afterPreactivation=function(){return t.initNavigation?P(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get(zi),n=this.injector.get(Wi),r=this.injector.get(Pi),o=this.injector.get(i.g);t===o.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),n.setUpPreloading(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation},t}();function no(t){return t.appInitializer.bind(t)}function ro(t){return t.bootstrapListener.bind(t)}var io=new i.n("Router Initializer");function oo(t,e){return void 0===e&&(e=0),at(t,e)(this)}var so=n("9eBd"),ao=new i.n("FirebaseAppConfigToken"),uo=function(){};function co(t,e){try{return e?so.default.initializeApp(t,e):so.default.initializeApp(t)}catch(t){return so.default.app("app/duplicate-app"===t.code?t.name:null)}}var lo=n("VwZZ"),ho=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return Object(o.__extends)(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),Q.a.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;Q.a.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){t.call(this)}return Object(o.__extends)(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(lo.a)),fo=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return Object(o.__extends)(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(ho),po=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return Object(o.__extends)(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}()),yo=new(function(t){function e(){t.apply(this,arguments)}return Object(o.__extends)(e,t),e}(po))(fo),vo=new i.n("FirebaseAppName"),mo=function(){function t(){}return t.initializeApp=function(e,n){return{ngModule:t,providers:[{provide:ao,useValue:e},{provide:vo,useValue:n}]}},t}(),go=function(){function t(t){this.zone=t}return t.prototype.schedule=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.zone.run(function(){return yo.schedule.apply(yo,t)})},t}();function bo(t,e){return function(n){return n.lift(new wo(t,e))}}var wo=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new _o(t,this.project,this.resultSelector))},t}(),_o=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.resultSelector=r,this.index=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=Object(yt.a)(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._tryNotifyNext(t,e,n,r):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e}(dt.a);W.a.prototype.switchMap=function(t,e){return bo(t,e)(this)},W.a.of=P,W.a.fromPromise=Ot;var So=function(){return function(t){var e=this;this.app=t,this.auth=t.auth();var n=new W.a(function(t){return{unsubscribe:e.auth.onAuthStateChanged(t)}});this.authState=oo.call(n,new go(Zone.current));var r=new W.a(function(t){return{unsubscribe:e.auth.onIdTokenChanged(t)}}).switchMap(function(t){return t?W.a.fromPromise(t.getIdToken()):W.a.of(null)});this.idToken=oo.call(r,new go(Zone.current))}}();function Eo(t){return new So(t)}n("VuKk");var To=function(){},Io=n("It2I"),Co=function(){function t(t){var e=this;this.afAuth=t,this.authState=null,this.authState=this.afAuth.authState,this.afAuth.authState.subscribe(function(t){t?(e.authId=t.uid,e.name=t.displayName):(e.authId=null,e.name=null)})}return t.prototype.googleSignIn=function(){this.afAuth.auth.signInWithPopup(new Io.auth.GoogleAuthProvider)},t.prototype.googleSignOut=function(){this.afAuth.auth.signOut()},t}(),xo=function(){function t(t,e){this.router=t,this.authService=e}return t.prototype.ngOnInit=function(){var t=this;this.authService.authState.subscribe(function(e){console.log(e),e?t.router.navigate(["matchmaking"]):console.log("Not connected")})},t.prototype.googleSignIn=function(){this.authService.googleSignIn()},t.prototype.signOut=function(){this.authService.googleSignOut()},t}(),Oo=function(){function t(){}return t.prototype.ngOnInit=function(){},t}();W.a.prototype.map=q;var ko=n("Rf9G");function Ao(t){return function(t){var e=new W.a(function(e){return{unsubscribe:t.onSnapshot(e)}});return oo.call(e,new go(Zone.current))}(t).share()}function No(t){return Ao(t).map(function(t){return{payload:t,type:"query"}})}function Ro(t){return No(t).map(function(t){return t.payload.docChanges.map(function(t){return{type:t.type,payload:t}})})}W.a.prototype.share=ko.a,W.a.prototype.filter=Dn,W.a.prototype.scan=function(t,e){return arguments.length>=2?Vt(t,e)(this):Vt(t)(this)};var Do=function(){function t(t,e){this.ref=t,this.query=e}return t.prototype.stateChanges=function(t){return t&&0!==t.length?Ro(this.query).map(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}).filter(function(t){return t.length>0}):Ro(this.query)},t.prototype.auditTrail=function(t){return this.stateChanges(t).scan(function(t,e){return t.concat(e)},[])},t.prototype.snapshotChanges=function(t){return t=function(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(t),function(t,e){return No(t).map(function(t){return t.payload.docChanges}).scan(function(t,n){return function(t,e,n){return e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.id==e.doc.id||t.splice(e.newIndex,0,e);break;case"modified":e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e);break;case"removed":t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e)},[]).map(function(t){return t.map(function(t){return{type:t.type,payload:t}})})}(this.query,t)},t.prototype.valueChanges=function(t){return No(this.query).map(function(t){return t.payload.docs.map(function(t){return t.data()})})},t.prototype.add=function(t){return this.ref.add(t)},t.prototype.doc=function(t){return new Po(this.ref.doc(t))},t}(),Po=function(){function t(t){this.ref=t}return t.prototype.set=function(t,e){return this.ref.set(t,e)},t.prototype.update=function(t){return this.ref.update(t)},t.prototype.delete=function(){return this.ref.delete()},t.prototype.collection=function(t,e){var n=jo(this.ref.collection(t),e);return new Do(n.ref,n.query)},t.prototype.snapshotChanges=function(){return Ao(this.ref).map(function(t){return{payload:t,type:"value"}})},t.prototype.valueChanges=function(){return this.snapshotChanges().map(function(t){return t.payload.exists?t.payload.data():null})},t}(),Mo=new i.n("EnablePersistenceToken");function jo(t,e){return void 0===e&&(e=function(t){return t}),{query:e(t),ref:t}}var Lo=function(){function t(t,e){this.app=t,this.firestore=t.firestore(),this.persistenceEnabled$=pt(e?t.firestore().enablePersistence().then(function(){return!0},function(){return!1}):new Promise(function(t,e){t(!1)}))}return t.prototype.collection=function(t,e){var n=jo(this.firestore.collection(t),e);return new Do(n.ref,n.query)},t.prototype.doc=function(t){var e=this.firestore.doc(t);return new Po(e)},t.prototype.createId=function(){return this.firestore.collection("_").doc().id},t}(),Vo=so.default.SDK_VERSION,Uo=[],Fo=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),Bo=Fo.INFO,qo=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case Fo.DEBUG:case Fo.VERBOSE:console.log.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case Fo.INFO:console.info.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case Fo.WARN:console.warn.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case Fo.ERROR:console.error.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},Ho=new(function(){function t(t){this.name=t,this._logLevel=Bo,this._logHandler=qo,Uo.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Fo))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,Fo.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,Fo.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,Fo.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,Fo.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,Fo.ERROR].concat(t))},t}())("@firebase/firestore"),Wo=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({});function zo(){return Ho.logLevel===Fo.DEBUG?Wo.DEBUG:Ho.logLevel===Fo.SILENT?Wo.SILENT:Wo.ERROR}function Go(t){switch(t){case Wo.DEBUG:Ho.logLevel=Fo.DEBUG;break;case Wo.ERROR:Ho.logLevel=Fo.ERROR;break;case Wo.SILENT:Ho.logLevel=Fo.SILENT;break;default:Ho.error("Firestore ("+Vo+"): Invalid value passed to `setLogLevel`")}}function Ko(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Ho.logLevel<=Fo.DEBUG){var i=n.map(Xo);Ho.debug.apply(Ho,["Firestore ("+Vo+") ["+t+"]: "+e].concat(i))}}function Qo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ho.logLevel<=Fo.ERROR){var r=e.map(Xo);Ho.error.apply(Ho,["Firestore ("+Vo+"): "+t].concat(r))}}function Xo(t){if("string"==typeof t)return t;var e=Zo.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function Yo(t){var e="FIRESTORE ("+Vo+") INTERNAL ASSERTION FAILED: "+t;throw Qo(e),new Error(e)}function Jo(t,e){t||Yo(e)}var Zo=function(){function t(){}return t.setPlatform=function(e){t.platform&&Yo("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||Yo("Platform not set"),t.platform},t}();function $o(){return Zo.getPlatform().emptyByteString}var ts={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},es=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o.__extends(e,t),e}(Error);function ns(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new es(ts.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function rs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function is(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function os(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ss(t){for(var e in Jo(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function as(t){Jo(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function us(t,e,n){if(e.length!==n)throw new es(ts.INVALID_ARGUMENT,"Function "+t+"() requires "+Ss(n,"argument")+", but was called with "+Ss(e.length,"argument")+".")}function cs(t,e,n){if(e.length<n)throw new es(ts.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Ss(n,"argument")+", but was called with "+Ss(e.length,"argument")+".")}function ls(t,e,n,r){if(e.length<n||e.length>r)throw new es(ts.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Ss(e.length,"argument")+".")}function hs(t,e,n,r){ys(t,e,_s(n)+" argument",r)}function fs(t,e,n,r){void 0!==r&&hs(t,e,n,r)}function ps(t,e,n,r){ys(t,e,n+" option",r)}function ds(t,e,n,r){void 0!==r&&ps(t,e,n,r)}function ys(t,e,n,r){if(typeof r!==e||"object"===e&&!vs(r)){var i=ms(r);throw new es(ts.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function vs(t){return"object"==typeof t&&null!==t&&Object.getPrototypeOf(t)===Object.prototype}function ms(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Yo("Unknown wrong type: "+typeof t)}function gs(t,e,n){if(void 0===n)throw new es(ts.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+_s(e)+" argument, but it was undefined.")}function bs(t,e,n){os(e,function(e,r){if(n.indexOf(e)<0)throw new es(ts.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function ws(t,e,n,r){var i=ms(r);return new es(ts.INVALID_ARGUMENT,"Function "+t+"() requires its "+_s(n)+" argument to be a "+e+", but it was: "+i)}function _s(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Ss(t,e){return t+" "+e+(1===t?"":"s")}var Es=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return Jo(20===e.length,"Invalid auto ID: "+e),e},t}();function Ts(t,e){return t<e?-1:t>e?1:0}function Is(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Cs(){if("undefined"==typeof Uint8Array)throw new es(ts.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function xs(){if(!Zo.getPlatform().base64Available)throw new es(ts.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Os=function(){function t(t){xs(),this._binaryString=t}return t.fromBase64String=function(e){us("Blob.fromBase64String",arguments,1),hs("Blob.fromBase64String","string",1,e),xs();try{return new t(Zo.getPlatform().atob(e))}catch(t){throw new es(ts.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(us("Blob.fromUint8Array",arguments,1),Cs(),!(e instanceof Uint8Array))throw ws("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return us("Blob.toBase64",arguments,0),xs(),Zo.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){us("Blob.toUint8Array",arguments,0),Cs();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return Ts(this._binaryString,t._binaryString)},t}(),ks=ns(Os,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),As=function(){function t(t,e){if(us("GeoPoint",arguments,2),hs("GeoPoint","number",1,t),hs("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new es(ts.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new es(ts.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return Ts(this._lat,t._lat)||Ts(this._long,t._long)},t}(),Ns="(default)",Rs=function(){function t(t,e){this.projectId=t,this.database=e||Ns}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===Ns},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return Ts(this.projectId,t.projectId)||Ts(this.database,t.database)},t}(),Ds=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&Yo("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&Yo("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):Yo("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return Jo(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return Jo(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return Jo(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return Jo(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return Jo(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new es(ts.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(Ds),Ms=/^[_a-zA-Z][_a-zA-Z0-9]*$/,js=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.isValidIdentifier=function(t){return Ms.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new es(ts.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new es(ts.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new es(ts.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new es(ts.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(Ds),Ls=function(){function t(e){this.path=e,Jo(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.isEqual=function(t){return null!==t&&0===Ps.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ps.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ps(e.slice()))},t.fromPathString=function(e){return new t(Ps.fromString(e))},t.EMPTY=new t(new Ps([])),t}(),Vs=function(){function t(t,e,n,r){this.key=t,this.version=e,this.data=n,this.hasLocalMutations=r.hasLocalMutations}return t.prototype.field=function(t){return this.data.field(t)},t.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"})"},t.compareByKey=function(t,e){return Ls.comparator(t.key,e.key)},t.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):Yo("Trying to compare documents on fields that don't exist")},t}(),Us=function(){function t(t,e){this.key=t,this.version=e}return t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},t.prototype.isEqual=function(t){return t&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},t.compareByKey=function(t,e){return Ls.comparator(t.key,e.key)},t}(),Fs=function(){function t(t,e){this.comparator=t,this.root=e||qs.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qs.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qs.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Bs(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Bs(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Bs(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Bs(this.root,t,this.comparator,!0)},t}(),Bs=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){Jo(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),qs=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Yo("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw Yo("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw Yo("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}();qs.EMPTY=new(function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new qs(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Hs=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),Ws=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),zs=function(){function t(t){this.serverTimestampBehavior=t}return t.fromSnapshotOptions=function(e){switch(e.serverTimestamps){case"estimate":return new t(Ws.Estimate);case"previous":return new t(Ws.Previous);case"none":case void 0:return t.defaultOptions;default:return Yo("fromSnapshotOptions() called with invalid options.")}},t.defaultOptions=new t(Ws.Default),t}(),Gs=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return Jo(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),Ts(this.typeOrder,t.typeOrder)},t}(),Ks=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=Hs.NullValue,e.internalValue=null,e}return o.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(Gs),Qs=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Hs.BooleanValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Ts(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Gs),Xs=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Hs.NumberValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(Gs);function Ys(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Js=function(t){function e(e){return t.call(this,e)||this}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Ys(this.internalValue,t.internalValue)},e}(Xs),Zs=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Ys(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Xs),$s=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Hs.StringValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Ts(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(Gs),ta=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Hs.TimestampValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue.compareTo(t.internalValue):t instanceof ea?-1:this.defaultCompareTo(t)},e}(Gs),ea=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=Hs.TimestampValue,r}return o.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===Ws.Estimate?this.localWriteTime.toDate():t&&t.serverTimestampBehavior===Ws.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime.compareTo(t.localWriteTime):t instanceof ta?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(Gs),na=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Hs.BlobValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Gs),ra=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=Hs.RefValue,r}return o.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:Ls.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(Gs),ia=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Hs.GeoPointValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Gs),oa=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Hs.ObjectValue,n}return o.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),s=Ts(i.key,o.key)||i.value.compareTo(o.value);if(s)return s}return Ts(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(Jo(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(Jo(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){Jo(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return JSON.stringify(this.value())},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new Fs(Ts)),e}(Gs),sa=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Hs.ArrayValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return Ts(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return JSON.stringify(this.value())},e}(Gs),aa=Number,ua=aa.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),ca=aa.MAX_SAFE_INTEGER||Math.pow(2,53)-1,la=aa.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function ha(t){return null===t||void 0===t}var fa,pa=function(){function t(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[_a]:[new wa(t),_a];else{Jo(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:ga.ASCENDING)===ga.ASCENDING?_a:Sa)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){Jo(null==this.getInequalityFilterField()||!(e instanceof ya)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),Jo(!Ls.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){Jo(!Ls.isDocumentKey(this.path),"No ordering allowed for document query"),Jo(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";ha(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),ha(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return Jo(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!ha(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof ya&&n.isInequality())return n.field}return null},t.prototype.isDocumentQuery=function(){return Ls.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return Ls.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){Jo(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),da=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;default:return Yo("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t}(),ya=function(){function t(t,e,n){this.field=t,this.op=e,this.value=n}return t.prototype.matches=function(t){if(this.field.isKeyField()){Jo(this.value instanceof ra,"Comparing on key, but filter value not a RefValue");var e=Ls.comparator(t.key,this.value.key);return this.matchesComparison(e)}var n=t.field(this.field);return void 0!==n&&this.matchesValue(n)},t.prototype.matchesValue=function(t){return this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(t){switch(this.op){case da.LESS_THAN:return t<0;case da.LESS_THAN_OR_EQUAL:return t<=0;case da.EQUAL:return 0===t;case da.GREATER_THAN:return t>0;case da.GREATER_THAN_OR_EQUAL:return t>=0;default:return Yo("Unknown relation op"+this.op)}},t.prototype.isInequality=function(){return this.op!==da.EQUAL},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(),va=function(){function t(t){this.field=t}return t.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},t.prototype.toString=function(){return this.field.canonicalString()+" IS null"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(),ma=function(){function t(t){this.field=t}return t.prototype.matches=function(t){var e=t.field(this.field).value();return"number"==typeof e&&isNaN(e)},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(),ga=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),ba=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){Jo(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())Jo(o instanceof ra,"Bound has a non-key value where the key path is being used."),n=Ls.comparator(o.key,e.key);else{var s=e.field(i.field);Jo(void 0!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===ga.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)return this.position[e].isEqual(t.position[e]);return!0},t}(),wa=function(){function t(t,e){this.field=t,void 0===e&&(e=ga.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?Vs.compareByKey(t,e):Vs.compareByField(this.field,t,e);switch(this.dir){case ga.ASCENDING:return n;case ga.DESCENDING:return-1*n;default:return Yo("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),_a=new wa(js.keyField(),ga.ASCENDING),Sa=new wa(js.keyField(),ga.DESCENDING),Ea=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),Ta=function(){function t(t,e){this.seconds=t,this.nanos=e,Jo(e>=0,"timestamp nanoseconds out of range: "+e),Jo(e<1e9,"timestamp nanoseconds out of range"+e),Jo(t>=-62135596800,"timestamp seconds out of range: "+t),Jo(t<253402300800,"timestamp seconds out of range"+t)}return t.now=function(){return t.fromEpochMilliseconds(Date.now())},t.fromDate=function(e){return t.fromEpochMilliseconds(e.getTime())},t.fromEpochMilliseconds=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.fromISOString=function(e){var n=0,r=Ea.exec(e);if(Jo(!!r,"invalid timestamp: "+e),r[1]){var i=r[1];i=(i+"000000000").substr(0,9),n=Number(i)}var o=new Date(e);return new t(Math.floor(o.getTime()/1e3),n)},t.prototype.toDate=function(){return new Date(this.toEpochMilliseconds())},t.prototype.toEpochMilliseconds=function(){return 1e3*this.seconds+this.nanos/1e6},t.prototype.compareTo=function(t){return this.seconds===t.seconds?Ts(this.nanos,t.nanos):Ts(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanos===this.nanos},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanos="+this.nanos+")"},t}(),Ia=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new Ta(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp.compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanos/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new Ta(0,0)),t}();!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(fa||(fa={}));var Ca,xa=function(){function t(t,e,n,r,i){void 0===r&&(r=Ia.MIN),void 0===i&&(i=$o()),this.query=t,this.targetId=e,this.purpose=n,this.snapshotVersion=r,this.resumeToken=i}return t.prototype.update=function(e){return new t(this.query,this.targetId,this.purpose,e.snapshotVersion,e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),Oa=function(){function t(t){this.fields=t}return t.prototype.isEqual=function(t){return Is(this.fields,t.fields)},t}(),ka=function(){function t(){}return t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),Aa=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),Na=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),Ra=function(){function t(t,e){this.updateTime=t,this.exists=e,Jo(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof Vs&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists?t instanceof Vs:null===t||t instanceof Us:(Jo(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!==(e=this.updateTime)&&void 0!==e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),Da=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&Jo(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof Vs?t.version:Ia.MIN},t}(),Pa=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=Na.Set,i}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),Jo(null==e.transformResults,"Transform results received by SetMutation.");var n=Da.getPostMutationVersion(t);return new Vs(this.key,n,this.value,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Da.getPostMutationVersion(t);return new Vs(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(Da),Ma=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=Na.Patch,o}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),Jo(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return t;var n=Da.getPostMutationVersion(t),r=this.patchDocument(t);return new Vs(this.key,n,r,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Da.getPostMutationVersion(t),i=this.patchDocument(t);return new Vs(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){return this.patchObject(t instanceof Vs?t.data:oa.EMPTY)},e.prototype.patchObject=function(t){for(var e=0,n=this.fieldMask.fields;e<n.length;e++){var r=n[e],i=this.data.field(r);t=void 0!==i?t.set(r,i):t.delete(r)}return t},e}(Da),ja=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=Na.Transform,r.precondition=Ra.exists(!0),r}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),Jo(null!=e.transformResults,"Transform results missing for TransformMutation.");var n=e.transformResults;if(!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.transformObject(r.data,n);return new Vs(this.key,r.version,i,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new Vs(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Is(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){Jo(t instanceof Vs,"Unknown MaybeDocument type "+t);var e=t;return Jo(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],s=o.transform;if(!(s instanceof ka))return Yo("Encountered unknown transform: "+s);var a=null;e instanceof Vs&&(a=e.field(o.field)||null),n.push(new ea(t,a))}return n},e.prototype.transformObject=function(t,e){Jo(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.transform,o=r.field;if(!(i instanceof ka))return Yo("Encountered unknown transform: "+i);t=t.set(o,e[n])}return t},e}(Da),La=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=Na.Delete,r}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),Jo(null==e.transformResults,"Transform results received by DeleteMutation."),new Us(this.key,Ia.MIN)},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&Jo(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Us(this.key,Ia.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(Da),Va=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function Ua(t){switch(t){case ts.OK:return Yo("Treated status OK as error");case ts.CANCELLED:case ts.UNKNOWN:case ts.DEADLINE_EXCEEDED:case ts.RESOURCE_EXHAUSTED:case ts.INTERNAL:case ts.UNAVAILABLE:case ts.UNAUTHENTICATED:return!1;case ts.INVALID_ARGUMENT:case ts.NOT_FOUND:case ts.ALREADY_EXISTS:case ts.PERMISSION_DENIED:case ts.FAILED_PRECONDITION:case ts.ABORTED:case ts.OUT_OF_RANGE:case ts.UNIMPLEMENTED:case ts.DATA_LOSS:return!0;default:return Yo("Unknown status code: "+t)}}function Fa(t){if(void 0===t)return Qo("GRPC error has no .code"),ts.UNKNOWN;switch(t){case Ca.OK:return ts.OK;case Ca.CANCELLED:return ts.CANCELLED;case Ca.UNKNOWN:return ts.UNKNOWN;case Ca.DEADLINE_EXCEEDED:return ts.DEADLINE_EXCEEDED;case Ca.RESOURCE_EXHAUSTED:return ts.RESOURCE_EXHAUSTED;case Ca.INTERNAL:return ts.INTERNAL;case Ca.UNAVAILABLE:return ts.UNAVAILABLE;case Ca.UNAUTHENTICATED:return ts.UNAUTHENTICATED;case Ca.INVALID_ARGUMENT:return ts.INVALID_ARGUMENT;case Ca.NOT_FOUND:return ts.NOT_FOUND;case Ca.ALREADY_EXISTS:return ts.ALREADY_EXISTS;case Ca.PERMISSION_DENIED:return ts.PERMISSION_DENIED;case Ca.FAILED_PRECONDITION:return ts.FAILED_PRECONDITION;case Ca.ABORTED:return ts.ABORTED;case Ca.OUT_OF_RANGE:return ts.OUT_OF_RANGE;case Ca.UNIMPLEMENTED:return ts.UNIMPLEMENTED;case Ca.DATA_LOSS:return ts.DATA_LOSS;default:return Yo("Unknown status code: "+t)}}!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(Ca||(Ca={}));var Ba=function(){function t(t){this.comparator=t,this.data=new Fs(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),qa=new Fs(Ls.comparator);function Ha(){return qa}var Wa=new Fs(Ls.comparator);function za(){return Wa}var Ga=new Fs(Ls.comparator);function Ka(){return Ga}var Qa=new Ba(Ls.comparator);function Xa(){return Qa}var Ya,Ja=function(){function t(t,e,n){this.snapshotVersion=t,this.targetChanges=e,this.documentUpdates=n}return t.prototype.addDocumentUpdate=function(t){this.documentUpdates=this.documentUpdates.insert(t.key,t)},t.prototype.handleExistenceFilterMismatch=function(t){this.targetChanges[t]={mapping:new $a,snapshotVersion:Ia.MIN,currentStatusUpdate:Ya.MarkNotCurrent,resumeToken:$o()}},t}();!function(t){t[t.None=0]="None",t[t.MarkNotCurrent=1]="MarkNotCurrent",t[t.MarkCurrent=2]="MarkCurrent"}(Ya||(Ya={}));var Za=Xa(),$a=function(){function t(){this.docs=Za}return Object.defineProperty(t.prototype,"documents",{get:function(){return this.docs},enumerable:!0,configurable:!0}),t.prototype.add=function(t){this.docs=this.docs.add(t)},t.prototype.delete=function(t){this.docs=this.docs.delete(t)},t.prototype.isEqual=function(t){return null!==t&&this.docs.isEqual(t.docs)},t}(),tu=function(){function t(){this.addedDocuments=Za,this.removedDocuments=Za}return t.prototype.applyToKeySet=function(t){var e=t;return this.addedDocuments.forEach(function(t){return e=e.add(t)}),this.removedDocuments.forEach(function(t){return e=e.delete(t)}),e},t.prototype.add=function(t){this.addedDocuments=this.addedDocuments.add(t),this.removedDocuments=this.removedDocuments.delete(t)},t.prototype.delete=function(t){this.addedDocuments=this.addedDocuments.delete(t),this.removedDocuments=this.removedDocuments.add(t)},t.prototype.isEqual=function(t){return null!==t&&this.addedDocuments.isEqual(t.addedDocuments)&&this.removedDocuments.isEqual(t.removedDocuments)},t}(),eu=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},nu=function(t,e){this.targetId=t,this.existenceFilter=e},ru=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),iu=function(){return function(t,e,n,r){void 0===n&&(n=$o()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),ou=function(){function t(t,e,n){this.snapshotVersion=t,this.listenTargets=e,this.existenceFilters={},this.targetChanges={},this.documentUpdates=Ha(),this.frozen=!1,this.pendingTargetResponses=as(n)}return t.prototype.add=function(t){Jo(!this.frozen,"Trying to modify frozen WatchChangeAggregator."),t instanceof eu?this.addDocumentChange(t):t instanceof iu?this.addTargetChange(t):t instanceof nu?this.addExistenceFilterChange(t):Yo("Unknown watch change: "+t)},t.prototype.addChanges=function(t){var e=this;Jo(!this.frozen,"Trying to modify frozen WatchChangeAggregator."),t.forEach(function(t){return e.add(t)})},t.prototype.createRemoteEvent=function(){var t=this,e=this.targetChanges;return is(this.targetChanges,function(n){t.isActiveTarget(n)||delete e[n]}),this.frozen=!0,new Ja(this.snapshotVersion,e,this.documentUpdates)},t.prototype.ensureTargetChange=function(t){var e=this.targetChanges[t];return e||(e={currentStatusUpdate:Ya.None,snapshotVersion:this.snapshotVersion,mapping:new tu,resumeToken:$o()},this.targetChanges[t]=e),e},t.prototype.isActiveTarget=function(t){return!rs(this.pendingTargetResponses,t)&&rs(this.listenTargets,t)},t.prototype.addDocumentChange=function(t){for(var e=!1,n=0,r=t.updatedTargetIds;n<r.length;n++)this.isActiveTarget(s=r[n])&&(this.ensureTargetChange(s).mapping.add(t.key),e=!0);for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s;this.isActiveTarget(s=o[i])&&(this.ensureTargetChange(s).mapping.delete(t.key),e=!0)}t.newDoc&&e&&(this.documentUpdates=this.documentUpdates.insert(t.key,t.newDoc))},t.prototype.addTargetChange=function(t){var e=this;t.targetIds.forEach(function(n){var r=e.ensureTargetChange(n);switch(t.state){case ru.NoChange:e.isActiveTarget(n)&&su(r,t.resumeToken);break;case ru.Added:e.recordTargetResponse(n),rs(e.pendingTargetResponses,n)||(r.mapping=new tu,r.currentStatusUpdate=Ya.None,delete e.existenceFilters[n]),su(r,t.resumeToken);break;case ru.Removed:e.recordTargetResponse(n),Jo(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case ru.Current:e.isActiveTarget(n)&&(r.currentStatusUpdate=Ya.MarkCurrent,su(r,t.resumeToken));break;case ru.Reset:e.isActiveTarget(n)&&(r.mapping=new $a,su(r,t.resumeToken));break;default:Yo("Unknown target watch change state: "+t.state)}})},t.prototype.recordTargetResponse=function(t){var e=(this.pendingTargetResponses[t]||0)-1;0===e?delete this.pendingTargetResponses[t]:this.pendingTargetResponses[t]=e},t.prototype.addExistenceFilterChange=function(t){this.isActiveTarget(t.targetId)&&(this.existenceFilters[t.targetId]=t.existenceFilter)},t}();function su(t,e){e.length>0&&(t.resumeToken=e)}var au,uu,cu=((au={})[ga.ASCENDING.name]="ASCENDING",au[ga.DESCENDING.name]="DESCENDING",au),lu=((uu={})[da.LESS_THAN.name]="LESS_THAN",uu[da.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",uu[da.GREATER_THAN.name]="GREATER_THAN",uu[da.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",uu[da.EQUAL.name]="EQUAL",uu);function hu(t,e){Jo(!ha(t),e+" is missing")}function fu(t){return"number"==typeof t?t:"string"==typeof t?Number(t):Yo("can't parse "+t)}var pu=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?ts.UNKNOWN:Fa(t.code);return new es(e,t.message||"")},t.prototype.toInt32Value=function(t){return ha(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return ha(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanos}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return Ta.fromISOString(t);Jo(!!t,"Cannot deserialize null or undefined timestamp.");var e=fu(t.seconds||"0");return new Ta(e,t.nanos||0)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(Jo(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Os.fromBase64String(t)):(Jo(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),Os.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return Jo(!!t,"Trying to deserialize version that isn't set"),Ia.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=Ps.fromString(t);return Jo(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return Jo(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),Jo(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new Ls(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return 0===t.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?Ps.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new Ps(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new Ps(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return Jo(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof Ks)return{nullValue:"NULL_VALUE"};if(t instanceof Qs)return{booleanValue:t.value()};if(t instanceof Js)return{integerValue:""+t.value()};if(t instanceof Zs){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof $s?{stringValue:t.value()}:t instanceof oa?{mapValue:this.toMapValue(t)}:t instanceof sa?{arrayValue:this.toArrayValue(t)}:t instanceof ta?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof ia?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof na?{bytesValue:this.toBytes(t.value())}:t instanceof ra?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:Yo("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(du(t,n,"nullValue"))return Ks.INSTANCE;if(du(t,n,"booleanValue"))return Qs.of(t.booleanValue);if(du(t,n,"integerValue"))return new Js(fu(t.integerValue));if(du(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Zs.NAN;if("Infinity"===t.doubleValue)return Zs.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Zs.NEGATIVE_INFINITY}return new Zs(t.doubleValue)}if(du(t,n,"stringValue"))return new $s(t.stringValue);if(du(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(du(t,n,"arrayValue"))return hu(t.arrayValue,"arrayValue"),new sa((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if(du(t,n,"timestampValue"))return hu(t.timestampValue,"timestampValue"),new ta(this.fromTimestamp(t.timestampValue));if(du(t,n,"geoPointValue"))return hu(t.geoPointValue,"geoPointValue"),new ia(new As(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if(du(t,n,"bytesValue")){hu(t.bytesValue,"bytesValue");var r=this.fromBlob(t.bytesValue);return new na(r)}if(du(t,n,"referenceValue")){hu(t.referenceValue,"referenceValue");var i=this.fromResourceName(t.referenceValue),o=new Rs(i.get(1),i.get(3)),s=new Ls(this.extractLocalPathFromResourceName(i));return new ra(o,s)}return Yo("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return Jo(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t){return new Vs(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasLocalMutations:!1})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=oa.EMPTY;return os(t,function(t,r){n=n.set(new js([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){Jo(!!t.found,"Tried to deserialize a found document from a missing document."),hu(t.found.name,"doc.found.name"),hu(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new Vs(e,n,r,{hasLocalMutations:!1})},t.prototype.fromMissing=function(t){Jo(!!t.missing,"Tried to deserialize a missing document from a found document."),Jo(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new Us(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return du(t,e,"found")?this.fromFound(t):du(t,e,"missing")?this.fromMissing(t):Yo("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case ru.Added:return"ADD";case ru.Current:return"CURRENT";case ru.NoChange:return"NO_CHANGE";case ru.Removed:return"REMOVE";case ru.Reset:return"RESET";default:return Yo("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof nu)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof eu){var e;if(t.newDoc instanceof Vs)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof Us)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof iu){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return Ca.OK;switch(t){case ts.OK:return Ca.OK;case ts.CANCELLED:return Ca.CANCELLED;case ts.UNKNOWN:return Ca.UNKNOWN;case ts.DEADLINE_EXCEEDED:return Ca.DEADLINE_EXCEEDED;case ts.RESOURCE_EXHAUSTED:return Ca.RESOURCE_EXHAUSTED;case ts.INTERNAL:return Ca.INTERNAL;case ts.UNAVAILABLE:return Ca.UNAVAILABLE;case ts.UNAUTHENTICATED:return Ca.UNAUTHENTICATED;case ts.INVALID_ARGUMENT:return Ca.INVALID_ARGUMENT;case ts.NOT_FOUND:return Ca.NOT_FOUND;case ts.ALREADY_EXISTS:return Ca.ALREADY_EXISTS;case ts.PERMISSION_DENIED:return Ca.PERMISSION_DENIED;case ts.FAILED_PRECONDITION:return Ca.FAILED_PRECONDITION;case ts.ABORTED:return Ca.ABORTED;case ts.OUT_OF_RANGE:return Ca.OUT_OF_RANGE;case ts.UNIMPLEMENTED:return Ca.UNIMPLEMENTED;case ts.DATA_LOSS:return Ca.DATA_LOSS;default:return Yo("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return Yo("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(du(t,n,"targetChange")){hu(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),s=t.targetChange.cause,a=s&&this.fromRpcStatus(s);e=new iu(r,i,o,a||null)}else if(du(t,n,"documentChange")){hu(t.documentChange,"documentChange"),hu(t.documentChange.document,"documentChange.name"),hu(t.documentChange.document.name,"documentChange.document.name"),hu(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=this.fromFields(u.document.fields||{}),f=new Vs(c,l,h,{hasLocalMutations:!1});e=new eu(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if(du(t,n,"documentDelete")){hu(t.documentDelete,"documentDelete"),hu(t.documentDelete.document,"documentDelete.document");var p=t.documentDelete;c=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):Ia.forDeletedDoc(),f=new Us(c,l),e=new eu([],p.removedTargetIds||[],f.key,f)}else if(du(t,n,"documentRemove")){hu(t.documentRemove,"documentRemove"),hu(t.documentRemove.document,"documentRemove");var d=t.documentRemove;c=this.fromName(d.document),e=new eu([],d.removedTargetIds||[],c,null)}else{if(!du(t,n,"filter"))return Yo("Unknown change type "+JSON.stringify(t));hu(t.filter,"filter"),hu(t.filter.targetId,"filter.targetId");var y=t.filter,v=new Va(y.count||0);e=new nu(y.targetId,v)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?ru.NoChange:"ADD"===t?ru.Added:"REMOVE"===t?ru.Removed:"CURRENT"===t?ru.Current:"RESET"===t?ru.Reset:Yo("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!du(t,t.response_type,"targetChange"))return Ia.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ia.MIN:e.readTime?this.fromVersion(e.readTime):Ia.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Pa)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof La)e={delete:this.toName(t.key)};else if(t instanceof Ma)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof ja))return Yo("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):Ra.NONE;if(t.update){hu(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new Ma(r,i,o,n)}return new Pa(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new La(r,n);if(t.transform){r=this.fromName(t.transform.document);var s=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return Jo(!0===n.exists,'Transforms only support precondition "exists == true"'),new ja(r,s)}return Yo("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return Jo(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Yo("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?Ra.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Ra.exists(t.exists):Ra.NONE},t.prototype.fromWriteResult=function(t){var e=this,n=t.updateTime?this.fromVersion(t.updateTime):null,r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults.map(function(t){return e.fromValue(t)})),new function(t,e){this.version=t,this.transformResults=e}(n,r)},t.prototype.fromWriteResults=function(t){var e=this;return(t||[]).map(function(t){return e.fromWriteResult(t)})},t.prototype.toFieldTransform=function(t){return Jo(t.transform instanceof ka,"Unknown transform: "+t.transform),{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"}},t.prototype.fromFieldTransform=function(t){Jo("REQUEST_TIME"===t.setToServerValue,"Unknown transform proto: "+JSON.stringify(t));var e=js.fromServerFormat(t.fieldPath);return new Aa(e,ka.instance)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return Jo(1===e,"DocumentsTarget contained other than 1 document: "+e),pa.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(Ps.EMPTY_PATH);else{var n=t.path;Jo(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;r>0&&(Jo(1===r,"StructuredQuery.from with more than one collection is not supported."),e=e.child(n.from[0].collectionId));var i=[];n.where&&(i=this.fromFilter(n.where));var o=[];n.orderBy&&(o=this.fromOrder(n.orderBy));var s=null;n.limit&&(s=this.fromInt32Value(n.limit));var a=null;n.startAt&&(a=this.fromCursor(n.startAt));var u=null;return n.endAt&&(u=this.fromCursor(n.endAt)),new pa(e,o,i,s,a,u)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case fa.Listen:return null;case fa.ExistenceFilterMismatch:return"existence-filter-mismatch";case fa.LimboResolution:return"limbo-document";default:return Yo("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof ya?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):Yo("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new ba(r,n)},t.prototype.toDirection=function(t){return cu[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return ga.ASCENDING;case"DESCENDING":return ga.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return lu[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return da.EQUAL;case"GREATER_THAN":return da.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return da.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return da.LESS_THAN;case"LESS_THAN_OR_EQUAL":return da.LESS_THAN_OR_EQUAL;case"OPERATOR_UNSPECIFIED":return Yo("Unspecified relation");default:return Yo("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return js.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new wa(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof ya?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:Yo("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new ya(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof ma?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof va?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:Yo("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new ma(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new va(n);case"OPERATOR_UNSPECIFIED":return Yo("Unspecified filter");default:return Yo("Unknown filter")}},t.prototype.toDocumentMask=function(t){return{fieldPaths:t.fields.map(function(t){return t.canonicalString()})}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return js.fromServerFormat(t)});return new Oa(e)},t}();function du(t,e,n){return e===n||!e&&n in t}var yu=n("Df3s"),vu=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){Jo(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){Jo(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){Jo(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){Jo(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){Jo(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){Jo(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),mu="Connection",gu={BatchGetDocuments:"batchGet",Commit:"commit"},bu="gl-js/ fire/"+Vo,wu=function(){function t(t){this.databaseId=t.databaseId,this.pool=new yu.XhrIoPool,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=bu},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,s){r.pool.getObject(function(a){a.listenOnce(yu.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case yu.ErrorCode.NO_ERROR:var e=a.getResponseJson();Ko(mu,"XHR received:",JSON.stringify(e)),o(e);break;case yu.ErrorCode.TIMEOUT:Ko(mu,'RPC "'+t+'" timed out'),s(new es(ts.DEADLINE_EXCEEDED,"Request time out"));break;case yu.ErrorCode.HTTP_ERROR:var n=a.getStatus();Ko(mu,'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0?s(new es(function(t){switch(t){case 200:return ts.OK;case 400:return ts.INVALID_ARGUMENT;case 401:return ts.UNAUTHENTICATED;case 403:return ts.PERMISSION_DENIED;case 404:return ts.NOT_FOUND;case 409:return ts.ABORTED;case 416:return ts.OUT_OF_RANGE;case 429:return ts.RESOURCE_EXHAUSTED;case 499:return ts.CANCELLED;case 500:return ts.UNKNOWN;case 501:return ts.UNIMPLEMENTED;case 503:return ts.UNAVAILABLE;case 504:return ts.DEADLINE_EXCEEDED;default:return t>=200&&t<300?ts.OK:t>=400&&t<500?ts.FAILED_PRECONDITION:t>=500&&t<600?ts.INTERNAL:ts.UNKNOWN}}(n),"Server responded with status "+a.getStatusText())):(Ko(mu,'RPC "'+t+'" failed'),s(new es(ts.UNAVAILABLE,"Connection failed.")));break;default:Yo('RPC "'+t+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{Ko(mu,'RPC "'+t+'" completed.'),r.pool.releaseObject(a)}});var u=JSON.stringify(e);Ko(mu,"XHR sending: ",i+" "+u);var c={"Content-Type":"text/plain"};r.modifyHeadersForRequest(c,n),a.send(i,"POST",u,c,15)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1beta1.Firestore","/",t,"/channel"],r=Object(yu.createWebChannelTransport)(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},httpHeadersOverwriteParam:"$httpHeaders",messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e);var o=n.join("");Ko(mu,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),a=!1,u=!1,c=new vu({sendFn:function(t){u?Ko(mu,"Not sending because WebChannel is closed:",t):(a||(Ko(mu,"Opening WebChannel transport."),s.open(),a=!0),Ko(mu,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),l=function(t,e){s.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return l(yu.WebChannel.EventType.OPEN,function(){u||Ko(mu,"WebChannel transport opened.")}),l(yu.WebChannel.EventType.CLOSE,function(){u||(u=!0,Ko(mu,"WebChannel transport closed"),c.callOnClose())}),l(yu.WebChannel.EventType.ERROR,function(t){u||(u=!0,Ko(mu,"WebChannel transport errored:",t),c.callOnClose(new es(ts.UNAVAILABLE,"The operation could not be completed")))}),l(yu.WebChannel.EventType.MESSAGE,function(t){if(!u){var e=t.data[0];Jo(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){Ko(mu,"WebChannel received error:",n);var r=n.status,i=function(t){var e=Ca[r];if(void 0!==e)return Fa(e)}(),o=n.message;void 0===i&&(i=ts.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),u=!0,c.callOnClose(new es(i,o)),s.close()}else Ko(mu,"WebChannel received:",e),c.callOnMessage(e)}}),setTimeout(function(){c.callOnOpen()},0),c},t.prototype.makeUrl=function(t){var e=gu[t];Jo(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1beta1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}();Zo.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return t.prototype.loadConnection=function(t){return Promise.resolve(new wu(t))},t.prototype.newSerializer=function(t){return new pu(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}()));var _u,Su=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(e,n,r,i){if(!(t instanceof Array)||t.length<1)throw new es(ts.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Ss(1,"element")+".")}();for(var n=0;n<t.length;++n)if(hs("FieldPath","string",n,t[n]),0===t[n].length)throw new es(ts.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new js(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw ws("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(js.keyField().canonicalString()),t}(),Eu=new RegExp("[~\\*/\\[\\]]");!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}(_u||(_u={}));var Tu=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),Iu=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),Cu=function(){function t(){this.changeMap=new Fs(Ls.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Tu.Added&&n.type===Tu.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Tu.Metadata&&n.type!==Tu.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Tu.Modified&&n.type===Tu.Modified?this.changeMap=this.changeMap.insert(e,{type:Tu.Modified,doc:t.doc}):t.type===Tu.Modified&&n.type===Tu.Added?this.changeMap=this.changeMap.insert(e,{type:Tu.Added,doc:t.doc}):t.type===Tu.Removed&&n.type===Tu.Added?this.changeMap=this.changeMap.remove(e):t.type===Tu.Removed&&n.type===Tu.Modified?this.changeMap=this.changeMap.insert(e,{type:Tu.Removed,doc:n.doc}):t.type===Tu.Added&&n.type===Tu.Removed?this.changeMap=this.changeMap.insert(e,{type:Tu.Modified,doc:t.doc}):Yo("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),xu=function(){function t(t,e,n,r,i,o,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.fromCache=i,this.hasPendingWrites=o,this.syncStateChanged=s}return t.prototype.isEqual=function(t){if(this.fromCache!==t.fromCache||this.hasPendingWrites!==t.hasPendingWrites||this.syncStateChanged!==t.syncStateChanged||!this.query.isEqual(t.query)||!this.docs.isEqual(t.docs)||!this.oldDocs.isEqual(t.oldDocs))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ou=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ls.comparator(e.key,n.key)}:function(t,e){return Ls.comparator(t.key,e.key)},this.keyedMap=za(),this.sortedSet=new Fs(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),ku=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){os(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return ss(this.inner)},t}(),Au=function(){function t(t){this.syncEngine=t,this.queries=new ku(function(t){return t.canonicalId()}),this.onlineState=_u.Unknown,this.syncEngine.subscribe(this.onChange.bind(this),this.onError.bind(this))}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new function(){this.listeners=[]},this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return o.__generator(this,function(o){return n=!1,(r=this.queries.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=this.queries.get(r.query);if(i){for(var o=0,s=i.listeners;o<s.length;o++)s[o].onViewSnapshot(r);i.viewSnap=r}}},t.prototype.onError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(t)})},t}(),Nu=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=_u.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(Jo(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeDocumentMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Tu.Metadata&&e.push(i)}t=new xu(t.query,t.docs,t.oldDocs,e,t.fromCache,t.hasPendingWrites,t.syncStateChanged)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){return Jo(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==_u.Offline?(Jo(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===_u.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeQueryMetadataChanges},t.prototype.raiseInitialEvent=function(e){Jo(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=new xu(e.query,e.docs,Ou.emptySet(e.docs),t.getInitialViewChanges(e),e.fromCache,e.hasPendingWrites,!0),this.raisedInitialEvent=!0,this.queryObserver.next(e)},t.getInitialViewChanges=function(t){var e=[];return t.docs.forEach(function(t){e.push({type:Tu.Added,doc:t})}),e},t}(),Ru=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Yo("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return e.reduce(function(t,e,n){return t.next(function(){return e})},t.resolve())},t.map=function(e){var n=[],r=!0,i=t.resolve(null);return e.reduce(function(t,e){return t.next(function(t){return r||n.push(t),r=!1,e})},i).next(function(t){return n.push(t),n})},t}(),Du=function(){function t(){this.isEager=!0,this.sources=[],this.potentialGarbage=Xa()}return t.prototype.addGarbageSource=function(t){this.sources.push(t),t.setGarbageCollector(this)},t.prototype.removeGarbageSource=function(t){this.sources.splice(this.sources.indexOf(t),1),t.setGarbageCollector(null)},t.prototype.addPotentialGarbageKey=function(t){this.potentialGarbage=this.potentialGarbage.add(t)},t.prototype.collectGarbage=function(t){var e=this,n=[],r=Xa();return this.potentialGarbage.forEach(function(i){var o=e.documentHasAnyReferences(t,i);n.push(o.next(function(t){return t||(r=r.add(i)),Ru.resolve()}))}),this.potentialGarbage=Xa(),Ru.waitFor(n).next(function(){return r})},t.prototype.documentHasAnyReferences=function(t,e){var n=Ru.resolve(!1);return this.sources.map(function(n){return function(){return n.containsKey(t,e)}}).reduce(function(t,e){return t.next(function(t){return t?Ru.resolve(!0):e()})},n)},t}(),Pu=function(){function t(t,e,n){this.query=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e){for(var n=Xa(),r=Xa(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case Tu.Added:n=n.add(s.doc.key);break;case Tu.Removed:r=r.add(s.doc.key)}}return new t(e.query,n,r)},t}(),Mu=function(){function t(){this.refsByKey=new Ba(ju.compareByKey),this.refsByTarget=new Ba(ju.compareByTargetId),this.garbageCollector=null}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new ju(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new ju(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=Ls.EMPTY,r=new ju(n,t),i=new ju(n,t+1);this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t)})},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t),null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(t.key)},t.prototype.referencesForId=function(t){var e=Ls.EMPTY,n=new ju(e,t),r=new ju(e,t+1),i=Xa();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=new ju(e,0),r=this.refsByKey.firstAfterOrEqual(n);return Ru.resolve(null!==r&&e.isEqual(r.key))},t}(),ju=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return Ls.comparator(t.key,e.key)||Ts(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return Ts(t.targetOrBatchId,e.targetOrBatchId)||Ls.comparator(t.key,e.key)},t}(),Lu=1,Vu=function(t){return t[t.LocalStore=0]="LocalStore",t[t.SyncEngine=1]="SyncEngine",t}({}),Uu=function(){function t(t,e){void 0===e&&(e=0),this.generatorId=t;var n=e>>Lu<<Lu;this.previousId=e-n>=t?n|this.generatorId:(n|this.generatorId)-(1<<Lu)}return t.prototype.next=function(){return this.previousId+=1<<Lu,this.previousId},t.forLocalStore=function(e){return void 0===e&&(e=0),new t(Vu.LocalStore,e)},t.forSyncEngine=function(){return new t(Vu.SyncEngine)},t}(),Fu=function(t){this.key=t},Bu=function(t){this.key=t},qu=function(){function t(t,e){this.query=t,this.syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Xa(),this.mutatedKeys=Xa(),this.documentSet=new Ou(t.docComparator.bind(t))}return t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Cu,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var c=i.get(t),l=e instanceof Vs?e:null;if(l&&(Jo(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null),l?(s=s.add(l),o=l.hasLocalMutations?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)),c&&l){var h=c.data.isEqual(l.data);h&&c.hasLocalMutations===l.hasLocalMutations||(r.track(h?{type:Tu.Metadata,doc:l}:{type:Tu.Modified,doc:l}),u&&n.query.docComparator(l,u)>0&&(a=!0))}else!c&&l?r.track({type:Tu.Added,doc:l}):c&&!l&&(r.track({type:Tu.Removed,doc:c}),u&&(a=!0))}),this.query.hasLimit())for(;s.size>this.query.limit;){var c=s.last();s=s.delete(c.key),r.track({type:Tu.Removed,doc:c})}return Jo(!a||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},t.prototype.applyChanges=function(t,e){var n=this;Jo(!t.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var i=t.changeSet.getChanges();i.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Tu.Added:return 1;case Tu.Modified:case Tu.Metadata:return 2;case Tu.Removed:return 0;default:return Yo("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||n.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(e);var o=this.updateLimboDocuments(),s=0===this.limboDocuments.size&&this.current?Iu.Synced:Iu.Local,a=s!==this.syncState;return this.syncState=s,0!==i.length||a?{snapshot:new xu(this.query,t.documentSet,r,i,s===Iu.Local,!t.mutatedKeys.isEmpty(),a),limboChanges:o}:{limboChanges:o}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===_u.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Cu,mutatedKeys:this.mutatedKeys,needsRefill:!1})):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this.syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){if(t){var e=t.mapping;switch(e instanceof $a?this.syncedDocuments=e.documents:e instanceof tu&&(this.syncedDocuments=e.applyToKeySet(this.syncedDocuments)),t.currentStatusUpdate){case Ya.MarkCurrent:this.current=!0;break;case Ya.MarkNotCurrent:this.current=!1;break;case Ya.None:break;default:Yo("Unknown current status update: "+t.currentStatusUpdate)}}},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Xa(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new Bu(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new Fu(t))}),n},t}(),Hu=function(){function t(t,e,n){this.localStore=t,this.remoteStore=e,this.currentUser=n,this.viewHandler=null,this.errorHandler=null,this.queryViewsByQuery=new ku(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Fs(Ls.comparator),this.limboKeysByTarget={},this.limboDocumentRefs=new Mu,this.limboCollector=new Du,this.mutationUserCallbacks={},this.targetIdGenerator=Uu.forSyncEngine()}return t.prototype.subscribe=function(t,e){Jo(null!==t&&null!==e,"View and error handlers cannot be null"),Jo(null===this.viewHandler&&null===this.errorHandler,"SyncEngine already has a subscriber."),this.viewHandler=t,this.errorHandler=e,this.limboCollector.addGarbageSource(this.limboDocumentRefs)},t.prototype.listen=function(t){var e=this;return this.assertSubscribed("listen()"),Jo(!this.queryViewsByQuery.has(t),"We already listen to the query: "+t),this.localStore.allocateQuery(t).then(function(n){return e.localStore.executeQuery(t).then(function(r){return e.localStore.remoteDocumentKeys(n.targetId).then(function(i){var o=new qu(t,i),s=o.computeDocChanges(r),a=o.applyChanges(s);Jo(0===a.limboChanges.length,"View returned limbo docs before target ack from the server."),Jo(!!a.snapshot,"applyChanges for new view should always return a snapshot");var u=new function(t,e,n,r){this.query=t,this.targetId=e,this.resumeToken=n,this.view=r}(t,n.targetId,n.resumeToken,o);e.queryViewsByQuery.set(t,u),e.queryViewsByTarget[n.targetId]=u,e.viewHandler([a.snapshot]),e.remoteStore.listen(n)})}).then(function(){return n.targetId})})},t.prototype.unlisten=function(t){var e=this;this.assertSubscribed("unlisten()");var n=this.queryViewsByQuery.get(t);return Jo(!!n,"Trying to unlisten on query not found:"+t),this.localStore.releaseQuery(t).then(function(){return e.remoteStore.unlisten(n.targetId),e.removeAndCleanupQuery(n).then(function(){return e.localStore.collectGarbage()})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),Jo(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!ha(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),is(t.targetChanges,function(n,r){var i=e.limboKeysByTarget[n];i&&r.currentStatusUpdate===Ya.MarkCurrent&&!t.documentUpdates.get(i)&&t.addDocumentUpdate(new Us(i,t.snapshotVersion))}),this.localStore.applyRemoteEvent(t).then(function(n){return e.emitNewSnapsAndNotifyLocalStore(n,t)})},t.prototype.applyOnlineStateChange=function(t){var e=[];this.queryViewsByQuery.forEach(function(n,r){var i=r.view.applyOnlineStateChange(t);Jo(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&e.push(i.snapshot)}),this.viewHandler(e)},t.prototype.rejectListen=function(t,e){var n=this;this.assertSubscribed("rejectListens()");var r=this.limboKeysByTarget[t];if(r){this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboKeysByTarget[t];var i=new Fs(Ls.comparator);i=i.insert(r,new Us(r,Ia.forDeletedDoc()));var o=new Ja(Ia.MIN,{},i);return this.applyRemoteEvent(o)}var s=this.queryViewsByTarget[t];return Jo(!!s,"Unknown targetId: "+t),this.localStore.releaseQuery(s.query).then(function(){return n.removeAndCleanupQuery(s).then(function(){n.errorHandler(s.query,e)})})},t.prototype.applySuccessfulWrite=function(t){var e=this;return this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(t.batch.batchId,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.emitNewSnapsAndNotifyLocalStore(t)})},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(t){return n.emitNewSnapsAndNotifyLocalStore(t)})},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Fs(Ts)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(Jo(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){return this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.limboDocumentRefs.removeReferencesForId(t.targetId),this.gcLimboDocuments()},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof Fu?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof Bu?(Ko("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t)):Yo("Unknown limbo change: "+JSON.stringify(i))}return this.gcLimboDocuments()},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){Ko("SyncEngine","New document in limbo: "+e);var n=this.targetIdGenerator.next(),r=pa.atPath(e.path);this.limboKeysByTarget[n]=e,this.remoteStore.listen(new xa(r,n,fa.Listen)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.gcLimboDocuments=function(){var t=this;return this.limboCollector.collectGarbage(null).next(function(e){e.forEach(function(e){var n=t.limboTargetsByKey.get(e);null!==n&&(t.remoteStore.unlisten(n),t.limboTargetsByKey=t.limboTargetsByKey.remove(e),delete t.limboKeysByTarget[n])})}).toPromise()},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){var n=this,r=[],i=[],o=[];return this.queryViewsByQuery.forEach(function(s,a){o.push(Promise.resolve().then(function(){var e=a.view.computeDocChanges(t);return e.needsRefill?n.localStore.executeQuery(a.query).then(function(t){return a.view.computeDocChanges(t,e)}):e}).then(function(t){var o=a.view.applyChanges(t,e&&e.targetChanges[a.targetId]);return n.updateTrackedLimbos(a.targetId,o.limboChanges).then(function(){if(o.snapshot){r.push(o.snapshot);var t=Pu.fromSnapshot(o.snapshot);i.push(t)}})}))}),Promise.all(o).then(function(){return n.viewHandler(r),n.localStore.notifyLocalViewChanges(i)}).then(function(){return n.localStore.collectGarbage()})},t.prototype.assertSubscribed=function(t){Jo(null!==this.viewHandler&&null!==this.errorHandler,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleUserChange=function(t){var e=this;return this.currentUser=t,this.localStore.handleUserChange(t).then(function(t){return e.emitNewSnapsAndNotifyLocalStore(t)}).then(function(){return e.remoteStore.handleUserChange(t)})},t}(),Wu=-1,zu=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,this.mutations=n}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&Jo(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;Jo(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&Jo(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=Xa(),e=0,n=this.mutations;e<n.length;e++)t=t.add(n[e].key);return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Is(this.mutations,t.mutations)},t.prototype.isTombstone=function(){return 0===this.mutations.length},t.prototype.toTombstone=function(){return new t(this.batchId,this.localWriteTime,[])},t}(),Gu=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){Jo(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Ka(),s=e.mutations,a=0;a<s.length;a++){var u=r[a].version;null===u&&(u=n),o=o.insert(s[a].key,u)}return new t(e,n,r,i,o)},t}(),Ku="\x01",Qu="\x01",Xu="\x10",Yu="\x11";function Ju(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=$u(e)),e=Zu(t.get(n),e);return $u(e)}function Zu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=Ku+Xu;break;case Ku:n+=Ku+Yu;break;default:n+=o}}return n}function $u(t){return t+Ku+Qu}function tc(t){var e=t.length;if(Jo(e>=2,"Invalid path "+t),2===e)return Jo(t.charAt(0)===Ku&&t.charAt(1)===Qu,"Non-empty path "+t+" had length 2"),Ps.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf(Ku,o);switch((s<0||s>n)&&Yo('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case Qu:var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case Xu:i+=t.substring(o,s),i+="\0";break;case Yu:i+=t.substring(o,s+1);break;default:Yo('Invalid encoded resource path: "'+t+'"')}o=s+2}return new Ps(r)}function ec(t,e,n,r){Jo(n<r&&n>=0&&r<=2,"Unexpected schema upgrade from v${fromVersion} to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(rc.store)}(t),function(t){t.createObjectStore(ic.store,{keyPath:ic.keyPath}),t.createObjectStore(oc.store,{keyPath:oc.keyPath}),t.createObjectStore(sc.store)}(t),function(t){t.createObjectStore(cc.store,{keyPath:cc.keyPath}).createIndex(cc.documentTargetsIndex,cc.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(uc.store,{keyPath:uc.keyPath}).createIndex(uc.queryTargetsIndexName,uc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(lc.store)}(t),function(t){t.createObjectStore(ac.store)}(t));var i=Ru.resolve();return n<2&&r>=2&&(i=function(t){var e=t.store(lc.store);return e.get(lc.key).next(function(t){return null!=t?Ru.resolve(t):(t=new lc(0,0,Ia.MIN.toTimestamp(),0),e.put(lc.key,t).next(function(){return t}))})}(e).next(function(t){return function(t,e){var n=t.store(lc.store);return t.store(uc.store).count().next(function(t){return e.targetCount=t,n.put(lc.key,e)})}(e,t)})),i}var nc=function(t,e){this.seconds=t,this.nanos=e},rc=function(){function t(t,e){this.ownerId=t,this.leaseTimestampMs=e}return t.store="owner",t}(),ic=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),oc=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath=["userId","batchId"],t}(),sc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ju(e)]},t.key=function(t,e,n){return[t,Ju(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),ac=function(){function t(t,e){this.noDocument=t,this.document=e}return t.store="remoteDocuments",t}(),uc=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),cc=function(){function t(t,e){this.targetId=t,this.path=e}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),lc=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),hc=[ic.store,oc.store,sc.store,ac.store,uc.store,rc.store,lc.store,cc.store],fc=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return Jo(t.isAvailable(),"IndexedDB not supported in current environment."),Ko("SimpleDb","Opening database:",e),new Ru(function(i,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){i(new t(e.target.result))},s.onerror=function(t){o(t.target.error)},s.onupgradeneeded=function(t){Ko("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new dc(s.transaction);r(n,i,t.oldVersion,2).next(function(){Ko("SimpleDb","Database upgrade to version 2 complete")})}}).toPromise()},t.delete=function(t){return Ko("SimpleDb","Removing database:",t),vc(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.prototype.runTransaction=function(t,e,n){var r=dc.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(),Ru.reject(t)}).toPromise();return r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),pc=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return vc(this.dbCursor.delete())},t}(),dc=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionPromise=new Promise(function(t,n){e.transaction.onabort=e.transaction.oncomplete=function(e){t()},e.transaction.onerror=function(t){n(t.target.error)}})}return t.open=function(e,n,r){return new t(e.transaction(r,n))},t.prototype.abort=function(){this.aborted||(Ko("SimpleDb","Aborting transaction."),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return Jo(!!e,"Object store not part of transaction: "+t),new yc(e)},t}(),yc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ko("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ko("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),vc(n)},t.prototype.get=function(t){var e=this;return vc(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Ko("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Ko("SimpleDb","DELETE",this.store.name,t),vc(this.store.delete(t))},t.prototype.count=function(){return Ko("SimpleDb","COUNT",this.store.name),vc(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){Ko("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateCursor=function(t,e){var n=[];return new Ru(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new pc(i),s=e(i.primaryKey,i.value,o);s instanceof Ru&&n.push(s),o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return Ru.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(Jo(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function vc(t){return new Ru(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.error)}})}var mc=function(){function t(t,e){this.userId=t,this.serializer=e,this.garbageCollector=null}return t.forUser=function(e,n){return Jo(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n)},t.prototype.start=function(e){var n=this;return t.loadNextBatchIdFromDb(e).next(function(t){return n.nextBatchId=t,_c(e).get(n.userId)}).next(function(t){return t||(t=new ic(n.userId,Wu,"")),n.metadata=t,n.metadata.lastAcknowledgedBatchId>=n.nextBatchId?n.checkEmpty(e).next(function(t){return Jo(t,"Reset nextBatchID is only possible when the queue is empty"),n.metadata.lastAcknowledgedBatchId=Wu,_c(e).put(n.metadata)}):Ru.resolve()})},t.loadNextBatchIdFromDb=function(t){var e=Wu;return bc(t).iterate({reverse:!0},function(t,n,r){var i,o,s=t[0];if(t[1]>e&&(e=n.batchId),""===s)r.done();else{var a=(o=(i=s).length-1,0===i.length?"":"\0"===i.charAt(o)?i.substring(0,o):i.substring(0,o)+String.fromCharCode(i.charCodeAt(o)-1));r.skip([a])}}).next(function(){return e+1})},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound(this.keyForBatchId(Number.NEGATIVE_INFINITY),this.keyForBatchId(Number.POSITIVE_INFINITY));return bc(t).iterate({range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.getNextBatchId=function(t){return Ru.resolve(this.nextBatchId)},t.prototype.getHighestAcknowledgedBatchId=function(t){return Ru.resolve(this.metadata.lastAcknowledgedBatchId)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;return Jo(r>this.metadata.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),this.metadata.lastAcknowledgedBatchId=r,this.metadata.lastStreamToken=gc(n),_c(t).put(this.metadata)},t.prototype.getLastStreamToken=function(t){return Ru.resolve(this.metadata.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.metadata.lastStreamToken=gc(e),_c(t).put(this.metadata)},t.prototype.addMutationBatch=function(t,e,n){var r=this,i=this.nextBatchId;this.nextBatchId++;var o=new zu(i,e,n),s=this.serializer.toDbMutationBatch(this.userId,o);return bc(t).put(s).next(function(){for(var e=0,o=n;e<o.length;e++){var s=sc.key(r.userId,o[e].key.path,i);wc(t).put(s,sc.PLACEHOLDER)}return Ru.waitFor([])}).next(function(){return o})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return bc(t).get(this.keyForBatchId(e)).next(function(t){return t?n.serializer.fromDbMutationBatch(t):null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=Math.max(e,this.metadata.lastAcknowledgedBatchId)+1,i=IDBKeyRange.lowerBound(this.keyForBatchId(r)),o=null;return bc(t).iterate({range:i},function(t,e,i){e.userId===n.userId&&(Jo(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()}).next(function(){return o})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound(this.keyForBatchId(Wu),this.keyForBatchId(Number.POSITIVE_INFINITY));return bc(t).loadAll(n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesThroughBatchId=function(t,e){var n=this,r=IDBKeyRange.bound(this.keyForBatchId(Wu),this.keyForBatchId(e));return bc(t).loadAll(r).next(function(t){return t.map(function(t){return n.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=sc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return wc(t).iterate({range:i},function(r,i,s){var a=r[0],u=r[2],c=tc(r[1]);if(a===n.userId&&e.path.isEqual(c)){var l=n.keyForBatchId(u);return bc(t).get(l).next(function(t){null===t&&Yo("Dangling document-mutation reference found: "+r+" which points to "+l),o.push(n.serializer.fromDbMutationBatch(t))})}s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;Jo(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var r=e.path,i=r.length+1,o=sc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ba(Ts);return wc(t).iterate({range:s},function(t,e,o){var s=t[0],u=t[2],c=tc(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){var e=[],r=[];return a.forEach(function(i){var o=n.keyForBatchId(i);r.push(bc(t).get(o).next(function(t){null===t&&Yo("Dangling document-mutation reference found, which points to "+o),e.push(n.serializer.fromDbMutationBatch(t))}))}),Ru.waitFor(r).next(function(){return e})})},t.prototype.removeMutationBatches=function(t,e){for(var n=bc(t),r=wc(t),i=[],o=function(t){var e=IDBKeyRange.only(s.keyForBatchId(t.batchId)),o=0,a=n.iterate({range:e},function(t,e,n){return o++,n.delete()});i.push(a.next(function(){Jo(1===o,"Dangling document-mutation reference found: Missing batch "+t.batchId)}));for(var u=0,c=t.mutations;u<c.length;u++){var l=c[u],h=sc.key(s.userId,l.key.path,t.batchId);i.push(r.delete(h)),null!==s.garbageCollector&&s.garbageCollector.addPotentialGarbageKey(l.key)}},s=this,a=0,u=e;a<u.length;a++)o(u[a]);return Ru.waitFor(i)},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Ru.resolve();var r=IDBKeyRange.lowerBound(sc.prefixForUser(e.userId)),i=[];return wc(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=tc(t[1]);i.push(o)}else r.done()}).next(function(){Jo(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=this,r=sc.prefixForPath(this.userId,e.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return wc(t).iterate({range:o,keysOnly:!0},function(t,e,r){t[0]===n.userId&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})},t.prototype.keyForBatchId=function(t){return[this.userId,t]},t}();function gc(t){return Jo("string"==typeof t,"Persisting non-string stream token not supported."),t}function bc(t){return Sc(t,oc.store)}function wc(t){return Sc(t,sc.store)}function _c(t){return Sc(t,ic.store)}function Sc(t,e){return t instanceof dc?t.store(e):Yo("Invalid transaction object provided!")}var Ec=function(){function t(t){this.serializer=t,this.lastRemoteSnapshotVersion=Ia.MIN,this.metadata=null,this.garbageCollector=null}return t.prototype.start=function(t){var e=this;return Ic(t).get(lc.key).next(function(t){Jo(null!==t,"Missing metadata row that should be added by schema migration."),e.metadata=t;var n=t.lastRemoteSnapshotVersion;return e.lastRemoteSnapshotVersion=Ia.fromTimestamp(new Ta(n.seconds,n.nanos)),Ru.resolve()})},t.prototype.getHighestTargetId=function(){return this.metadata.highestTargetId},t.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},t.prototype.setLastRemoteSnapshotVersion=function(t,e){return this.lastRemoteSnapshotVersion=e,this.metadata.lastRemoteSnapshotVersion=e.toTimestamp(),Ic(t).put(lc.key,this.metadata)},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.metadata.targetCount+=1,n.updateMetadataFromQueryData(e),n.saveMetadata(t)})},t.prototype.updateQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.updateMetadataFromQueryData(e)?n.saveMetadata(t):Ru.resolve()})},t.prototype.removeQueryData=function(t,e){var n=this;return Jo(this.metadata.targetCount>0,"Removing from an empty query cache"),this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Tc(t).delete(e.targetId)}).next(function(){return n.metadata.targetCount-=1,n.saveMetadata(t)})},t.prototype.saveMetadata=function(t){return Ic(t).put(lc.key,this.metadata)},t.prototype.saveQueryData=function(t,e){return Tc(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t){var e=!1;return t.targetId>this.metadata.highestTargetId&&(this.metadata.highestTargetId=t.targetId,e=!0),e},Object.defineProperty(t.prototype,"count",{get:function(){return this.metadata.targetCount},enumerable:!0,configurable:!0}),t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Tc(t).iterate({range:i,index:uc.queryTargetsIndexName},function(t,r,i){var s=n.serializer.fromDbTarget(r);e.isEqual(s.query)&&(o=s,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=[],i=Cc(t);return e.forEach(function(t){var e=Ju(t.path);r.push(i.put(new cc(n,e)))}),Ru.waitFor(r)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=[],o=Cc(t);return e.forEach(function(t){var e=Ju(t.path);i.push(o.delete([n,e])),null!==r.garbageCollector&&r.garbageCollector.addPotentialGarbageKey(t)}),Ru.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Cc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return this.notifyGCForRemovedKeys(t,r).next(function(){return n.delete(r)})},t.prototype.notifyGCForRemovedKeys=function(t,e){var n=this,r=Cc(t);return null!==this.garbageCollector&&this.garbageCollector.isEager?r.iterate({range:e,keysOnly:!0},function(t,e,r){var i=tc(t[1]),o=new Ls(i);Jo(null!==n.garbageCollector,"GarbageCollector for query cache set to null during key removal."),n.garbageCollector.addPotentialGarbageKey(o)}):Ru.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Cc(t),i=Xa();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=tc(t[1]),o=new Ls(r);i=i.add(o)}).next(function(){return i})},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){Jo(null!==t,"Persistence Transaction cannot be null for query cache containsKey");var n,r=Ju(e.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),o=0;return Cc(t).iterate({index:cc.documentTargetsIndex,keysOnly:!0,range:i},function(t,e,n){o++,n.done()}).next(function(){return o>0})},t}();function Tc(t){return xc(t,uc.store)}function Ic(t){return xc(t,lc.store)}function Cc(t){return xc(t,cc.store)}function xc(t,e){return t instanceof dc?t.store(e):Yo("Invalid transaction object provided!")}var Oc=function(){function t(t){this.serializer=t}return t.prototype.addEntry=function(t,e){return kc(t).put(Ac(e.key),this.serializer.toDbRemoteDocument(e))},t.prototype.removeEntry=function(t,e){return kc(t).delete(Ac(e))},t.prototype.getEntry=function(t,e){var n=this;return kc(t).get(Ac(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this,r=za(),i=e.path.toArray(),o=IDBKeyRange.lowerBound(i);return kc(t).iterate({range:o},function(t,i,o){var s=n.serializer.fromDbRemoteDocument(i);e.path.isPrefixOf(s.key.path)?s instanceof Vs&&e.matches(s)&&(r=r.insert(s.key,s)):o.done()}).next(function(){return r})},t}();function kc(t){return t instanceof dc?t.store(ac.store):Yo("Invalid transaction object provided!")}function Ac(t){return t.path.toArray()}var Nc,Rc=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document);if(t.noDocument){var e=Ls.fromSegments(t.noDocument.path),n=t.noDocument.readTime,r=new Ta(n.seconds,n.nanos);return new Us(e,Ia.fromTimestamp(r))}return Yo("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof Vs){var e=this.remoteSerializer.toDocument(t);return new ac(null,e)}var n=t.key.path.toArray(),r=t.version.toTimestamp(),i=new nc(r.seconds,r.nanos);return new ac(new function(t,e){this.path=t,this.readTime=e}(n,i),null)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new oc(t,e.batchId,e.localWriteTime.toEpochMilliseconds(),r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=Ta.fromEpochMilliseconds(t.localWriteTimeMs);return new zu(t.batchId,r,n)},t.prototype.fromDbTarget=function(t){var e,n=new Ta(t.readTime.seconds,t.readTime.nanos),r=Ia.fromTimestamp(n);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new xa(e,t.targetId,fa.Listen,r,t.resumeToken)},t.prototype.toDbTarget=function(t){Jo(fa.Listen===t.purpose,"Only queries with purpose "+fa.Listen+" may be stored, got "+t.purpose);var e,n=t.snapshotVersion.toTimestamp(),r=new nc(n.seconds,n.nanos);e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),Jo("string"==typeof t.resumeToken,"Persisting non-string resume token not supported.");var i=t.resumeToken;return new uc(t.targetId,t.query.canonicalId(),r,i,0,e)},t}(),Dc="There is another tab open with offline persistence enabled. Only one such tab is allowed at a time. The other tab must be closed or persistence must be disabled.",Pc=function(){function t(e,n){this.ownerId=this.generateOwnerId(),this.dbName=e+t.MAIN_DATABASE,this.serializer=new Rc(n),this.localStoragePrefix=e}return t.prototype.start=function(){var e=this;return t.isAvailable()?(Jo(!this.started,"IndexedDbPersistence double-started!"),this.started=!0,fc.openOrCreate(this.dbName,2,ec).then(function(t){e.simpleDb=t}).then(function(){return e.tryAcquireOwnerLease()}).then(function(){e.scheduleOwnerLeaseRefreshes(),e.attachWindowUnloadHook()})):(this.persistenceError=new es(ts.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled."),Promise.reject(this.persistenceError))},t.prototype.shutdown=function(){var t=this;return Jo(this.started,"IndexedDbPersistence shutdown without start!"),this.started=!1,this.detachWindowUnloadHook(),this.stopOwnerLeaseRefreshes(),this.releaseOwnerLease().then(function(){t.simpleDb.close()})},t.prototype.getMutationQueue=function(t){return mc.forUser(t,this.serializer)},t.prototype.getQueryCache=function(){return new Ec(this.serializer)},t.prototype.getRemoteDocumentCache=function(){return new Oc(this.serializer)},t.prototype.runTransaction=function(t,e){var n=this;return this.persistenceError?Promise.reject(this.persistenceError):(Ko("IndexedDbPersistence","Starting transaction:",t),this.simpleDb.runTransaction("readwrite",hc,function(t){return n.ensureOwnerLease(t).next(function(){return e(t)})}))},t.isAvailable=function(){return fc.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.tryAcquireOwnerLease=function(){var t=this;return this.simpleDb.runTransaction("readwrite",[rc.store],function(e){var n=e.store(rc.store);return n.get("owner").next(function(e){if(t.validOwner(e))return Ko("IndexedDbPersistence","Valid owner already. Failing. Current owner:",e),t.persistenceError=new es(ts.FAILED_PRECONDITION,Dc),Ru.reject(t.persistenceError);var r=new rc(t.ownerId,Date.now());return Ko("IndexedDbPersistence","No valid owner. Acquiring owner lease. Current owner:",e,"New owner:",r),n.put("owner",r)})})},t.prototype.releaseOwnerLease=function(){var t=this;return this.simpleDb.runTransaction("readwrite",[rc.store],function(e){var n=e.store(rc.store);return n.get("owner").next(function(e){return null!==e&&e.ownerId===t.ownerId?(Ko("IndexedDbPersistence","Releasing owner lease."),n.delete("owner")):Ru.resolve()})})},t.prototype.ensureOwnerLease=function(t){var e=this;return t.store(rc.store).get("owner").next(function(t){return null===t||t.ownerId!==e.ownerId?(e.persistenceError=new es(ts.FAILED_PRECONDITION,Dc),Ru.reject(e.persistenceError)):Ru.resolve()})},t.prototype.validOwner=function(t){var e=Date.now();return!(null===t||t.leaseTimestampMs<e-5e3||(t.leaseTimestampMs>e?(Qo("Persistence owner-lease is in the future. Discarding.",t),1):t.ownerId===this.getZombiedOwnerId()))},t.prototype.scheduleOwnerLeaseRefreshes=function(){var t=this;this.ownerLeaseRefreshHandle=setInterval(function(){t.runTransaction("Refresh owner timestamp",function(e){return e.store(rc.store).put("owner",new rc(t.ownerId,Date.now()))}).catch(function(e){Qo(e),t.stopOwnerLeaseRefreshes()})},4e3)},t.prototype.stopOwnerLeaseRefreshes=function(){this.ownerLeaseRefreshHandle&&(clearInterval(this.ownerLeaseRefreshHandle),this.ownerLeaseRefreshHandle=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;this.windowUnloadHandler=function(){t.setZombiedOwnerId(t.ownerId),t.shutdown()},window.addEventListener("unload",this.windowUnloadHandler)},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.getZombiedOwnerId=function(){try{var t=window.localStorage.getItem(this.zombiedOwnerLocalStorageKey());return Ko("IndexedDbPersistence","Zombied ownerID from LocalStorage:",t),t}catch(t){return Qo("Failed to get zombie owner id.",t),null}},t.prototype.setZombiedOwnerId=function(t){try{null===t?window.localStorage.removeItem(this.zombiedOwnerLocalStorageKey()):window.localStorage.setItem(this.zombiedOwnerLocalStorageKey(),t)}catch(t){Qo("Failed to set zombie owner id.",t)}},t.prototype.zombiedOwnerLocalStorageKey=function(){return this.localStoragePrefix+"zombiedOwnerId"},t.prototype.generateOwnerId=function(){return Es.newId()},t.MAIN_DATABASE="main",t}(),Mc=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(t,e){var n=this;return this.remoteDocumentCache.getEntry(t,e).next(function(r){return n.computeLocalDocument(t,e,r)})},t.prototype.getDocuments=function(t,e){var n=this,r=[],i=Ha();return e.forEach(function(e){r.push(n.getDocument(t,e).next(function(t){t||(t=new Us(e,Ia.forDeletedDoc())),i=i.insert(e,t)}))}),Ru.waitFor(r).next(function(){return i})},t.prototype.getDocumentsMatchingQuery=function(t,e){return Ls.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new Ls(e)).next(function(t){var e=za();return t instanceof Vs&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(e){return r.computeLocalDocuments(t,e)}).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){for(var i=Xa(),o=0,s=e;o<s.length;o++)for(var a=0,u=s[o].mutations;a<u.length;a++){var c=u[a];n.get(c.key)||(i=i.add(c.key))}var l=[];return i.forEach(function(e){l.push(r.getDocument(t,e).next(function(t){t instanceof Vs&&(n=n.insert(t.key,t))}))}),Ru.waitFor(l)}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t.prototype.computeLocalDocument=function(t,e,n){return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(t){for(var r=0,i=t;r<i.length;r++)n=i[r].applyToLocalView(e,n);return n})},t.prototype.computeLocalDocuments=function(t,e){var n=this,r=[];return e.forEach(function(i,o){r.push(n.computeLocalDocument(t,i,o).next(function(t){t instanceof Vs?e=e.insert(t.key,t):t instanceof Us?e=e.remove(t.key):Yo("Unknown MaybeDocument: "+t)}))}),Ru.waitFor(r).next(function(){return e})},t}(),jc=function(){function t(t){this.remoteDocumentCache=t,this.changes=Ha()}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this.assertChanges().get(e);return n?Ru.resolve(n):this.remoteDocumentCache.getEntry(t,e)},t.prototype.apply=function(t){var e=this,n=[];return this.assertChanges().forEach(function(r,i){n.push(e.remoteDocumentCache.addEntry(t,i))}),this.changes=null,Ru.waitFor(n)},t.prototype.assertChanges=function(){return Jo(null!==this.changes,"Changes have already been applied."),this.changes},t}(),Lc=function(){function t(t,e,n){this.persistence=t,this.garbageCollector=n,this.localViewReferences=new Mu,this.targetIds={},this.targetIdGenerator=Uu.forLocalStore(),this.heldBatchResults=[],this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Mc(this.remoteDocuments,this.mutationQueue),this.garbageCollector.addGarbageSource(this.localViewReferences),this.garbageCollector.addGarbageSource(this.queryCache),this.garbageCollector.addGarbageSource(this.mutationQueue)}return t.prototype.start=function(){var t=this;return this.persistence.runTransaction("Start LocalStore",function(e){return t.startMutationQueue(e).next(function(){return t.startQueryCache(e)})})},t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.garbageCollector.removeGarbageSource(e.mutationQueue),e.mutationQueue=e.persistence.getMutationQueue(t),e.garbageCollector.addGarbageSource(e.mutationQueue),e.startMutationQueue(n)}).next(function(){return e.localDocuments=new Mc(e.remoteDocuments,e.mutationQueue),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=Xa(),o=0,s=[r,t];o<s.length;o++)for(var a=0,u=s[o];a<u.length;a++)for(var c=0,l=u[a].mutations;c<l.length;c++)i=i.add(l[c].key);return e.localDocuments.getDocuments(n,i)})})},t.prototype.startQueryCache=function(t){var e=this;return this.queryCache.start(t).next(function(){var t=e.queryCache.getHighestTargetId();e.targetIdGenerator=Uu.forLocalStore(t)})},t.prototype.startMutationQueue=function(t){var e=this;return this.mutationQueue.start(t).next(function(){return e.heldBatchResults=[],e.mutationQueue.getHighestAcknowledgedBatchId(t)}).next(function(n){return n!==Wu?e.mutationQueue.getAllMutationBatchesThroughBatchId(t,n):Ru.resolve([])}).next(function(n){return n.length>0?e.mutationQueue.removeMutationBatches(t,n):Ru.resolve()})},t.prototype.localWrite=function(t){var e=this;return this.persistence.runTransaction("Locally write mutations",function(n){var r,i=Ta.now();return e.mutationQueue.addMutationBatch(n,i,t).next(function(t){var i=(r=t).keys();return e.localDocuments.getDocuments(n,i)}).next(function(t){return{batchId:r.batchId,changes:t}})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch",function(n){var r;return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){if(e.shouldHoldBatchResult(t.commitVersion))return e.heldBatchResults.push(t),r=Xa(),Ru.resolve();var i=new jc(e.remoteDocuments);return e.releaseBatchResults(n,[t],i).next(function(t){return r=t,i.apply(n)})}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch",function(n){var r,i;return e.mutationQueue.lookupMutationBatch(n,t).next(function(i){return Jo(null!=i,"Attempt to reject nonexistent batch!"),r=i,e.mutationQueue.getHighestAcknowledgedBatchId(n).next(function(e){return Jo(t>e,"Acknowledged batches can't be rejected."),r})}).next(function(){return e.removeMutationBatch(n,r)}).next(function(t){return i=t,e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,i)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){return this.queryCache.getLastRemoteSnapshotVersion()},t.prototype.applyRemoteEvent=function(t){var e=this,n=new jc(this.remoteDocuments);return this.persistence.runTransaction("Apply remote event",function(r){var i=[];is(t.targetChanges,function(t,n){var o=e.targetIds[t];if(o){var s=n.mapping;if(s)if(s instanceof $a)i.push(e.queryCache.removeMatchingKeysForTargetId(r,t).next(function(){return e.queryCache.addMatchingKeys(r,s.documents,t)}));else{if(!(s instanceof tu))return Yo("Unknown mapping type: "+JSON.stringify(s));i.push(e.queryCache.removeMatchingKeys(r,s.removedDocuments,t).next(function(){return e.queryCache.addMatchingKeys(r,s.addedDocuments,t)}))}var a=n.resumeToken;a.length>0&&(o=o.update({resumeToken:a,snapshotVersion:n.snapshotVersion}),e.targetIds[t]=o,i.push(e.queryCache.updateQueryData(r,o)))}});var o=Xa();t.documentUpdates.forEach(function(t,s){o=o.add(t),i.push(n.getEntry(r,t).next(function(r){null==r||s.version.isEqual(Ia.MIN)||s.version.compareTo(r.version)>=0?n.addEntry(s):Ko("LocalStore","Ignoring outdated watch update for ",t,". Current version:",r.version," Watch version:",s.version),e.garbageCollector.addPotentialGarbageKey(t)}))});var s,a=e.queryCache.getLastRemoteSnapshotVersion(),u=t.snapshotVersion;return u.isEqual(Ia.MIN)||(Jo(u.compareTo(a)>=0,"Watch stream reverted to previous snapshot?? "+u+" < "+a),i.push(e.queryCache.setLastRemoteSnapshotVersion(r,u))),Ru.waitFor(i).next(function(){return e.releaseHeldBatchResults(r,n)}).next(function(t){return s=t,n.apply(r)}).next(function(){return e.localDocuments.getDocuments(r,o.unionWith(s))})})},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("Notify local view changes",function(n){for(var r=[],i=function(t){r.push(e.queryCache.getQueryData(n,t.query).next(function(n){Jo(null!==n,"Local view changes contain unallocated query.");var r=n.targetId;e.localViewReferences.addReferences(t.addedKeys,r),e.localViewReferences.removeReferences(t.removedKeys,r)}))},o=0,s=t;o<s.length;o++)i(s[o]);return Ru.waitFor(r)})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch",function(n){return void 0===t&&(t=Wu),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){if(i)return r=i,Ru.resolve();var o=e.targetIdGenerator.next();return r=new xa(t,o,fa.Listen),e.queryCache.addQueryData(n,r)}).next(function(){return Jo(!e.targetIds[r.targetId],"Tried to allocate an already allocated query: "+t),e.targetIds[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t){var e=this;return this.persistence.runTransaction("Release query",function(n){return e.queryCache.getQueryData(n,t).next(function(r){return Jo(null!=r,"Tried to release nonexistent query: "+t),e.localViewReferences.removeReferencesForId(r.targetId),delete e.targetIds[r.targetId],e.garbageCollector.isEager?e.queryCache.removeQueryData(n,r):Ru.resolve()}).next(function(){if(ss(e.targetIds)){var t=new jc(e.remoteDocuments);return e.releaseHeldBatchResults(n,t).next(function(){t.apply(n)})}return Ru.resolve()})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.collectGarbage=function(){var t=this;return this.persistence.runTransaction("Garbage collection",function(e){return t.garbageCollector.collectGarbage(e).next(function(n){var r=[];return n.forEach(function(n){r.push(t.remoteDocuments.removeEntry(e,n))}),Ru.waitFor(r)})})},t.prototype.releaseHeldBatchResults=function(t,e){for(var n=[],r=0,i=this.heldBatchResults;r<i.length;r++){var o=i[r];if(!this.isRemoteUpToVersion(o.commitVersion))break;n.push(o)}return 0===n.length?Ru.resolve(Xa()):(this.heldBatchResults.splice(0,n.length),this.releaseBatchResults(t,n,e))},t.prototype.isRemoteUpToVersion=function(t){var e=this.queryCache.getLastRemoteSnapshotVersion();return t.compareTo(e)<=0||ss(this.targetIds)},t.prototype.shouldHoldBatchResult=function(t){return!this.isRemoteUpToVersion(t)||this.heldBatchResults.length>0},t.prototype.releaseBatchResults=function(t,e,n){for(var r=this,i=Ru.resolve(),o=function(e){i=i.next(function(){return r.applyWriteToRemoteDocuments(t,e,n)})},s=0,a=e;s<a.length;s++)o(a[s]);return i.next(function(){return r.removeMutationBatches(t,e.map(function(t){return t.batch}))})},t.prototype.removeMutationBatch=function(t,e){return this.removeMutationBatches(t,[e])},t.prototype.removeMutationBatches=function(t,e){for(var n=Xa(),r=0,i=e;r<i.length;r++)for(var o=0,s=i[r].mutations;o<s.length;o++)n=n.add(s[o].key);return this.mutationQueue.removeMutationBatches(t,e).next(function(){return n})},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=e.batch,i=r.keys(),o=Ru.resolve();return i.forEach(function(i){o=o.next(function(){return n.getEntry(t,i)}).next(function(t){var o=t,s=e.docVersions.get(i);Jo(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&((o=r.applyToRemoteDocument(i,o,e))?n.addEntry(o):Jo(!t,"Mutation batch "+r+" applied to document "+t+" resulted in null"))})}),o},t}(),Vc=function(){function t(){this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=Wu,this.lastStreamToken=$o(),this.garbageCollector=null,this.batchesByDocumentKey=new Ba(ju.compareByKey)}return t.prototype.start=function(t){return 0===this.mutationQueue.length&&(this.nextBatchId=1,this.highestAcknowledgedBatchId=Wu),Jo(this.highestAcknowledgedBatchId<this.nextBatchId,"highestAcknowledgedBatchId must be less than the nextBatchId"),Ru.resolve()},t.prototype.checkEmpty=function(t){return Ru.resolve(0===this.mutationQueue.length)},t.prototype.getNextBatchId=function(t){return Ru.resolve(this.nextBatchId)},t.prototype.getHighestAcknowledgedBatchId=function(t){return Ru.resolve(this.highestAcknowledgedBatchId)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;Jo(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged"),o=this.mutationQueue[i];return Jo(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),Jo(!o.isTombstone(),"Can't acknowledge a previously removed batch"),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,Ru.resolve()},t.prototype.getLastStreamToken=function(t){return Ru.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Ru.resolve()},t.prototype.addMutationBatch=function(t,e,n){Jo(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&Jo(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new zu(r,e,n);this.mutationQueue.push(i);for(var o=0,s=n;o<s.length;o++)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new ju(s[o].key,r));return Ru.resolve(i)},t.prototype.lookupMutationBatch=function(t,e){return Ru.resolve(this.findMutationBatch(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){for(var n=this.mutationQueue.length,r=Math.max(e,this.highestAcknowledgedBatchId)+1,i=this.indexOfBatchId(r),o=i<0?0:i;o<n;o++){var s=this.mutationQueue[o];if(!s.isTombstone())return Ru.resolve(s)}return Ru.resolve(null)},t.prototype.getAllMutationBatches=function(t){return Ru.resolve(this.getAllLiveMutationBatchesBeforeIndex(this.mutationQueue.length))},t.prototype.getAllMutationBatchesThroughBatchId=function(t,e){var n=this.mutationQueue.length,r=this.indexOfBatchId(e);return r<0?r=0:r>=n?r=n:r++,Ru.resolve(this.getAllLiveMutationBatchesBeforeIndex(r))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ju(e,0),i=new ju(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){Jo(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);Jo(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Ru.resolve(o)},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=r;Ls.isDocumentKey(o)||(o=o.child(""));var s=new ju(new Ls(o),0),a=new Ba(Ts);this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!r.isPrefixOf(e)&&(e.length===i&&(a=a.add(t.targetOrBatchId)),!0)},s);var u=[];return a.forEach(function(t){var e=n.findMutationBatch(t);null!==e&&u.push(e)}),Ru.resolve(u)},t.prototype.removeMutationBatches=function(t,e){var n=e.length;Jo(n>0,"Should not remove mutations when none exist.");var r=e[0].batchId,i=this.mutationQueue.length,o=this.indexOfExistingBatchId(r,"removed");Jo(this.mutationQueue[o].batchId===r,"Removed batches must exist in the queue");for(var s=1,a=o+1;s<n&&a<i;)(f=this.mutationQueue[a]).isTombstone()?a++:(Jo(f.batchId===e[s].batchId,"Removed batches must be contiguous in the queue"),s++,a++);if(0===o){for(;a<i&&(f=this.mutationQueue[a]).isTombstone();a++);this.mutationQueue.splice(o,a-o)}else for(var u=o;u<a;u++)this.mutationQueue[u]=this.mutationQueue[u].toTombstone();for(var c=this.batchesByDocumentKey,l=0,h=e;l<h.length;l++)for(var f,p=(f=h[l]).batchId,d=0,y=f.mutations;d<y.length;d++){var v=y[d].key;null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(v);var m=new ju(v,p);c=c.delete(m)}return this.batchesByDocumentKey=c,Ru.resolve()},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=new ju(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Ru.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&Jo(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Ru.resolve()},t.prototype.getAllLiveMutationBatchesBeforeIndex=function(t){for(var e=[],n=0;n<t;n++){var r=this.mutationQueue[n];r.isTombstone()||e.push(r)}return e},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return Jo(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return Jo(n.batchId===t,"If found batch must match"),n.isTombstone()?null:n},t}(),Uc=function(){function t(){this.queries=new ku(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=Ia.MIN,this.highestTargetId=0,this.references=new Mu,this.targetCount=0}return t.prototype.start=function(t){return Ru.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},t.prototype.getHighestTargetId=function(){return this.highestTargetId},t.prototype.setLastRemoteSnapshotVersion=function(t,e){return this.lastRemoteSnapshotVersion=e,Ru.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e)},t.prototype.addQueryData=function(t,e){return Jo(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,Ru.resolve()},t.prototype.updateQueryData=function(t,e){return Jo(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),Ru.resolve()},t.prototype.removeQueryData=function(t,e){return Jo(this.targetCount>0,"Removing a target from an empty cache"),Jo(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Ru.resolve()},Object.defineProperty(t.prototype,"count",{get:function(){return this.targetCount},enumerable:!0,configurable:!0}),t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Ru.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.references.addReferences(e,n),Ru.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){return this.references.removeReferences(e,n),Ru.resolve()},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Ru.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Ru.resolve(n)},t.prototype.setGarbageCollector=function(t){this.references.setGarbageCollector(t)},t.prototype.containsKey=function(t,e){return this.references.containsKey(t,e)},t}(),Fc=function(){function t(){this.docs=Ha()}return t.prototype.addEntry=function(t,e){return this.docs=this.docs.insert(e.key,e),Ru.resolve()},t.prototype.removeEntry=function(t,e){return this.docs=this.docs.remove(e),Ru.resolve()},t.prototype.getEntry=function(t,e){return Ru.resolve(this.docs.get(e))},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=za(),r=new Ls(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),s=o.value;if(!e.path.isPrefixOf(o.key.path))break;s instanceof Vs&&e.matches(s)&&(n=n.insert(s.key,s))}return Ru.resolve(n)},t}(),Bc=function(){function t(){this.mutationQueues={},this.remoteDocumentCache=new Fc,this.queryCache=new Uc,this.started=!1}return t.prototype.start=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return Jo(!this.started,"MemoryPersistence double-started!"),this.started=!0,[2]})})},t.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return Jo(this.started,"MemoryPersistence shutdown without start!"),this.started=!1,[2]})})},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Vc,this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e){return Ko("MemoryPersistence","Starting transaction:",t),e(new qc).toPromise()},t}(),qc=function(){},Hc=function(){function t(){this.isEager=!1}return t.prototype.addGarbageSource=function(t){},t.prototype.removeGarbageSource=function(t){},t.prototype.addPotentialGarbageKey=function(t){},t.prototype.collectGarbage=function(t){return Ru.resolve(Xa())},t}(),Wc=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}();!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout"}(Nc||(Nc={}));var zc,Gc=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new es(ts.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueue(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),Kc=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw Qo("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),Jo(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=Gc.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&Yo("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){Jo(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){return this.delayedOperations.findIndex(function(e){return e.timerId===t})>=0},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){Jo(t===Nc.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==Nc.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);Jo(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),Qc=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){this.cancel();var e=this.currentBaseMs+this.jitterDelayMs();this.currentBaseMs>0&&Ko("ExponentialBackoff","Backing off for "+e+" ms (base delay: "+this.currentBaseMs+" ms)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,e,t),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();!function(t){t[t.Initial=0]="Initial",t[t.Auth=1]="Auth",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t[t.Stopped=5]="Stopped"}(zc||(zc={}));var Xc=1e3,Yc=6e4,Jc=1.5,Zc=function(){function t(t,e,n,r,i){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.inactivityTimerPromise=null,this.stream=null,this.listener=null,this.backoff=new Qc(t,e,Xc,Jc,Yc),this.state=zc.Initial}return t.prototype.isStarted=function(){return this.state===zc.Backoff||this.state===zc.Auth||this.state===zc.Open},t.prototype.isOpen=function(){return this.state===zc.Open},t.prototype.start=function(t){this.state!==zc.Error?(Jo(this.state===zc.Initial,"Already started"),this.listener=t,this.auth()):this.performBackoff(t)},t.prototype.stop=function(){this.isStarted()&&this.close(zc.Stopped)},t.prototype.inhibitBackoff=function(){Jo(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=zc.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.inactivityTimerPromise&&(this.inactivityTimerPromise=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.isOpen()?[2,this.close(zc.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.inactivityTimerPromise&&(this.inactivityTimerPromise.cancel(),this.inactivityTimerPromise=null)},t.prototype.close=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n;return o.__generator(this,function(r){return Jo(t===zc.Error||ha(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),t!==zc.Error?this.backoff.reset():e&&e.code===ts.RESOURCE_EXHAUSTED&&(Qo(e.toString()),Qo("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,n=this.listener,this.listener=null,t!==zc.Stopped?[2,n.onClose(e)]:[2]})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;Jo(this.state===zc.Initial,"Must be in initial state to auth"),this.state=zc.Auth,this.credentialsProvider.getToken(!1).then(function(e){t.startStream(e)},function(e){t.queue.enqueue(function(){return o.__awaiter(t,void 0,void 0,function(){var t;return o.__generator(this,function(n){return this.state!==zc.Stopped?(t=new es(ts.UNKNOWN,"Fetching auth token failed: "+e.message),[2,this.handleStreamClose(t)]):[2]})})})})},t.prototype.startStream=function(t){var e=this;if(this.state!==zc.Stopped){Jo(this.state===zc.Auth,"Trying to start stream in a non-auth state");var n=function(t,n){e.queue.enqueue(function(){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(e){return this.stream===t?[2,n()]:[2]})})})};if(null!==this.listener){var r=this.startRpc(t);this.stream=r,this.stream.onOpen(function(){n(r,function(){return Jo(e.state===zc.Auth,"Expected stream to be in state auth, but was "+e.state),e.state=zc.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(r,function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(r,function(){return e.onMessage(t)})})}}},t.prototype.performBackoff=function(t){var e=this;Jo(this.state===zc.Error,"Should only perform backoff in an error case"),this.state=zc.Backoff,this.backoff.backoffAndRun(function(){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(e){return this.state===zc.Stopped?[2]:(this.state=zc.Initial,this.start(t),Jo(this.isStarted(),"PersistentStream should have started"),[2])})})})},t.prototype.handleStreamClose=function(t){return Jo(this.isStarted(),"Can't handle server close on non-started stream"),Ko("PersistentStream","close with error: "+t),this.stream=null,this.close(zc.Error,t)},t}(),$c=function(t){function e(e,n,r,i){var o=t.call(this,e,Nc.ListenStreamConnectionBackoff,Nc.ListenStreamIdle,n,r)||this;return o.serializer=i,o}return o.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Zc),tl=function(t){function e(e,n,r,i){var o=t.call(this,e,Nc.WriteStreamConnectionBackoff,Nc.WriteStreamIdle,n,r)||this;return o.serializer=i,o.handshakeComplete_=!1,o}return o.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(e){this.handshakeComplete_=!1,t.prototype.start.call(this,e)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(Jo(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return Jo(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){Jo(this.isOpen(),"Writing handshake requires an opened stream"),Jo(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;Jo(this.isOpen(),"Writing mutations requires an opened stream"),Jo(this.handshakeComplete_,"Handshake must be complete before writing mutations"),Jo(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(Zc),el=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(){return new tl(this.queue,this.connection,this.credentials,this.serializer)},t.prototype.newPersistentWatchStream=function(){return new $c(this.queue,this.connection,this.credentials,this.serializer)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Ha();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);Jo(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken(!1).then(function(r){return n.connection.invokeRPC(t,e,r)})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken(!1).then(function(r){return n.connection.invokeStreamingRPC(t,e,r)})},t}(),nl=function(){function t(t){this.datastore=t,this.readVersions=Ka(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e=t.version;t instanceof Us&&(e=Ia.forDeletedDoc());var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new es(ts.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){return e.recordVersion(t)}),t})},t.prototype.write=function(t){if(this.committed)throw new es(ts.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?Ra.updateTime(e):Ra.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(Ia.forDeletedDoc()))throw new es(ts.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?Ra.updateTime(e):Ra.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new La(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,Ia.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}(),rl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=_u.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;this.setAndBroadcast(_u.Unknown),null===this.onlineStateTimer&&(this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Nc.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,Jo(t.state===_u.Unknown,"Timer should be canceled if we transitioned to a different state."),Ko("OnlineStateTracker","Watch stream didn't reach online or offline within 10000ms. Considering client offline."),t.logClientOfflineWarningIfNecessary(),t.setAndBroadcast(_u.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(){this.state===_u.Online?this.setAndBroadcast(_u.Unknown):(this.watchStreamFailures++,this.watchStreamFailures>=2&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(),this.setAndBroadcast(_u.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===_u.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(){this.shouldWarnClientIsOffline&&(Qo("Could not reach Firestore backend."),this.shouldWarnClientIsOffline=!1)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),il=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.pendingWrites=[],this.lastBatchSeen=Wu,this.listenTargets={},this.pendingTargetResponses={},this.accumulatedWatchChanges=[],this.watchStream=null,this.writeStream=null,this.onlineStateTracker=new rl(n,r)}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.isNetworkEnabled=function(){return Jo(null==this.watchStream==(null==this.writeStream),"WatchStream and WriteStream should both be null or non-null"),null!=this.watchStream},t.prototype.enableNetwork=function(){var t=this;return this.isNetworkEnabled()?Promise.resolve():(this.watchStream=this.datastore.newPersistentWatchStream(),this.writeStream=this.datastore.newPersistentWriteStream(),this.localStore.getLastStreamToken().then(function(e){return t.writeStream.lastStreamToken=e,t.shouldStartWatchStream()?t.startWatchStream():t.onlineStateTracker.set(_u.Unknown),t.fillWritePipeline()}))},t.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.disableNetworkInternal(),this.onlineStateTracker.set(_u.Offline),[2]})})},t.prototype.disableNetworkInternal=function(){this.isNetworkEnabled()&&(this.watchStream.stop(),this.writeStream.stop(),this.cleanUpWatchStreamState(),this.cleanUpWriteStreamState(),this.writeStream=null,this.watchStream=null)},t.prototype.shutdown=function(){return Ko("RemoteStore","RemoteStore shutting down."),this.disableNetworkInternal(),this.onlineStateTracker.set(_u.Unknown),Promise.resolve()},t.prototype.listen=function(t){Jo(!rs(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.isNetworkEnabled()&&this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){Jo(rs(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.isNetworkEnabled()&&this.watchStream.isOpen()&&(this.sendUnwatchRequest(t),ss(this.listenTargets)&&this.watchStream.markIdle())},t.prototype.sendWatchRequest=function(t){this.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.recordPendingTargetRequest=function(t){this.pendingTargetResponses[t]=(this.pendingTargetResponses[t]||0)+1},t.prototype.startWatchStream=function(){Jo(this.shouldStartWatchStream(),"startWriteStream() called when shouldStartWatchStream() is false."),this.watchStream.start({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.isNetworkEnabled()&&!this.watchStream.isStarted()&&!ss(this.listenTargets)},t.prototype.cleanUpWatchStreamState=function(){this.accumulatedWatchChanges=[],this.pendingTargetResponses={}},t.prototype.onWatchStreamOpen=function(){return o.__awaiter(this,void 0,void 0,function(){var t=this;return o.__generator(this,function(e){return is(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return Jo(this.isNetworkEnabled(),"onWatchStreamClose() should only be called when the network is enabled"),this.cleanUpWatchStreamState(),this.onlineStateTracker.handleWatchStreamFailure(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(_u.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n;return o.__generator(this,function(r){return this.onlineStateTracker.set(_u.Online),t instanceof iu&&t.state===ru.Removed&&t.cause?[2,this.handleTargetError(t)]:(this.accumulatedWatchChanges.push(t),!e.isEqual(Ia.MIN)&&e.compareTo(this.localStore.getLastRemoteSnapshotVersion())>=0?(n=this.accumulatedWatchChanges,this.accumulatedWatchChanges=[],[2,this.handleWatchChangeBatch(e,n)]):[2])})})},t.prototype.handleWatchChangeBatch=function(t,e){var n=this,r=new ou(t,this.listenTargets,this.pendingTargetResponses);r.addChanges(e);var i=r.createRemoteEvent();this.pendingTargetResponses=r.pendingTargetResponses;var o=[];return is(r.existenceFilters,function(e,r){var s=n.listenTargets[e];if(s){var a=s.query;if(a.isDocumentQuery())if(0===r.count){var u=new Ls(a.path),c=new Us(u,t);i.addDocumentUpdate(c)}else Jo(1===r.count,"Single document existence filter with count: "+r.count);else{var l=n.localStore.remoteDocumentKeys(e).then(function(t){if(i.targetChanges[e]){var o=i.targetChanges[e].mapping;null!==o&&(o instanceof tu?t=o.applyToKeySet(t):(Jo(o instanceof $a,"Expected either reset or update mapping but got something else: "+o),t=o.documents))}if(t.size!==r.count){i.handleExistenceFilterMismatch(e);var u=new xa(a,e,s.purpose);n.listenTargets[e]=u,n.sendUnwatchRequest(e);var c=new xa(a,e,fa.ExistenceFilterMismatch);n.sendWatchRequest(c)}});o.push(l)}}}),Promise.all(o).then(function(){return is(i.targetChanges,function(t,e){if(e.resumeToken.length>0){var r=n.listenTargets[t];r&&(n.listenTargets[t]=r.update({resumeToken:e.resumeToken,snapshotVersion:e.snapshotVersion}))}}),n.syncEngine.applyRemoteEvent(i)})},t.prototype.handleTargetError=function(t){var e=this;Jo(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(e){return rs(this.listenTargets,t)?(delete this.listenTargets[t],[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.cleanUpWriteStreamState=function(){this.lastBatchSeen=Wu,Ko("RemoteStore","Stopping write stream with "+this.pendingWrites.length+" pending writes"),this.pendingWrites=[]},t.prototype.fillWritePipeline=function(){return o.__awaiter(this,void 0,void 0,function(){var t=this;return o.__generator(this,function(e){return this.canWriteMutations()?[2,this.localStore.nextMutationBatch(this.lastBatchSeen).then(function(e){if(null!==e)return t.commit(e),t.fillWritePipeline();0===t.pendingWrites.length&&t.writeStream.markIdle()})]:[2]})})},t.prototype.canWriteMutations=function(){return this.isNetworkEnabled()&&this.pendingWrites.length<10},t.prototype.outstandingWrites=function(){return this.pendingWrites.length},t.prototype.commit=function(t){Jo(this.canWriteMutations(),"commit called when batches can't be written"),this.lastBatchSeen=t.batchId,this.pendingWrites.push(t),this.shouldStartWriteStream()?this.startWriteStream():this.isNetworkEnabled()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.isNetworkEnabled()&&!this.writeStream.isStarted()&&this.pendingWrites.length>0},t.prototype.startWriteStream=function(){Jo(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})},t.prototype.onWriteStreamOpen=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.pendingWrites;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)})},t.prototype.onMutationResult=function(t,e){var n=this;Jo(this.pendingWrites.length>0,"Got result for empty pending writes");var r=this.pendingWrites.shift(),i=Gu.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return o.__awaiter(this,void 0,void 0,function(){var e=this;return o.__generator(this,function(n){return Jo(this.isNetworkEnabled(),"onWriteStreamClose() should only be called when the network is enabled"),t&&this.pendingWrites.length>0?(Jo(!!t,"We have pending writes, but the write stream closed without an error"),[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]):[2]})})},t.prototype.handleHandshakeError=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){return Ua(t.code)||t.code===ts.ABORTED?(Ko("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=$o(),[2,this.localStore.setLastStreamToken($o())]):[2]})})},t.prototype.handleWriteError=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n=this;return o.__generator(this,function(r){return Ua(t.code)?(e=this.pendingWrites.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2]})})},t.prototype.createTransaction=function(){return new nl(this.datastore)},t.prototype.handleUserChange=function(t){if(Ko("RemoteStore","RemoteStore changing users: uid=",t.uid),this.isNetworkEnabled())return this.disableNetworkInternal(),this.onlineStateTracker.set(_u.Unknown),this.enableNetwork()},t}(),ol=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r}return t.prototype.start=function(t){var e=this,n=new Wc,r=new Wc,i=!1;return this.credentials.setUserChangeListener(function(o){i?e.asyncQueue.enqueue(function(){return e.handleUserChange(o)}):(i=!0,e.initializePersistence(t,r).then(function(){return e.initializeRest(o)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueue(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.remoteStore.enableNetwork()})},t.prototype.initializePersistence=function(t,e){var n=this;return t?this.startIndexedDbPersistence().then(e.resolve).catch(function(t){return e.reject(t),n.canFallback(t)?(console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),n.startMemoryPersistence()):Promise.reject(t)}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t.code===ts.FAILED_PRECONDITION||t.code===ts.UNIMPLEMENTED},t.prototype.startIndexedDbPersistence=function(){this.garbageCollector=new Hc;var t=Pc.buildStoragePrefix(this.databaseInfo),e=new pu(this.databaseInfo.databaseId,{useProto3Json:!0});return this.persistence=new Pc(t,e),this.persistence.start()},t.prototype.startMemoryPersistence=function(){return this.garbageCollector=new Du,this.persistence=new Bc,this.persistence.start()},t.prototype.initializeRest=function(t){var e=this;return this.platform.loadConnection(this.databaseInfo).then(function(n){e.localStore=new Lc(e.persistence,t,e.garbageCollector);var r=e.platform.newSerializer(e.databaseInfo.databaseId),i=new el(e.asyncQueue,n,e.credentials,r);return e.remoteStore=new il(e.localStore,i,e.asyncQueue,function(t){e.syncEngine.applyOnlineStateChange(t),e.eventMgr.applyOnlineStateChange(t)}),e.syncEngine=new Hu(e.localStore,e.remoteStore,t),e.remoteStore.syncEngine=e.syncEngine,e.eventMgr=new Au(e.syncEngine),e.localStore.start()}).then(function(){return e.remoteStore.start()})},t.prototype.handleUserChange=function(t){return this.asyncQueue.verifyOperationInProgress(),Ko("FirestoreClient","User Changed: "+t.uid),this.syncEngine.handleUserChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.remoteStore.disableNetwork()})},t.prototype.shutdown=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.credentials.removeUserChangeListener(),t.remoteStore.shutdown()}).then(function(){return t.persistence.shutdown()})},t.prototype.listen=function(t,e,n){var r=this,i=new Nu(t,e,n);return this.asyncQueue.enqueue(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueue(function(){return e.eventMgr.unlisten(t)})},t.prototype.write=function(t){var e=this,n=new Wc;return this.asyncQueue.enqueue(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),sl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),al=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),ul=function(){function t(){this.userListener=null}return t.prototype.getToken=function(t){return Promise.resolve(null)},t.prototype.setUserChangeListener=function(t){Jo(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=t,t(al.UNAUTHENTICATED)},t.prototype.removeUserChangeListener=function(){Jo(null!==this.userListener,"removeUserChangeListener() when no listener registered"),this.userListener=null},t}(),cl=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.userCounter=0,this.userListener=null,this.tokenListener=function(){var t=e.getUser();e.currentUser&&t.isEqual(e.currentUser)||(e.currentUser=t,e.userCounter++,e.userListener&&e.userListener(e.currentUser))},this.userCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(t){var e=this;Jo(null!=this.tokenListener,"getToken cannot be called after listener removed.");var n=this.userCounter;return this.app.INTERNAL.getToken(t).then(function(t){if(e.userCounter!==n)throw new es(ts.ABORTED,"getToken aborted due to uid change.");return t?(Jo("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}(t.accessToken,e.currentUser)):null})},t.prototype.setUserChangeListener=function(t){Jo(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeUserChangeListener=function(){Jo(null!=this.tokenListener,"removeUserChangeListener() called twice"),Jo(null!==this.userListener,"removeUserChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.userListener=null},t.prototype.getUser=function(){"function"!=typeof this.app.INTERNAL.getUid&&Yo("This version of the Firestore SDK requires at least version 3.7.0 of firebase.js.");var t=this.app.INTERNAL.getUid();return Jo(null===t||"string"==typeof t,"Received invalid UID: "+t),new al(t)},t}(),ll=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=al.FIRST_PARTY,Jo(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),hl=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,Jo(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(t){return Promise.resolve(new ll(this.gapi,this.sessionIndex))},t.prototype.setUserChangeListener=function(t){t(al.FIRST_PARTY)},t.prototype.removeUserChangeListener=function(){},t}();function fl(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var pl,dl=function(){function t(){}return t.delete=function(){return yl.instance},t.serverTimestamp=function(){return vl.instance},t.prototype.isEqual=function(t){return this===t},t}(),yl=function(t){function e(){return t.call(this)||this}return o.__extends(e,t),e.instance=new e,e}(dl),vl=function(t){function e(){return t.call(this)||this}return o.__extends(e,t),e.instance=new e,e}(dl),ml=ns(dl,"Use FieldValue.<field>() instead."),gl=/^__.*__$/,bl=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new Ma(t,this.data,this.fieldMask,e):new Pa(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new ja(t,this.fieldTransforms)),n},t}(),wl=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new Ma(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new ja(t,this.fieldTransforms)),n},t}();function _l(t){switch(t){case pl.Set:case pl.MergeSet:case pl.Update:return!0;case pl.QueryValue:return!1;default:throw Yo("Unexpected case for UserDataSource: "+t)}}!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.QueryValue=3]="QueryValue"}(pl||(pl={}));var Sl=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new es(ts.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(_l(this.dataSource)&&gl.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),El=function(t,e){this.databaseId=t,this.key=e},Tl=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new Sl(pl.Set,t,js.EMPTY_PATH);Cl("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new bl(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e){var n=new Sl(pl.MergeSet,t,js.EMPTY_PATH);Cl("Data must be an object, but it was:",n,e);var r=this.parseData(e,n),i=new Oa(n.fieldMask);return new bl(r,i,n.fieldTransforms)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new Sl(pl.Update,t,js.EMPTY_PATH);Cl("Data must be an object, but it was:",r,e);var i=[],o=oa.EMPTY;os(e,function(e,s){var a=Ol(t,e),u=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,u))instanceof yl)i.push(a);else{var c=n.parseData(s,u);null!=c&&(i.push(a),o=o.set(a,c))}});var s=new Oa(i);return new wl(o,s,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new Sl(pl.Update,t,js.EMPTY_PATH),o=[xl(t,e)],s=[n];if(r.length%2!=0)throw new es(ts.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(xl(t,r[a])),s.push(r[a+1]);var u=[],c=oa.EMPTY;for(a=0;a<o.length;++a){var l=o[a],h=i.childContextForFieldPath(l),f=this.runPreConverter(s[a],h);if(f instanceof yl)u.push(l);else{var p=this.parseData(f,h);null!=p&&(u.push(l),c=c.set(l,p))}}var d=new Oa(u);return new wl(c,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new Sl(pl.QueryValue,t,js.EMPTY_PATH),r=this.parseData(e,n);return Jo(null!=r,"Parsed data should not be null."),Jo(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=kl(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if((t=this.runPreConverter(t,e))instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return e.path&&e.fieldMask.push(e.path),this.parseArray(t,e)}return Il(t)?(Cl("Unsupported field value:",e,t),this.parseObject(t,e)):(e.path&&e.fieldMask.push(e.path),this.parseScalarValue(t,e))},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=this.parseData(o[i],e.childContextForArray(r));null==s&&(s=Ks.INSTANCE),n.push(s),r++}return new sa(n)},t.prototype.parseObject=function(t,e){var n=this,r=new Fs(Ts);return os(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new oa(r)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Ks.INSTANCE;if("number"==typeof t)return function(t){return la(t)&&t<=ca&&t>=ua}(t)?new Js(t):new Zs(t);if("boolean"==typeof t)return Qs.of(t);if("string"==typeof t)return new $s(t);if(t instanceof Date)return new ta(Ta.fromDate(t));if(t instanceof As)return new ia(t);if(t instanceof Os)return new na(t);if(t instanceof El)return new ra(t.databaseId,t.key);if(t instanceof dl){if(t instanceof yl){if(e.dataSource===pl.MergeSet)return null;throw e.dataSource===pl.Update?(Jo(null==e.path||e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() can only be used with update() and set() with {merge:true}")}if(t instanceof vl){if(!_l(e.dataSource))throw e.createError("FieldValue.serverTimestamp() can only be used with set() and update()");if(null===e.path)throw e.createError("FieldValue.serverTimestamp() is not currently supported inside arrays");return e.fieldTransforms.push(new Aa(e.path,ka.instance)),null}return Yo("Unknown FieldValue type: "+t)}throw e.createError("Unsupported field value: "+ms(t))},t}();function Il(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof As||t instanceof Os||t instanceof El||t instanceof dl)}function Cl(t,e,n){if(!Il(n)||!vs(n)){var r=ms(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function xl(t,e){if(e instanceof Su)return e._internalPath;if("string"==typeof e)return Ol(t,e);throw new es(ts.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ol(t,e){try{return function(t){if(t.search(Eu)>=0)throw new es(ts.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Su.bind.apply(Su,[void 0].concat(t.split("."))))}catch(e){throw new es(ts.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=kl(e);throw new es(ts.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function kl(t){return t instanceof Error?t.message:t.toString()}var Al="firestore.googleapis.com",Nl=!0,Rl=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new es(ts.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Al,this.ssl=Nl}else ps("settings","string","host",t.host),this.host=t.host,ds("settings","boolean","ssl",t.ssl),this.ssl=void 0!==(e=t.ssl)?e:Nl;var e;bs("settings",t,["host","ssl","credentials"]),ds("settings","object","credentials",t.credentials),this.credentials=t.credentials}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials},t}(),Dl=function(){},Pl=function(){function t(e){var n=this;this._queue=new Kc,this.INTERNAL={delete:function(){return o.__awaiter(n,void 0,void 0,function(){return o.__generator(this,function(t){return this._firestoreClient?[2,this._firestoreClient.shutdown()]:[2]})})}};var r=new Dl;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new cl(i)}else{var s=e;if(!s.projectId)throw new es(ts.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new Rs(s.projectId,s.database),r.persistenceKey="[DEFAULT]",r.credentials=new ul}r.settings=new Rl({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(us("Firestore.settings",arguments,1),hs("Firestore.settings","object",1,t),rs(t,"persistence"))throw new es(ts.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Rl(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new es(ts.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=function(t){if(!t)return new ul;switch(t.type){case"gapi":return new hl(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new es(ts.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(){if(this._firestoreClient)throw new es(ts.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(!0)},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(!1),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;Jo(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),Jo(!this._firestoreClient,"configureClient() called multiple times");var n=new function(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r}(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new Tl(function(t){if(t instanceof Ll){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new es(ts.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new El(e._config.databaseId,t._key)}return t}),this._firestoreClient=new ol(Zo.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!rs(e,"projectId")){if(rs(e,"firestoreId"))throw new es(ts.INVALID_ARGUMENT,'"firestoreId" is now specified as "projectId" in firebase.initializeApp.');throw new es(ts.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.')}if(rs(e,"firestoreOptions"))throw new es(ts.INVALID_ARGUMENT,'"firestoreOptions" values are now specified with Firestore.settings()');var n=e.projectId;if(!n||"string"!=typeof n)throw new es(ts.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Rs(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new es(ts.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(us("Firestore.collection",arguments,1),hs("Firestore.collection","string",1,t),!t)throw new es(ts.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new Hl(Ps.fromString(t),this)},t.prototype.doc=function(t){if(us("Firestore.doc",arguments,1),hs("Firestore.doc","string",1,t),!t)throw new es(ts.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),Ll.forPath(Ps.fromString(t),this)},t.prototype.runTransaction=function(t){var e=this;return us("Firestore.runTransaction",arguments,1),hs("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new Ml(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new jl(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(zo()){case Wo.DEBUG:return"debug";case Wo.ERROR:return"error";case Wo.SILENT:return"silent";default:return Yo("Unknown log level: "+zo())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(us("Firestore.setLogLevel",arguments,1),hs("Firestore.setLogLevel","string",1,t),t){case"debug":Go(Wo.DEBUG);break;case"error":Go(Wo.ERROR);break;case"silent":Go(Wo.SILENT);break;default:throw new es(ts.INVALID_ARGUMENT,"Invalid log level: "+t)}},t}(),Ml=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;us("Transaction.get",arguments,1);var n=Gl("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Yo("Mismatch in docs returned from document lookup.");var r=t[0];return new Ul(e._firestore,n._key,r instanceof Us?null:r,!1)})},t.prototype.set=function(t,e,n){ls("Transaction.set",arguments,2,3);var r=Gl("Transaction.set",t,this._firestore),i=(n=Wl("Transaction.set",n)).merge?this._firestore._dataConverter.parseMergeData("Transaction.set",e):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Su?(cs("Transaction.update",arguments,3),r=Gl("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(us("Transaction.update",arguments,2),r=Gl("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){us("Transaction.delete",arguments,1);var e=Gl("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),jl=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){ls("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Gl("WriteBatch.set",t,this._firestore),i=(n=Wl("WriteBatch.set",n)).merge?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,Ra.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Su?(cs("WriteBatch.update",arguments,3),r=Gl("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(us("WriteBatch.update",arguments,2),r=Gl("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,Ra.exists(!0))),this},t.prototype.delete=function(t){us("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Gl("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new La(e._key,Ra.NONE)),this},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new es(ts.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ll=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new es(ts.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new Ls(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Hl(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(us("DocumentReference.collection",arguments,1),hs("DocumentReference.collection","string",1,t),!t)throw new es(ts.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Ps.fromString(t);return new Hl(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw ws("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){ls("DocumentReference.set",arguments,1,2);var n=(e=Wl("DocumentReference.set",e)).merge?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,Ra.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Su?(cs("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(us("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,Ra.exists(!0)))},t.prototype.delete=function(){return us("DocumentReference.delete",arguments,0),this._firestoreClient.write([new La(this._key,Ra.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ls("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||fl(t[i])||(bs("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),ds("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeDocumentMetadataChanges:r.includeMetadataChanges,includeQueryMetadataChanges:r.includeMetadataChanges};return fl(t[i])?n=t[i]:(hs("DocumentReference.onSnapshot","function",i,t[i]),fs("DocumentReference.onSnapshot","function",i+1,t[i+1]),fs("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new sl({next:function(t){if(e.next){Jo(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new Ul(n.firestore,n._key,r,t.fromCache))}},error:r}),o=this._firestoreClient.listen(pa.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(){var t=this;return us("DocumentReference.get",arguments,0),new Promise(function(e,n){var r=t.onSnapshotInternal({includeQueryMetadataChanges:!0,includeDocumentMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){r(),!t.exists&&t.metadata.fromCache?n(new es(ts.ABORTED,"Failed to get document because the client is offline.")):e(t)},error:n})})},t}(),Vl=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ul=function(){function t(t,e,n,r){this._firestore=t,this._key=e,this._document=n,this._fromCache=r}return t.prototype.data=function(t){return ls("DocumentSnapshot.data",arguments,0,1),t=zl("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,zs.fromSnapshotOptions(t)):void 0},t.prototype.get=function(t,e){if(ls("DocumentSnapshot.get",arguments,1,2),e=zl("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(xl("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,zs.fromSnapshotOptions(e))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ll(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Vl(null!==this._document&&this._document.hasLocalMutations,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw ws("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof oa)return this.convertObject(t,e);if(t instanceof sa)return this.convertArray(t,e);if(t instanceof ra){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||Qo("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Ll(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Fl=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return o.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return Jo("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(Ul),Bl=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){var i;us("Query.where",arguments,3),hs("Query.where","string",2,n),gs("Query.where",3,r);var o=xl("Query.where",e);if(o.isKeyField())if("string"==typeof r){if(-1!==r.indexOf("/"))throw new es(ts.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new es(ts.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var s=this._query.path.child(new Ps([r]));Jo(s.length%2==0,"Path should be a document key"),i=new ra(this.firestore._databaseId,new Ls(s))}else{if(!(r instanceof Ll))throw new es(ts.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+ms(r)+".");i=new ra(this.firestore._databaseId,r._key)}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var a=function(t,e,n){if(n.isEqual(Ks.INSTANCE)){if(e!==da.EQUAL)throw new es(ts.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new va(t)}if(n.isEqual(Zs.NAN)){if(e!==da.EQUAL)throw new es(ts.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new ma(t)}return new ya(t,e,n)}(o,da.fromString(n),i);return this.validateNewFilter(a),new t(this._query.addFilter(a),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(ls("Query.orderBy",arguments,1,2),fs("Query.orderBy","string",2,n),void 0===n||"asc"===n)r=ga.ASCENDING;else{if("desc"!==n)throw new es(ts.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=ga.DESCENDING}if(null!==this._query.startAt)throw new es(ts.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new es(ts.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=xl("Query.orderBy",e),o=new wa(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(us("Query.limit",arguments,1),hs("Query.limit","number",1,e),e<=0)throw new es(ts.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];cs("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];cs("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];cs("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];cs("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw ws("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(gs(t,1,e),e instanceof Ul){if(n.length>0)throw new es(ts.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new es(ts.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new ra(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(void 0===a){var u=s.field.canonicalString();throw new es(ts.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new ba(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new es(ts.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new es(ts.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(-1!==s.indexOf("/"))throw new es(ts.INVALID_ARGUMENT,"Invalid query. Document ID '"+s+"' contains a slash in "+t+"()");var a=new Ls(this._query.path.child(s));i.push(new ra(this.firestore._databaseId,a))}else{var u=this.firestore._dataConverter.parseQueryValue(t,s);i.push(u)}}return new ba(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ls("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||fl(t[i])||(bs("Query.onSnapshot",r=t[i],["includeQueryMetadataChanges","includeDocumentMetadataChanges"]),ds("Query.onSnapshot","boolean","includeDocumentMetadataChanges",r.includeDocumentMetadataChanges),ds("Query.onSnapshot","boolean","includeQueryMetadataChanges",r.includeQueryMetadataChanges),i++),fl(t[i])?n=t[i]:(hs("Query.onSnapshot","function",i,t[i]),fs("Query.onSnapshot","function",i+1,t[i+1]),fs("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new sl({next:function(t){e.next&&e.next(new ql(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(s)}},t.prototype.get=function(){var t=this;return us("Query.get",arguments,0),new Promise(function(e,n){var r=t.onSnapshotInternal({includeDocumentMetadataChanges:!1,includeQueryMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){r(),e(t)},error:n})})},t.prototype.validateNewFilter=function(t){if(t instanceof ya&&t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new es(ts.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new es(ts.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),ql=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this.metadata=new Vl(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;ls("QuerySnapshot.forEach",arguments,1,2),hs("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new Bl(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"docChanges",{get:function(){return this._cachedChanges||(this._cachedChanges=function(t,e){if(e.oldDocs.isEmpty()){var n,r=0;return e.docChanges.map(function(i){var o=new Fl(t,i.doc.key,i.doc,e.fromCache);return Jo(i.type===Tu.Added,"Invalid event type for first snapshot"),Jo(!n||e.query.docComparator(n,i.doc)<0,"Got added events in wrong order"),n=i.doc,{type:"added",doc:o,oldIndex:-1,newIndex:r++}})}var i=e.oldDocs;return e.docChanges.map(function(n){var r=new Fl(t,n.doc.key,n.doc,e.fromCache),o=-1,s=-1;return n.type!==Tu.Added&&(Jo((o=i.indexOf(n.doc.key))>=0,"Index for document not found"),i=i.delete(n.doc.key)),n.type!==Tu.Removed&&(s=(i=i.add(n.doc)).indexOf(n.doc.key)),{type:function(t){switch(t){case Tu.Added:return"added";case Tu.Modified:case Tu.Metadata:return"modified";case Tu.Removed:return"removed";default:return Yo("Unknown change type: "+t)}}(n.type),doc:r,oldIndex:o,newIndex:s}})}(this._firestore,this._snapshot)),this._cachedChanges},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw ws("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Fl(this._firestore,t.key,t,this.metadata.fromCache)},t}(),Hl=function(t){function e(e,n){var r=t.call(this,pa.atPath(e),n)||this;if(e.length%2!=1)throw new es(ts.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Ll(new Ls(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(ls("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Es.newId()),hs("CollectionReference.doc","string",1,t),""===t)throw new es(ts.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=Ps.fromString(t);return Ll.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){us("CollectionReference.add",arguments,1),hs("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(Bl);function Wl(t,e){return void 0===e?{merge:!1}:(bs(t,e,["merge"]),ds(t,"boolean","merge",e.merge),e)}function zl(t,e){return void 0===e?{}:(bs(t,e,["serverTimestamps"]),void 0!==(n=e.serverTimestamps)&&function(t,e,n,r,i){for(var o=[],s=0,a=["estimate","previous","none"];s<a.length;s++){var u=a[s];if(u===r)return;o.push(ms(u))}var c=ms(r);throw new es(ts.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "serverTimestamps". Acceptable values: '+o.join(", "))}(t,0,0,n),e);var n}function Gl(t,e,n){if(e instanceof Ll){if(e.firestore!==n)throw new es(ts.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw ws(t,"DocumentReference",1,e)}var Kl=ns(Pl,"Use firebase.firestore() instead."),Ql=ns(Ml,"Use firebase.firestore().runTransaction() instead."),Xl=ns(jl,"Use firebase.firestore().batch() instead."),Yl=ns(Ll,"Use firebase.firestore().doc() instead."),Jl=ns(Ul),Zl=ns(Fl),$l=ns(Bl),th=ns(ql),eh=ns(Hl,"Use firebase.firestore().collection() instead.");so.default.INTERNAL.registerService("firestore",function(t){return new Pl(t)},as({Firestore:Kl,GeoPoint:As,Blob:ks,Transaction:Ql,WriteBatch:Xl,DocumentReference:Yl,DocumentSnapshot:Jl,Query:$l,QueryDocumentSnapshot:Zl,QuerySnapshot:th,CollectionReference:eh,FieldPath:Su,FieldValue:ml,setLogLevel:Pl.setLogLevel}));var nh=function(){function t(){}return t.enablePersistence=function(){return{ngModule:t,providers:[{provide:Mo,useValue:!0}]}},t}(),rh=function(){function t(t,e,n){this.authService=t,this.db=e,this.router=n}return t.prototype.ngOnInit=function(){var t=this;this.authSubscription=this.authService.authState.take(1).subscribe(function(e){e&&t.getRooms()})},t.prototype.ngOnDestroy=function(){this.authSubscription.unsubscribe()},t.prototype.getRooms=function(){var t=this;this.db.collection("rooms").snapshotChanges().take(1).subscribe(function(e){var n=new function(){};n.name=t.authService.name,n.pawns=[];for(var r=0,i=e;r<i.length;r++){var o=i[r],s=o.payload.doc.id,a=o.payload.doc.data();if(1===Object.keys(a.players).length)return a.players[t.authService.authId]=n,t.db.doc("rooms/"+s).update(JSON.parse(JSON.stringify(a))),void t.router.navigate(["game",s])}var u=new function(){};u.players={},u.players[t.authService.authId]=n,t.db.collection("rooms").add(JSON.parse(JSON.stringify(u))).then(function(e){t.router.navigate(["game",e.id])})})},t}(),ih=function(){},oh=n("GK6M"),sh=n("fKB6"),ah=function(t){function e(){t.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return Object(o.__extends)(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),lo.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),lo.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(A.b);function uh(t){var e=t.subject;e.next(t.value),e.complete()}function ch(t){t.subject.error(t.err)}function lh(t){var e=this,n=t.source,r=t.subscriber,i=t.context,o=n.callbackFunc,s=n.args,a=n.scheduler,u=n.subject;if(!u){u=n.subject=new ah;var c=function t(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];var i=t.source,o=i.selector,s=i.subject,u=n.shift();if(u)e.add(a.schedule(fh,0,{err:u,subject:s}));else if(o){var c=Object(oh.a)(o).apply(this,n);e.add(c===sh.a?a.schedule(fh,0,{err:sh.a.e,subject:s}):a.schedule(hh,0,{value:c,subject:s}))}else e.add(a.schedule(hh,0,{value:n.length<=1?n[0]:n,subject:s}))};c.source=n,Object(oh.a)(o).apply(i,s.concat(c))===sh.a&&e.add(a.schedule(fh,0,{err:sh.a.e,subject:u}))}e.add(u.subscribe(r))}function hh(t){var e=t.subject;e.next(t.value),e.complete()}function fh(t){t.subject.error(t.err)}W.a.bindCallback=function(t){function e(e,n,r,i,o){t.call(this),this.callbackFunc=e,this.selector=n,this.args=r,this.context=i,this.scheduler=o}return Object(o.__extends)(e,t),e.create=function(t,n,r){return void 0===n&&(n=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new e(t,n,i,this,r)}},e.prototype._subscribe=function(t){var n=this.callbackFunc,r=this.args,i=this.scheduler,o=this.subject;if(i)return i.schedule(e.dispatch,0,{source:this,subscriber:t,context:this.context});if(!o){o=this.subject=new ah;var s=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=t.source,i=r.selector,o=r.subject;if(i){var s=Object(oh.a)(i).apply(this,e);s===sh.a?o.error(sh.a.e):(o.next(s),o.complete())}else o.next(e.length<=1?e[0]:e),o.complete()};s.source=this,Object(oh.a)(n).apply(this.context,r.concat(s))===sh.a&&o.error(sh.a.e)}return o.subscribe(t)},e.dispatch=function(t){var e=this,n=t.source,r=t.subscriber,i=t.context,o=n.callbackFunc,s=n.args,a=n.scheduler,u=n.subject;if(!u){u=n.subject=new ah;var c=function t(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];var i=t.source,o=i.selector,s=i.subject;if(o){var u=Object(oh.a)(o).apply(this,n);e.add(u===sh.a?a.schedule(ch,0,{err:sh.a.e,subject:s}):a.schedule(uh,0,{value:u,subject:s}))}else e.add(a.schedule(uh,0,{value:n.length<=1?n[0]:n,subject:s}))};c.source=n,Object(oh.a)(o).apply(i,s.concat(c))===sh.a&&u.error(sh.a.e)}e.add(u.subscribe(r))},e}(W.a).create,W.a.bindNodeCallback=function(t){function e(e,n,r,i,o){t.call(this),this.callbackFunc=e,this.selector=n,this.args=r,this.context=i,this.scheduler=o}return Object(o.__extends)(e,t),e.create=function(t,n,r){return void 0===n&&(n=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new e(t,n,i,this,r)}},e.prototype._subscribe=function(t){var e=this.callbackFunc,n=this.args,r=this.scheduler,i=this.subject;if(r)return r.schedule(lh,0,{source:this,subscriber:t,context:this.context});if(!i){i=this.subject=new ah;var o=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=t.source,i=r.selector,o=r.subject,s=e.shift();if(s)o.error(s);else if(i){var a=Object(oh.a)(i).apply(this,e);a===sh.a?o.error(sh.a.e):(o.next(a),o.complete())}else o.next(e.length<=1?e[0]:e),o.complete()};o.source=this,Object(oh.a)(e).apply(this.context,n.concat(o))===sh.a&&i.error(sh.a.e)}return i.subscribe(t)},e}(W.a).create;var ph=n("1Q68"),dh={};function yh(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(z.a)(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(new D.a([e].concat(t)),new vh(n))}}var vh=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new mh(t,this.project))},t}(),mh=function(t){function e(e,n){t.call(this,e),this.project=n,this.active=0,this.values=[],this.observables=[]}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.values.push(dh),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(yt.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=this.toRespond?o[n]===dh?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(dt.a);function gh(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length||2===t.length&&Object(ph.a)(t[1])?pt(t[0]):_t()(P.apply(void 0,t))}W.a.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null,r=null;return Object(ph.a)(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(z.a)(t[0])&&(t=t[0]),new D.a(t,r).lift(new vh(n))},W.a.concat=gh;var bh=function(t){function e(e){t.call(this),this.observableFactory=e}return Object(o.__extends)(e,t),e.create=function(t){return new e(t)},e.prototype._subscribe=function(t){return new wh(t,this.observableFactory)},e}(W.a),wh=function(t){function e(e,n){t.call(this,e),this.factory=n,this.tryDefer()}return Object(o.__extends)(e,t),e.prototype.tryDefer=function(){try{this._callFactory()}catch(t){this._error(t)}},e.prototype._callFactory=function(){var t=this.factory();t&&this.add(Object(yt.a)(this,t))},e}(dt.a);W.a.defer=bh.create,W.a.empty=it.a.create;var _h=function(t){function e(e,n){t.call(this),this.sources=e,this.resultSelector=n}return Object(o.__extends)(e,t),e.create=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];if(null===t||0===arguments.length)return new it.a;var r=null;return"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&Object(z.a)(t[0])&&(t=t[0]),0===t.length?new it.a:new e(t,r)},e.prototype._subscribe=function(t){return new Sh(t,this.sources,this.resultSelector)},e}(W.a),Sh=function(t){function e(e,n,r){t.call(this,e),this.sources=n,this.resultSelector=r,this.completed=0,this.haveValues=0;var i=n.length;this.total=i,this.values=new Array(i);for(var o=0;o<i;o++){var s=n[o],a=Object(yt.a)(this,s,null,o);a&&(a.outerIndex=o,this.add(a))}}return Object(o.__extends)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.resultSelector,i=this.values,o=i.length;if(t._hasValue){if(this.completed++,this.completed===o){if(n===o){var s=r?r.apply(this,i):i;e.next(s)}e.complete()}}else e.complete()},e}(dt.a);W.a.forkJoin=_h.create,W.a.from=pt;var Eh=n("/iUD"),Th=Object.prototype.toString;W.a.fromEvent=function(t){function e(e,n,r,i){t.call(this),this.sourceObj=e,this.eventName=n,this.selector=r,this.options=i}return Object(o.__extends)(e,t),e.create=function(t,n,r,i){return Object(Eh.a)(r)&&(i=r,r=void 0),new e(t,n,i,r)},e.setupSubscription=function(t,n,r,i,o){var s;if(function(t){return!!t&&"[object NodeList]"===Th.call(t)}(t)||function(t){return!!t&&"[object HTMLCollection]"===Th.call(t)}(t))for(var a=0,u=t.length;a<u;a++)e.setupSubscription(t[a],n,r,i,o);else if(function(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var c=t;t.addEventListener(n,r,o),s=function(){return c.removeEventListener(n,r,o)}}else if(function(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var l=t;t.on(n,r),s=function(){return l.off(n,r)}}else{if(!function(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t))throw new TypeError("Invalid event target");var h=t;t.addListener(n,r),s=function(){return h.removeListener(n,r)}}i.add(new lo.a(s))},e.prototype._subscribe=function(t){var n=this.selector;e.setupSubscription(this.sourceObj,this.eventName,n?function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var i=Object(oh.a)(n).apply(void 0,e);i===sh.a?t.error(sh.a.e):t.next(i)}:function(e){return t.next(e)},t,this.options)},e}(W.a).create,W.a.fromEventPattern=function(t){function e(e,n,r){t.call(this),this.addHandler=e,this.removeHandler=n,this.selector=r}return Object(o.__extends)(e,t),e.create=function(t,n,r){return new e(t,n,r)},e.prototype._subscribe=function(t){var e=this,n=this.removeHandler,r=this.selector?function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];e._callSelector(t,n)}:function(e){t.next(e)},i=this._callAddHandler(r,t);Object(Eh.a)(n)&&t.add(new lo.a(function(){n(r,i)}))},e.prototype._callSelector=function(t,e){try{var n=this.selector.apply(this,e);t.next(n)}catch(e){t.error(e)}},e.prototype._callAddHandler=function(t,e){try{return this.addHandler(t)||null}catch(t){e.error(t)}},e}(W.a).create;var Ih=function(t){return t};W.a.generate=function(t){function e(e,n,r,i,o){t.call(this),this.initialState=e,this.condition=n,this.iterate=r,this.resultSelector=i,this.scheduler=o}return Object(o.__extends)(e,t),e.create=function(t,n,r,i,o){return 1==arguments.length?new e(t.initialState,t.condition,t.iterate,t.resultSelector||Ih,t.scheduler):void 0===i||Object(ph.a)(i)?new e(t,n,r,Ih,i):new e(t,n,r,i,o)},e.prototype._subscribe=function(t){var n=this.initialState;if(this.scheduler)return this.scheduler.schedule(e.dispatch,0,{subscriber:t,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:n});for(var r=this.condition,i=this.resultSelector,o=this.iterate;;){if(r){var s=void 0;try{s=r(n)}catch(e){return void t.error(e)}if(!s){t.complete();break}}var a=void 0;try{a=i(n)}catch(e){return void t.error(e)}if(t.next(a),t.closed)break;try{n=o(n)}catch(e){return void t.error(e)}}},e.dispatch=function(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}},e}(W.a).create;var Ch=function(t){function e(e,n,r){t.call(this),this.condition=e,this.thenSource=n,this.elseSource=r}return Object(o.__extends)(e,t),e.create=function(t,n,r){return new e(t,n,r)},e.prototype._subscribe=function(t){return new xh(t,this.condition,this.thenSource,this.elseSource)},e}(W.a),xh=function(t){function e(e,n,r,i){t.call(this,e),this.condition=n,this.thenSource=r,this.elseSource=i,this.tryIf()}return Object(o.__extends)(e,t),e.prototype.tryIf=function(){var t=this.condition,e=this.thenSource,n=this.elseSource;try{var r=t()?e:n;r?this.add(Object(yt.a)(this,r)):this._complete()}catch(t){this._error(t)}},e}(dt.a);function Oh(t){return!Object(z.a)(t)&&t-parseFloat(t)+1>=0}W.a.if=Ch.create;var kh=new po(ho);W.a.interval=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=kh),t.call(this),this.period=e,this.scheduler=n,(!Oh(e)||e<0)&&(this.period=0),n&&"function"==typeof n.schedule||(this.scheduler=kh)}return Object(o.__extends)(e,t),e.create=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=kh),new e(t,n)},e.dispatch=function(t){var e=t.subscriber,n=t.period;e.next(t.index),e.closed||(t.index+=1,this.schedule(t,n))},e.prototype._subscribe=function(t){var n=this.period;t.add(this.scheduler.schedule(e.dispatch,n,{index:0,subscriber:t,period:n}))},e}(W.a).create;var Ah=n("/nXB");function Nh(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(1===t.length){if(!Object(z.a)(t[0]))return t[0];t=t[0]}return new D.a(t).lift(new Rh)}W.a.merge=Ah.a;var Rh=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Dh(t))},t}(),Dh=function(t){function e(e){t.call(this,e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Object(yt.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(dt.a);W.a.race=Nh;var Ph=n("gIN1");function Mh(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length&&Object(z.a)(t[0])&&(t=t[0]),function(e){return e.lift(new jh(t))}}W.a.never=function(t){function e(){t.call(this)}return Object(o.__extends)(e,t),e.create=function(){return new e},e.prototype._subscribe=function(t){Object(Ph.a)()},e}(W.a).create;var jh=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new Lh(t,this.nextSources))},t}(),Lh=function(t){function e(e,n){t.call(this,e),this.destination=e,this.nextSources=n}return Object(o.__extends)(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource()},e.prototype._complete=function(){this.subscribeToNextSource()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(Object(yt.a)(this,t)):this.destination.complete()},e}(dt.a);function Vh(t){var e=t.index,n=t.subscriber;if(e!==t.length){var r=t.keys[e];n.next([r,t.obj[r]]),t.index=e+1,this.schedule(t)}else n.complete()}W.a.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n;return 1===t.length&&Object(z.a)(t[0])&&(t=t[0]),n=t.shift(),new ft(n,null).lift(new jh(t))},W.a.pairs=function(t){function e(e,n){t.call(this),this.obj=e,this.scheduler=n,this.keys=Object.keys(e)}return Object(o.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this.keys,n=this.scheduler,r=e.length;if(n)return n.schedule(Vh,0,{obj:this.obj,keys:e,length:r,index:0,subscriber:t});for(var i=0;i<r;i++){var o=e[i];t.next([o,this.obj[o]])}t.complete()},e}(W.a).create,W.a.range=function(t){function e(e,n,r){t.call(this),this.start=e,this._count=n,this.scheduler=r}return Object(o.__extends)(e,t),e.create=function(t,n,r){return void 0===t&&(t=0),void 0===n&&(n=0),new e(t,n,r)},e.dispatch=function(t){var e=t.start,n=t.index,r=t.subscriber;n>=t.count?r.complete():(r.next(e),r.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=0,r=this.start,i=this._count,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{index:n,count:i,start:r,subscriber:t});for(;;){if(n++>=i){t.complete();break}if(t.next(r++),t.closed)break}},e}(W.a).create;var Uh=function(t){function e(e,n){t.call(this),this.resourceFactory=e,this.observableFactory=n}return Object(o.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e,n=this.resourceFactory,r=this.observableFactory;try{return e=n(),new Fh(t,e,r)}catch(e){t.error(e)}},e}(W.a),Fh=function(t){function e(e,n,r){t.call(this,e),this.resource=n,this.observableFactory=r,e.add(n),this.tryUse()}return Object(o.__extends)(e,t),e.prototype.tryUse=function(){try{var t=this.observableFactory.call(this,this.resource);t&&this.add(Object(yt.a)(this,t))}catch(t){this._error(t)}},e}(dt.a);function Bh(t){return t instanceof Date&&!isNaN(+t)}W.a.using=Uh.create,W.a.throw=function(t){function e(e,n){t.call(this),this.error=e,this.scheduler=n}return Object(o.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){t.subscriber.error(t.error)},e.prototype._subscribe=function(t){var n=this.error,r=this.scheduler;if(t.syncErrorThrowable=!0,r)return r.schedule(e.dispatch,0,{error:n,subscriber:t});t.error(n)},e}(W.a).create;var qh=function(t){function e(e,n,r){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,Oh(n)?this.period=Number(n)<1?1:Number(n):Object(ph.a)(n)&&(r=n),Object(ph.a)(r)||(r=kh),this.scheduler=r,this.dueTime=Bh(e)?+e-this.scheduler.now():e}return Object(o.__extends)(e,t),e.create=function(t,n,r){return void 0===t&&(t=0),new e(t,n,r)},e.dispatch=function(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}},e.prototype._subscribe=function(t){return this.scheduler.schedule(e.dispatch,this.dueTime,{index:0,period:this.period,subscriber:t})},e}(W.a).create;function Hh(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(Wh.apply(void 0,[e].concat(t)))}}function Wh(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),new D.a(t).lift(new zh(n))}W.a.timer=qh;var zh=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new Gh(t,this.project))},t}(),Gh=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null)),t.call(this,e),this.iterators=[],this.active=0,this.project="function"==typeof n?n:null,this.values=r}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.iterators;Object(z.a)(t)?e.push(new Qh(t)):e.push("function"==typeof t[Z.a]?new Kh(t[Z.a]()):new Xh(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++)if("function"==typeof(s=t[r]).hasValue&&!s.hasValue())return;var i=!1,o=[];for(r=0;r<e;r++){var s,a=(s=t[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.project?this._tryProject(o):n.next(o),i&&n.complete()},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(V.a),Kh=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),Qh=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[Z.a]=function(){return this},t.prototype.next=function(t){var e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),Xh=function(t){function e(e,n,r){t.call(this,e),this.parent=n,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return Object(o.__extends)(e,t),e.prototype[Z.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Object(yt.a)(this,this.observable,this,e)},e}(dt.a);function Yh(t,e){return void 0===e&&(e=null),new rf({method:"GET",url:t,headers:e})}function Jh(t,e,n){return new rf({method:"POST",url:t,body:e,headers:n})}function Zh(t,e){return new rf({method:"DELETE",url:t,headers:e})}function $h(t,e,n){return new rf({method:"PUT",url:t,body:e,headers:n})}function tf(t,e,n){return new rf({method:"PATCH",url:t,body:e,headers:n})}W.a.zip=Wh;var ef=U(function(t,e){return t.response});function nf(t,e){return ef(new rf({method:"GET",url:t,responseType:"json",headers:e}))}var rf=function(t){function e(e){t.call(this);var n={async:!0,createXHR:function(){return this.crossDomain?(function(){if(Q.a.XMLHttpRequest)return new Q.a.XMLHttpRequest;if(Q.a.XDomainRequest)return new Q.a.XDomainRequest;throw new Error("CORS is not supported by your browser")}).call(this):function(){if(Q.a.XMLHttpRequest)return new Q.a.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;n<3;n++)try{if(new Q.a.ActiveXObject(t=e[n]))break}catch(t){}return new Q.a.ActiveXObject(t)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof e)n.url=e;else for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);this.request=n}var n;return Object(o.__extends)(e,t),e.prototype._subscribe=function(t){return new of(t,this.request)},e.create=((n=function(t){return new e(t)}).get=Yh,n.post=Jh,n.delete=Zh,n.put=$h,n.patch=tf,n.getJSON=nf,n),e}(W.a),of=function(t){function e(e,n){t.call(this,e),this.request=n,this.done=!1;var r=n.headers=n.headers||{};n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in r||Q.a.FormData&&n.body instanceof Q.a.FormData||"undefined"==typeof n.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=this.serializeBody(n.body,n.headers["Content-Type"]),this.send()}return Object(o.__extends)(e,t),e.prototype.next=function(t){this.done=!0;var e=this.destination,n=new sf(t,this.xhr,this.request);e.next(n)},e.prototype.send=function(){var t=this.request,e=this.request,n=e.user,r=e.method,i=e.url,o=e.async,s=e.password,a=e.headers,u=e.body,c=t.createXHR,l=Object(oh.a)(c).call(t);if(l===sh.a)this.error(sh.a.e);else{if(this.xhr=l,this.setupEvents(l,t),(n?Object(oh.a)(l.open).call(l,r,i,o,n,s):Object(oh.a)(l.open).call(l,r,i,o))===sh.a)return this.error(sh.a.e),null;if(o&&(l.timeout=t.timeout,l.responseType=t.responseType),"withCredentials"in l&&(l.withCredentials=!!t.withCredentials),this.setHeaders(l,a),(u?Object(oh.a)(l.send).call(l,u):Object(oh.a)(l.send).call(l))===sh.a)return this.error(sh.a.e),null}return l},e.prototype.serializeBody=function(t,e){if(!t||"string"==typeof t)return t;if(Q.a.FormData&&t instanceof Q.a.FormData)return t;if(e){var n=e.indexOf(";");-1!==n&&(e=e.substring(0,n))}switch(e){case"application/x-www-form-urlencoded":return Object.keys(t).map(function(e){return encodeURI(e)+"="+encodeURI(t[e])}).join("&");case"application/json":return JSON.stringify(t);default:return t}},e.prototype.setHeaders=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setRequestHeader(n,e[n])},e.prototype.setupEvents=function(t,e){var n,r,i=e.progressSubscriber;function o(t){var e=o.subscriber,n=o.progressSubscriber,r=o.request;n&&n.error(t),e.error(new cf(this,r))}function s(t){var e=s.subscriber,n=s.progressSubscriber,r=s.request;if(4===this.readyState){var i=1223===this.status?204:this.status;0===i&&(i=("text"===this.responseType?this.response||this.responseText:this.response)?200:0),200<=i&&i<300?(n&&n.complete(),e.next(t),e.complete()):(n&&n.error(t),e.error(new af("ajax error "+i,this,r)))}}t.ontimeout=o,o.request=e,o.subscriber=this,o.progressSubscriber=i,t.upload&&"withCredentials"in t&&(i&&(n=function(t){n.progressSubscriber.next(t)},Q.a.XDomainRequest?t.onprogress=n:t.upload.onprogress=n,n.progressSubscriber=i),t.onerror=r=function(t){var e=r.progressSubscriber,n=r.subscriber,i=r.request;e&&e.error(t),n.error(new af("ajax error",this,i))},r.request=e,r.subscriber=this,r.progressSubscriber=i),t.onreadystatechange=s,s.subscriber=this,s.progressSubscriber=i,s.request=e},e.prototype.unsubscribe=function(){var e=this.xhr;!this.done&&e&&4!==e.readyState&&"function"==typeof e.abort&&e.abort(),t.prototype.unsubscribe.call(this)},e}(V.a),sf=function(){return function(t,e,n){this.originalEvent=t,this.xhr=e,this.request=n,this.status=e.status,this.responseType=e.responseType||n.responseType,this.response=uf(this.responseType,e)}}(),af=function(t){function e(e,n,r){t.call(this,e),this.message=e,this.xhr=n,this.request=r,this.status=n.status,this.responseType=n.responseType||r.responseType,this.response=uf(this.responseType,n)}return Object(o.__extends)(e,t),e}(Error);function uf(t,e){switch(t){case"json":return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null");case"xml":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}}var cf=function(t){function e(e,n){t.call(this,"ajax timeout",e,n)}return Object(o.__extends)(e,t),e}(af);W.a.ajax=rf.create;var lf=n("1Bqh"),hf=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=r,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n}return Object(o.__extends)(e,t),e.prototype.next=function(e){var n=this._getNow();this._events.push(new ff(n,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new N.a;this.hasError?e=lo.a.EMPTY:this.isStopped?e=lo.a.EMPTY:(this.observers.push(t),e=new lf.a(this,t)),r&&t.add(t=new ct(t,r));for(var i=n.length,o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||yo).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(A.b),ff=function(t,e){this.time=t,this.value=e};function pf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e.length,i=0;i<r;i++){var o=e[i];for(var s in o)o.hasOwnProperty(s)&&(t[s]=o[s])}return t}var df=function(t){return Q.a.Object.assign||pf}();function yf(t){return function(e){return e.lift(new vf(t))}}W.a.webSocket=function(t){function e(e,n){if(e instanceof W.a)t.call(this,n,e);else{if(t.call(this),this.WebSocketCtor=Q.a.WebSocket,this._output=new A.b,"string"==typeof e?this.url=e:df(this,e),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new hf}}return Object(o.__extends)(e,t),e.prototype.resultSelector=function(t){return JSON.parse(t.data)},e.create=function(t){return new e(t)},e.prototype.lift=function(t){var n=new e(this,this.destination);return n.operator=t,n},e.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new hf),this._output=new A.b},e.prototype.multiplex=function(t,e,n){var r=this;return new W.a(function(i){var o=Object(oh.a)(t)();o===sh.a?i.error(sh.a.e):r.next(o);var s=r.subscribe(function(t){var e=Object(oh.a)(n)(t);e===sh.a?i.error(sh.a.e):e&&i.next(t)},function(t){return i.error(t)},function(){return i.complete()});return function(){var t=Object(oh.a)(e)();t===sh.a?i.error(sh.a.e):r.next(t),s.unsubscribe()}})},e.prototype._connectSocket=function(){var t=this,e=this.WebSocketCtor,n=this._output,r=null;try{r=this.protocol?new e(this.url,this.protocol):new e(this.url),this.socket=r,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(t){return void n.error(t)}var i=new lo.a(function(){t.socket=null,r&&1===r.readyState&&r.close()});r.onopen=function(e){var o=t.openObserver;o&&o.next(e);var s=t.destination;t.destination=V.a.create(function(t){return 1===r.readyState&&r.send(t)},function(e){var i=t.closingObserver;i&&i.next(void 0),e&&e.code?r.close(e.code,e.reason):n.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t._resetState()},function(){var e=t.closingObserver;e&&e.next(void 0),r.close(),t._resetState()}),s&&s instanceof hf&&i.add(s.subscribe(t.destination))},r.onerror=function(e){t._resetState(),n.error(e)},r.onclose=function(e){t._resetState();var r=t.closeObserver;r&&r.next(e),e.wasClean?n.complete():n.error(e)},r.onmessage=function(e){var r=Object(oh.a)(t.resultSelector)(e);r===sh.a?n.error(sh.a.e):n.next(r)}},e.prototype._subscribe=function(t){var e=this,n=this.source;if(n)return n.subscribe(t);this.socket||this._connectSocket();var r=new lo.a;return r.add(this._output.subscribe(t)),r.add(function(){var t=e.socket;0===e._output.observers.length&&(t&&1===t.readyState&&t.close(),e._resetState())}),r},e.prototype.unsubscribe=function(){var e=this.source,n=this.socket;n&&1===n.readyState&&(n.close(),this._resetState()),t.prototype.unsubscribe.call(this),e||(this.destination=new hf)},e}(A.a).create;var vf=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new mf(t,this.closingNotifier))},t}(),mf=function(t){function e(e,n){t.call(this,e),this.buffer=[],this.add(Object(yt.a)(this,n))}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(dt.a);function gf(t,e){return void 0===e&&(e=null),function(n){return n.lift(new bf(t,e))}}W.a.prototype.buffer=function(t){return yf(t)(this)};var bf=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?_f:wf}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),wf=function(t){function e(e,n){t.call(this,e),this.bufferSize=n,this.buffer=[]}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(V.a),_f=function(t){function e(e,n,r){t.call(this,e),this.bufferSize=n,this.startBufferEvery=r,this.buffers=[],this.count=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n==0&&r.push([]);for(var o=r.length;o--;){var s=r[o];s.push(t),s.length===e&&(r.splice(o,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},e}(V.a);function Sf(t){var e=arguments.length,n=kh;Object(ph.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new Ef(t,r,i,n))}}W.a.prototype.bufferCount=function(t,e){return void 0===e&&(e=null),gf(t,e)(this)};var Ef=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new Tf(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),Tf=function(t){function e(e,n,r,i,o){t.call(this,e),this.bufferTimeSpan=n,this.bufferCreationInterval=r,this.maxBufferSize=i,this.scheduler=o,this.contexts=[];var s=this.openContext();if(this.timespanOnly=null==r||r<0,this.timespanOnly)this.add(s.closeAction=o.schedule(If,n,{subscriber:this,context:s,bufferTimeSpan:n}));else{var a={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:this,scheduler:o};this.add(s.closeAction=o.schedule(xf,n,{subscriber:this,context:s})),this.add(o.schedule(Cf,r,a))}}return Object(o.__extends)(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],s=o.buffer;s.push(t),s.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan;this.add(t.closeAction=this.scheduler.schedule(If,n,{subscriber:this,context:t,bufferTimeSpan:n}))}},e.prototype.openContext=function(){var t=new function(){this.buffer=[]};return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(V.a);function If(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function Cf(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(xf,n,{subscriber:r,context:o})),this.schedule(t,e))}function xf(t){t.subscriber.closeContext(t.context)}function Of(t,e){return function(n){return n.lift(new kf(t,e))}}W.a.prototype.bufferTime=function(t){var e=arguments.length,n=kh;Object(ph.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),Sf(t,r,i,n)(this)};var kf=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Af(t,this.openings,this.closingSelector))},t}(),Af=function(t){function e(e,n,r){t.call(this,e),this.openings=n,this.closingSelector=r,this.contexts=[],this.add(Object(yt.a)(this,n))}return Object(o.__extends)(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.subscription;this.destination.next(t.buffer),e.splice(e.indexOf(t),1),this.remove(n),n.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new lo.a,r={buffer:[],subscription:n};e.push(r);var i=Object(yt.a)(this,t,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},e}(dt.a);function Nf(t){return function(e){return e.lift(new Rf(t))}}W.a.prototype.bufferToggle=function(t,e){return Of(t,e)(this)};var Rf=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Df(t,this.closingSelector))},t}(),Df=function(t){function e(e,n){t.call(this,e),this.closingSelector=n,this.subscribing=!1,this.openBuffer()}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];var e=Object(oh.a)(this.closingSelector)();e===sh.a?this.error(sh.a.e):(t=new lo.a,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Object(yt.a)(this,e)),this.subscribing=!1)},e}(dt.a);function Pf(t){return function(e){return e.lift(new vh(t))}}function Mf(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(gh.apply(void 0,[e].concat(t)))}}function jf(t,e){return j(function(){return t},e)}function Lf(t){return function(e){return e.lift(new Vf(t,e))}}W.a.prototype.bufferWhen=function(t){return Nf(t)(this)},W.a.prototype.catch=bt,W.a.prototype._catch=bt,W.a.prototype.combineAll=function(t){return Pf(t)(this)},W.a.prototype.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return yh.apply(void 0,t)(this)},W.a.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return Mf.apply(void 0,t)(this)},W.a.prototype.concatAll=St,W.a.prototype.concatMap=L,W.a.prototype.concatMapTo=function(t,e){return jf(t,e)(this)};var Vf=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Uf(t,this.predicate,this.source))},t}(),Uf=function(t){function e(e,n,r){t.call(this,e),this.predicate=n,this.source=r,this.count=0,this.index=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(V.a);function Ff(){return function(t){return t.lift(new Bf)}}W.a.prototype.count=function(t){return Lf(t)(this)};var Bf=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new qf(t))},t}(),qf=function(t){function e(e){t.call(this,e)}return Object(o.__extends)(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(V.a);function Hf(t){return function(e){return e.lift(new Wf(t))}}W.a.prototype.dematerialize=function(){return Ff()(this)};var Wf=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new zf(t,this.durationSelector))},t}(),zf=function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1,this.durationSubscription=null}return Object(o.__extends)(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(yt.a)(this,e)).closed||this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(dt.a);function Gf(t,e){return void 0===e&&(e=kh),function(n){return n.lift(new Kf(t,e))}}W.a.prototype.debounce=function(t){return Hf(t)(this)};var Kf=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Qf(t,this.dueTime,this.scheduler))},t}(),Qf=function(t){function e(e,n,r){t.call(this,e),this.dueTime=n,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Xf,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(V.a);function Xf(t){t.debouncedNext()}function Yf(t,e){void 0===e&&(e=kh);var n=Bh(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new Jf(n,e))}}W.a.prototype.debounceTime=function(t,e){return void 0===e&&(e=kh),Gf(t,e)(this)},W.a.prototype.defaultIfEmpty=function(t){return void 0===t&&(t=null),zt(t)(this)};var Jf=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Zf(t,this.delay,this.scheduler))},t}(),Zf=function(t){function e(e,n,r){t.call(this,e),this.delay=n,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return Object(o.__extends)(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new $f(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(st.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(st.createComplete())},e}(V.a),$f=function(t,e){this.time=t,this.notification=e};function tp(t,e){return e?function(n){return new rp(n,e).lift(new ep(t))}:function(e){return e.lift(new ep(t))}}W.a.prototype.delay=function(t,e){return void 0===e&&(e=kh),Yf(t,e)(this)};var ep=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new np(t,this.delayDurationSelector))},t}(),np=function(t){function e(e,n){t.call(this,e),this.delayDurationSelector=n,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return Object(o.__extends)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t),n=null;return-1!==e&&(n=this.values[e],this.delayNotifierSubscriptions.splice(e,1),this.values.splice(e,1)),n},e.prototype.tryDelay=function(t,e){var n=Object(yt.a)(this,t,e);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n)),this.values.push(e)},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(dt.a),rp=function(t){function e(e,n){t.call(this),this.source=e,this.subscriptionDelay=n}return Object(o.__extends)(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new ip(t,this.source))},e}(W.a),ip=function(t){function e(e,n){t.call(this),this.parent=e,this.source=n,this.sourceSubscribed=!1}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(V.a);W.a.prototype.delayWhen=function(t,e){return tp(t,e)(this)};var op=Q.a.Set||function(){return function(){function t(){this._values=[]}return t.prototype.add=function(t){this.has(t)||this._values.push(t)},t.prototype.has=function(t){return-1!==this._values.indexOf(t)},Object.defineProperty(t.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._values.length=0},t}()}();function sp(t,e){return function(n){return n.lift(new ap(t,e))}}var ap=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new up(t,this.keySelector,this.flushes))},t}(),up=function(t){function e(e,n,r){t.call(this,e),this.keySelector=n,this.values=new op,r&&this.add(Object(yt.a)(this,r))}return Object(o.__extends)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(dt.a);function cp(t,e){return function(n){return n.lift(new lp(t,e))}}W.a.prototype.distinct=function(t,e){return sp(t,e)(this)};var lp=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new hp(t,this.compare,this.keySelector))},t}(),hp=function(t){function e(e,n,r){t.call(this,e),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=Object(oh.a)(this.keySelector)(t))===sh.a)return this.destination.error(sh.a.e);var n=!1;if(this.hasKey){if((n=Object(oh.a)(this.compare)(this.key,e))===sh.a)return this.destination.error(sh.a.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=e,this.destination.next(t))},e}(V.a);function fp(t,e){return cp(function(n,r){return e?e(n[t],r[t]):n[t]===r[t]})}function pp(t,e,n){return function(r){return r.lift(new dp(t,e,n))}}W.a.prototype.distinctUntilChanged=function(t,e){return cp(t,e)(this)},W.a.prototype.distinctUntilKeyChanged=function(t,e){return fp(t,e)(this)};var dp=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new yp(t,this.nextOrObserver,this.error,this.complete))},t}(),yp=function(t){function e(e,n,r,i){t.call(this,e);var o=new V.a(n,r,i);o.syncErrorThrowable=!0,this.add(o),this.safeSubscriber=o}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),this.destination.error(e.syncErrorThrown?e.syncErrorValue:t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(V.a);function vp(t,e,n){return pp(t,e,n)(this)}function mp(){return function(t){return t.lift(new gp)}}W.a.prototype.do=vp,W.a.prototype._do=vp;var gp=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new bp(t))},t}(),bp=function(t){function e(e){t.call(this,e),this.hasCompleted=!1,this.hasSubscription=!1}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(yt.a)(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(dt.a);function wp(t,e){return function(n){return n.lift(new _p(t,e))}}W.a.prototype.exhaust=function(){return mp()(this)};var _p=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Sp(t,this.project,this.resultSelector))},t}(),Sp=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.resultSelector=r,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,n=this.destination;try{var r=this.project(t,e);this.hasSubscription=!0,this.add(Object(yt.a)(this,r,t,e))}catch(t){n.error(t)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.resultSelector?this.trySelectResult(t,e,n,r):o.next(e)},e.prototype.trySelectResult=function(t,e,n,r){var i=this.resultSelector,o=this.destination;try{var s=i(t,e,n,r);o.next(s)}catch(t){o.error(t)}},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(dt.a);function Ep(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new Tp(t,e,n))}}W.a.prototype.exhaustMap=function(t,e){return wp(t,e)(this)};var Tp=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new Ip(t,this.project,this.concurrent,this.scheduler))},t}(),Ip=function(t){function e(e,n,r,i){t.call(this,e),this.project=n,this.concurrent=r,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(this.buffer=[])}return Object(o.__extends)(e,t),e.dispatch=function(t){t.subscriber.subscribeToProjection(t.result,t.value,t.index)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(t);var i=Object(oh.a)(this.project)(t,r);i===sh.a?n.error(sh.a.e):this.scheduler?this.add(this.scheduler.schedule(e.dispatch,0,{subscriber:this,result:i,value:t,index:r})):this.subscribeToProjection(i,t,r)}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.add(Object(yt.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(dt.a);function Cp(t,e){return function(n){return n.lift(new xp(t,e))}}W.a.prototype.expand=function(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),Ep(t,e=(e||0)<1?Number.POSITIVE_INFINITY:e,n)(this)};var xp=function(){function t(t,e){if(this.index=t,this.defaultValue=e,t<0)throw new Bt}return t.prototype.call=function(t,e){return e.subscribe(new Op(t,this.index,this.defaultValue))},t}(),Op=function(t){function e(e,n,r){t.call(this,e),this.index=n,this.defaultValue=r}return Object(o.__extends)(e,t),e.prototype._next=function(t){0==this.index--&&(this.destination.next(t),this.destination.complete())},e.prototype._complete=function(){var t=this.destination;this.index>=0&&("undefined"!=typeof this.defaultValue?t.next(this.defaultValue):t.error(new Bt)),t.complete()},e}(V.a);function kp(t){return function(e){return e.lift(new Ap(t))}}W.a.prototype.elementAt=function(t,e){return Cp(t,e)(this)};var Ap=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new Np(t,this.callback))},t}(),Np=function(t){function e(e,n){t.call(this,e),this.add(new lo.a(n))}return Object(o.__extends)(e,t),e}(V.a);function Rp(t){return kp(t)(this)}function Dp(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new Pp(t,n,!1,e))}}W.a.prototype.finally=Rp,W.a.prototype._finally=Rp;var Pp=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new Mp(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),Mp=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.source=r,this.yieldIndex=i,this.thisArg=o,this.index=0}return Object(o.__extends)(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(V.a);function jp(t,e){return function(n){return n.lift(new Pp(t,n,!0,e))}}W.a.prototype.find=function(t,e){return Dp(t,e)(this)},W.a.prototype.findIndex=function(t,e){return jp(t,e)(this)},W.a.prototype.first=xt;var Lp=function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1===e?void 0:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype.delete=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}(),Vp=Q.a.Map||function(){return Lp}(),Up=function(){function t(){this.values={}}return t.prototype.delete=function(t){return this.values[t]=null,!0},t.prototype.set=function(t,e){return this.values[t]=e,this},t.prototype.get=function(t){return this.values[t]},t.prototype.forEach=function(t,e){var n=this.values;for(var r in n)n.hasOwnProperty(r)&&null!==n[r]&&t.call(e,n[r],r)},t.prototype.clear=function(){this.values={}},t}();function Fp(t,e,n,r){return function(i){return i.lift(new Bp(t,e,n,r))}}var Bp=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new qp(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),qp=function(t){function e(e,n,r,i,o){t.call(this,e),this.keySelector=n,this.elementSelector=r,this.durationSelector=i,this.subjectSelector=o,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups="string"==typeof e?new Up:new Vp);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new A.b,n.set(e,i);var o=new Wp(e,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new Wp(e,i))}catch(t){return void this.error(t)}this.add(s.subscribe(new Hp(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(V.a),Hp=function(t){function e(e,n,r){t.call(this,n),this.key=e,this.group=n,this.parent=r}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(V.a),Wp=function(t){function e(e,n,r){t.call(this),this.key=e,this.groupSubject=n,this.refCountSubscription=r}return Object(o.__extends)(e,t),e.prototype._subscribe=function(t){var e=new lo.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new zp(n)),e.add(r.subscribe(t)),e},e}(W.a),zp=function(t){function e(e){t.call(this),this.parent=e,e.count++}return Object(o.__extends)(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(lo.a);function Gp(){return function(t){return t.lift(new Kp)}}W.a.prototype.groupBy=function(t,e,n,r){return Fp(t,e,n,r)(this)};var Kp=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Qp(t))},t}(),Qp=function(t){function e(){t.apply(this,arguments)}return Object(o.__extends)(e,t),e.prototype._next=function(t){Object(Ph.a)()},e}(V.a);function Xp(){return function(t){return t.lift(new Yp)}}W.a.prototype.ignoreElements=function(){return Gp()(this)};var Yp=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Jp(t))},t}(),Jp=function(t){function e(e){t.call(this,e)}return Object(o.__extends)(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(V.a);function Zp(t){return function(e){return e.lift(new $p(t))}}W.a.prototype.isEmpty=function(){return Xp()(this)};var $p=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new td(t,this.durationSelector))},t}(),td=function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1}return Object(o.__extends)(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=Object(oh.a)(this.durationSelector)(t);if(e===sh.a)this.destination.error(sh.a.e);else{var n=Object(yt.a)(this,e);n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(dt.a);function ed(t,e){return void 0===e&&(e=kh),Zp(function(){return qh(t,e)})}function nd(t){return t(this)}function rd(t){return function(e){return e.lift(new id(t))}}W.a.prototype.audit=function(t){return Zp(t)(this)},W.a.prototype.auditTime=function(t,e){return void 0===e&&(e=kh),ed(t,e)(this)},W.a.prototype.last=jt,W.a.prototype.let=nd,W.a.prototype.letBind=nd,W.a.prototype.every=Rt;var id=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new od(t,this.value))},t}(),od=function(t){function e(e,n){t.call(this,e),this.value=n}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(V.a);function sd(){return function(t){return t.lift(new ad)}}W.a.prototype.mapTo=function(t){return rd(t)(this)};var ad=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ud(t))},t}(),ud=function(t){function e(e){t.call(this,e)}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.destination.next(st.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(st.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(st.createComplete()),t.complete()},e}(V.a);function cd(t){return Xt("function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e})}function ld(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return e.lift.call(Ah.a.apply(void 0,[e].concat(t)))}}function hd(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof e&&(n=e,e=null),function(r){return r.lift(new fd(t,e,n))}}W.a.prototype.materialize=function(){return sd()(this)},W.a.prototype.max=function(t){return cd(t)(this)},W.a.prototype.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return ld.apply(void 0,t)(this)},W.a.prototype.mergeAll=Lt,W.a.prototype.mergeMap=H,W.a.prototype.flatMap=H;var fd=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.ish=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new pd(t,this.ish,this.resultSelector,this.concurrent))},t}(),pd=function(t){function e(e,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.ish=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.resultSelector,n=this.index++,r=this.ish,i=this.destination;this.active++,this._innerSub(r,i,e,t,n)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n,r,i){this.add(Object(yt.a)(this,t,r,i))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.resultSelector?this.trySelectResult(t,e,n,r):o.next(e)},e.prototype.trySelectResult=function(t,e,n,r){var i,o=this.resultSelector,s=this.destination;try{i=o(t,e,n,r)}catch(t){return void s.error(t)}s.next(i)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(dt.a);function dd(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),hd(t,e,n)(this)}function yd(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new vd(t,e,n))}}W.a.prototype.flatMapTo=dd,W.a.prototype.mergeMapTo=dd;var vd=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new md(t,this.accumulator,this.seed,this.concurrent))},t}(),md=function(t){function e(e,n,r,i){t.call(this,e),this.accumulator=n,this.acc=r,this.concurrent=i,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=Object(oh.a)(this.accumulator)(this.acc,t);n===sh.a?this.destination.error(sh.a.e):(this.active++,this._innerSub(n,t,e))}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){this.add(Object(yt.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(dt.a);function gd(t){return Xt("function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e})}W.a.prototype.mergeScan=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),yd(t,e,n)(this)},W.a.prototype.min=function(t){return gd(t)(this)};var bd=n("Jwyl");function wd(){return function(t){return t.lift(new _d)}}W.a.prototype.multicast=function(t,e){return Object(bd.a)(t,e)(this)},W.a.prototype.observeOn=oo,W.a.prototype.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return Mh.apply(void 0,t)(this)};var _d=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Sd(t))},t}(),Sd=function(t){function e(e){t.call(this,e),this.hasPrev=!1}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},e}(V.a);function Ed(t,e){return function(n){return[An(t,e)(n),An(function(e,n){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=t,r.thisArg=n,r}(0,e))(n)]}}function Td(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return U(function(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if("undefined"==typeof o)return;r=o}return r}}(t,n))(e)}}function Id(t){return t?Object(bd.a)(function(){return new A.b},t):Object(bd.a)(new A.b)}function Cd(t){return function(e){return Object(bd.a)(new R(t))(e)}}function xd(t,e,n,r){n&&"function"!=typeof n&&(r=n);var i="function"==typeof n?n:void 0,o=new hf(t,e,r);return function(t){return Object(bd.a)(function(){return o},i)(t)}}function Od(){return function(t){return Object(bd.a)(new ah)(t)}}function kd(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){return 1===t.length&&Object(z.a)(t[0])&&(t=t[0]),e.lift.call(Nh.apply(void 0,[e].concat(t)))}}function Ad(t){return void 0===t&&(t=-1),function(e){return 0===t?new it.a:e.lift(new Nd(t<0?-1:t-1,e))}}W.a.prototype.pairwise=function(){return wd()(this)},W.a.prototype.partition=function(t,e){return Ed(t,e)(this)},W.a.prototype.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return Td.apply(void 0,t)(this)},W.a.prototype.publish=function(t){return Id(t)(this)},W.a.prototype.publishBehavior=function(t){return Cd(t)(this)},W.a.prototype.publishReplay=function(t,e,n,r){return xd(t,e,n,r)(this)},W.a.prototype.publishLast=function(){return Od()(this)},W.a.prototype.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return kd.apply(void 0,t)(this)},W.a.prototype.reduce=Yt;var Nd=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Rd(t,this.count,this.source))},t}(),Rd=function(t){function e(e,n,r){t.call(this,e),this.count=n,this.source=r}return Object(o.__extends)(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(V.a);function Dd(t){return function(e){return e.lift(new Pd(t))}}W.a.prototype.repeat=function(t){return void 0===t&&(t=-1),Ad(t)(this)};var Pd=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Md(t,this.notifier,e))},t}(),Md=function(t){function e(e,n,r){t.call(this,e),this.notifier=n,this.source=r,this.sourceIsBeingSubscribedTo=!0}return Object(o.__extends)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries){if(this.retriesSubscription.closed)return t.prototype.complete.call(this)}else this.subscribeToRetries();this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this.notifications,n=this.retries,r=this.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,t.prototype._unsubscribeAndRecycle.call(this),this.notifications=e,this.retries=n,this.retriesSubscription=r,this},e.prototype.subscribeToRetries=function(){this.notifications=new A.b;var e=Object(oh.a)(this.notifier)(this.notifications);if(e===sh.a)return t.prototype.complete.call(this);this.retries=e,this.retriesSubscription=Object(yt.a)(this,e)},e}(dt.a);function jd(t){return void 0===t&&(t=-1),function(e){return e.lift(new Ld(t,e))}}W.a.prototype.repeatWhen=function(t){return Dd(t)(this)};var Ld=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Vd(t,this.count,this.source))},t}(),Vd=function(t){function e(e,n,r){t.call(this,e),this.count=n,this.source=r}return Object(o.__extends)(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(V.a);function Ud(t){return function(e){return e.lift(new Fd(t,e))}}W.a.prototype.retry=function(t){return void 0===t&&(t=-1),jd(t)(this)};var Fd=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Bd(t,this.notifier,this.source))},t}(),Bd=function(t){function e(e,n,r){t.call(this,e),this.notifier=n,this.source=r}return Object(o.__extends)(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(n=new A.b,(r=Object(oh.a)(this.notifier)(n))===sh.a)return t.prototype.error.call(this,sh.a.e);i=Object(yt.a)(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.errors,s=this.retries,a=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=o,this.retries=s,this.retriesSubscription=a,this.source.subscribe(this)},e}(dt.a);function qd(t){return function(e){return e.lift(new Hd(t))}}W.a.prototype.retryWhen=function(t){return Ud(t)(this)};var Hd=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new Wd(t),r=e.subscribe(n);return r.add(Object(yt.a)(n,this.notifier)),r},t}(),Wd=function(t){function e(){t.apply(this,arguments),this.hasValue=!1}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(dt.a);function zd(t,e){return void 0===e&&(e=kh),function(n){return n.lift(new Gd(t,e))}}W.a.prototype.sample=function(t){return qd(t)(this)};var Gd=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Kd(t,this.period,this.scheduler))},t}(),Kd=function(t){function e(e,n,r){t.call(this,e),this.period=n,this.scheduler=r,this.hasValue=!1,this.add(r.schedule(Qd,n,{subscriber:this,period:n}))}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(V.a);function Qd(t){var e=t.period;t.subscriber.notifyNext(),this.schedule(t,e)}function Xd(t,e){return function(n){return n.lift(new Yd(t,e))}}W.a.prototype.sampleTime=function(t,e){return void 0===e&&(e=kh),zd(t,e)(this)};var Yd=function(){function t(t,e){this.compareTo=t,this.comparor=e}return t.prototype.call=function(t,e){return e.subscribe(new Jd(t,this.compareTo,this.comparor))},t}(),Jd=function(t){function e(e,n,r){t.call(this,e),this.compareTo=n,this.comparor=r,this._a=[],this._b=[],this._oneComplete=!1,this.add(n.subscribe(new Zd(e,this)))}return Object(o.__extends)(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparor;t.length>0&&e.length>0;){var r=t.shift(),i=e.shift(),o=!1;n?(o=Object(oh.a)(n)(r,i))===sh.a&&this.destination.error(sh.a.e):o=r===i,o||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e}(V.a),Zd=function(t){function e(e,n){t.call(this,e),this.parent=n}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t)},e.prototype._complete=function(){this.parent._complete()},e}(V.a);function $d(t,e,n){return function(r){return r.lift(function(t,e,n){var r,i,o=0,s=!1,a=!1;return function(u){o++,r&&!s||(s=!1,r=new hf(t,e,n),i=u.subscribe({next:function(t){r.next(t)},error:function(t){s=!0,r.error(t)},complete:function(){a=!0,r.complete()}}));var c=r.subscribe(this);return function(){o--,c.unsubscribe(),i&&0===o&&a&&i.unsubscribe()}}}(t,e,n))}}function ty(t){return function(e){return e.lift(new ey(t,e))}}W.a.prototype.sequenceEqual=function(t,e){return Xd(t,e)(this)},W.a.prototype.shareReplay=function(t,e,n){return $d(t,e,n)(this)};var ey=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new ny(t,this.predicate,this.source))},t}(),ny=function(t){function e(e,n,r){t.call(this,e),this.predicate=n,this.source=r,this.seenValue=!1,this.index=0}return Object(o.__extends)(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new Et)},e}(V.a);function ry(t){return function(e){return e.lift(new iy(t))}}W.a.prototype.single=function(t){return ty(t)(this)};var iy=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new oy(t,this.total))},t}(),oy=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(V.a);function sy(t){return function(e){return e.lift(new ay(t))}}W.a.prototype.skip=function(t){return ry(t)(this)};var ay=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new Bt}return t.prototype.call=function(t,e){return e.subscribe(0===this._skipCount?new V.a(t):new uy(t,this._skipCount))},t}(),uy=function(t){function e(e,n){t.call(this,e),this._skipCount=n,this._count=0,this._ring=new Array(n)}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}},e}(V.a);function cy(t){return function(e){return e.lift(new ly(t))}}W.a.prototype.skipLast=function(t){return sy(t)(this)};var ly=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new hy(t,this.notifier))},t}(),hy=function(t){function e(e,n){t.call(this,e),this.hasValue=!1,this.isInnerStopped=!1,this.add(Object(yt.a)(this,n))}return Object(o.__extends)(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype._complete=function(){this.isInnerStopped?t.prototype._complete.call(this):this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.hasValue=!0},e.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&t.prototype._complete.call(this)},e}(dt.a);function fy(t){return function(e){return e.lift(new py(t))}}W.a.prototype.skipUntil=function(t){return cy(t)(this)};var py=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new dy(t,this.predicate))},t}(),dy=function(t){function e(e,n){t.call(this,e),this.predicate=n,this.skipping=!0,this.index=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(V.a);function yy(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var n=t[t.length-1];Object(ph.a)(n)?t.pop():n=null;var r=t.length;return gh(1===r?new rt.a(t[0],n):r>1?new D.a(t,n):new it.a(n),e)}}W.a.prototype.skipWhile=function(t){return fy(t)(this)},W.a.prototype.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return yy.apply(void 0,t)(this)};var vy=new(function(){function t(t){if(this.root=t,t.setImmediate&&"function"==typeof t.setImmediate)this.setImmediate=t.setImmediate.bind(t),this.clearImmediate=t.clearImmediate.bind(t);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.setImmediate=this.canUseProcessNextTick()?this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.createReadyStateChangeSetImmediate():this.createSetTimeoutSetImmediate();var e=function t(e){delete t.instance.tasksByHandle[e]};e.instance=this,this.clearImmediate=e}}return t.prototype.identify=function(t){return this.root.Object.prototype.toString.call(t)},t.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},t.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},t.prototype.canUseReadyStateChange=function(){var t=this.root.document;return Boolean(t&&"onreadystatechange"in t.createElement("script"))},t.prototype.canUsePostMessage=function(){var t=this.root;if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}return!1},t.prototype.partiallyApplied=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=function t(){var e=t.handler;"function"==typeof e?e.apply(void 0,t.args):new Function(""+e)()};return r.handler=t,r.args=e,r},t.prototype.addFromSetImmediateArguments=function(t){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,t),this.nextHandle++},t.prototype.createProcessNextTickSetImmediate=function(){var t=function t(){var e=t.instance,n=e.addFromSetImmediateArguments(arguments);return e.root.process.nextTick(e.partiallyApplied(e.runIfPresent,n)),n};return t.instance=this,t},t.prototype.createPostMessageSetImmediate=function(){var t=this.root,e="setImmediate$"+t.Math.random()+"$",n=function n(r){var i=n.instance;r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&i.runIfPresent(+r.data.slice(e.length))};n.instance=this,t.addEventListener("message",n,!1);var r=function t(){var e=t.messagePrefix,n=t.instance,r=n.addFromSetImmediateArguments(arguments);return n.root.postMessage(e+r,"*"),r};return r.instance=this,r.messagePrefix=e,r},t.prototype.runIfPresent=function(t){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,t),0);else{var e=this.tasksByHandle[t];if(e){this.currentlyRunningATask=!0;try{e()}finally{this.clearImmediate(t),this.currentlyRunningATask=!1}}}},t.prototype.createMessageChannelSetImmediate=function(){var t=this,e=new this.root.MessageChannel;e.port1.onmessage=function(e){t.runIfPresent(e.data)};var n=function t(){var e=t.channel,n=t.instance.addFromSetImmediateArguments(arguments);return e.port2.postMessage(n),n};return n.channel=e,n.instance=this,n},t.prototype.createReadyStateChangeSetImmediate=function(){var t=function t(){var e=t.instance,n=e.root.document,r=n.documentElement,i=e.addFromSetImmediateArguments(arguments),o=n.createElement("script");return o.onreadystatechange=function(){e.runIfPresent(i),o.onreadystatechange=null,r.removeChild(o),o=null},r.appendChild(o),i};return t.instance=this,t},t.prototype.createSetTimeoutSetImmediate=function(){var t=function t(){var e=t.instance,n=e.addFromSetImmediateArguments(arguments);return e.root.setTimeout(e.partiallyApplied(e.runIfPresent,n),0),n};return t.instance=this,t},t}())(Q.a),my=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return Object(o.__extends)(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=vy.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(vy.clearImmediate(n),e.scheduled=void 0)},e}(ho),gy=new(function(t){function e(){t.apply(this,arguments)}return Object(o.__extends)(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(po))(my),by=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=gy),t.call(this),this.source=e,this.delayTime=n,this.scheduler=r,(!Oh(n)||n<0)&&(this.delayTime=0),r&&"function"==typeof r.schedule||(this.scheduler=gy)}return Object(o.__extends)(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=gy),new e(t,n,r)},e.dispatch=function(t){return this.add(t.source.subscribe(t.subscriber))},e.prototype._subscribe=function(t){return this.scheduler.schedule(e.dispatch,this.delayTime,{source:this.source,subscriber:t})},e}(W.a),wy=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new by(e,this.delay,this.scheduler).subscribe(t)},t}();W.a.prototype.subscribeOn=function(t,e){return void 0===e&&(e=0),function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new wy(t,e))}}(t,e)(this)};var _y=n("lAP5");function Sy(){return bo(_y.a)}function Ey(){return Sy()(this)}function Ty(t,e){return function(n){return n.lift(new Iy(t,e))}}W.a.prototype.switch=Ey,W.a.prototype._switch=Ey;var Iy=function(){function t(t,e){this.observable=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Cy(t,this.observable,this.resultSelector))},t}(),Cy=function(t){function e(e,n,r){t.call(this,e),this.inner=n,this.resultSelector=r,this.index=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.innerSubscription;e&&e.unsubscribe(),this.add(this.innerSubscription=Object(yt.a)(this,this.inner,t,this.index++))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.resultSelector?this.tryResultSelector(t,e,n,r):o.next(e)},e.prototype.tryResultSelector=function(t,e,n,r){var i,o=this.resultSelector,s=this.destination;try{i=o(t,e,n,r)}catch(t){return void s.error(t)}s.next(i)},e}(dt.a);function xy(t){return function(e){return 0===t?new it.a:e.lift(new Oy(t))}}W.a.prototype.switchMapTo=function(t,e){return Ty(t,e)(this)};var Oy=function(){function t(t){if(this.total=t,this.total<0)throw new Bt}return t.prototype.call=function(t,e){return e.subscribe(new ky(t,this.total))},t}(),ky=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(V.a);function Ay(t){return function(e){return e.lift(new Ny(t))}}W.a.prototype.take=function(t){return xy(t)(this)},W.a.prototype.takeLast=function(t){return qt(t)(this)};var Ny=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Ry(t,this.notifier))},t}(),Ry=function(t){function e(e,n){t.call(this,e),this.notifier=n,this.add(Object(yt.a)(this,n))}return Object(o.__extends)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.complete()},e.prototype.notifyComplete=function(){},e}(dt.a);function Dy(t){return function(e){return e.lift(new Py(t))}}W.a.prototype.takeUntil=function(t){return Ay(t)(this)};var Py=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new My(t,this.predicate))},t}(),My=function(t){function e(e,n){t.call(this,e),this.predicate=n,this.index=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(V.a);W.a.prototype.takeWhile=function(t){return Dy(t)(this)};var jy={leading:!0,trailing:!1};function Ly(t,e){return void 0===e&&(e=jy),function(n){return n.lift(new Vy(t,e.leading,e.trailing))}}var Vy=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new Uy(t,this.durationSelector,this.leading,this.trailing))},t}(),Uy=function(t){function e(e,n,r,i){t.call(this,e),this.destination=e,this.durationSelector=n,this._leading=r,this._trailing=i,this._hasTrailingValue=!1}return Object(o.__extends)(e,t),e.prototype._next=function(t){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t);else{var e=this.tryDurationSelector(t);e&&this.add(this.throttled=Object(yt.a)(this,e)),this._leading&&(this.destination.next(t),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=t))}},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype._unsubscribe=function(){var t=this.throttled;this._trailingValue=null,this._hasTrailingValue=!1,t&&(this.remove(t),this.throttled=null,t.unsubscribe())},e.prototype._sendTrailing=function(){var t=this;t.throttled&&t._trailing&&t._hasTrailingValue&&(t.destination.next(t._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1)},e.prototype.notifyNext=function(t,e,n,r,i){this._sendTrailing(),this._unsubscribe()},e.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},e}(dt.a);function Fy(t,e,n){return void 0===e&&(e=kh),void 0===n&&(n=jy),function(r){return r.lift(new By(t,e,n.leading,n.trailing))}}W.a.prototype.throttle=function(t,e){return void 0===e&&(e=jy),Ly(t,e)(this)};var By=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new qy(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),qy=function(t){function e(e,n,r,i,o){t.call(this,e),this.duration=n,this.scheduler=r,this.leading=i,this.trailing=o,this._hasTrailingValue=!1,this._trailingValue=null}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Hy,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(V.a);function Hy(t){t.subscriber.clearThrottle()}function Wy(t){return void 0===t&&(t=kh),function(e){return e.lift(new zy(t))}}W.a.prototype.throttleTime=function(t,e,n){return void 0===e&&(e=kh),void 0===n&&(n=jy),Fy(t,e,n)(this)};var zy=function(){function t(t){this.scheduler=t}return t.prototype.call=function(t,e){return e.subscribe(new Gy(t,this.scheduler))},t}(),Gy=function(t){function e(e,n){t.call(this,e),this.scheduler=n,this.lastTime=0,this.lastTime=n.now()}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.scheduler.now(),n=e-this.lastTime;this.lastTime=e,this.destination.next(new function(t,e){this.value=t,this.interval=e}(t,n))},e}(V.a);W.a.prototype.timeInterval=function(t){return void 0===t&&(t=kh),Wy(t)(this)};var Ky=function(t){function e(){var e=t.call(this,"Timeout has occurred");this.name=e.name="TimeoutError",this.stack=e.stack,this.message=e.message}return Object(o.__extends)(e,t),e}(Error);function Qy(t,e){void 0===e&&(e=kh);var n=Bh(t),r=n?+t-e.now():Math.abs(t);return function(t){return t.lift(new Xy(r,n,e,new Ky))}}var Xy=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.scheduler=n,this.errorInstance=r}return t.prototype.call=function(t,e){return e.subscribe(new Yy(t,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))},t}(),Yy=function(t){function e(e,n,r,i,o){t.call(this,e),this.absoluteTimeout=n,this.waitFor=r,this.scheduler=i,this.errorInstance=o,this.action=null,this.scheduleTimeout()}return Object(o.__extends)(e,t),e.dispatchTimeout=function(t){t.error(t.errorInstance)},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null},e}(V.a);function Jy(t,e,n){return void 0===n&&(n=kh),function(r){var i=Bh(t),o=i?+t-n.now():Math.abs(t);return r.lift(new Zy(o,i,e,n))}}W.a.prototype.timeout=function(t,e){return void 0===e&&(e=kh),Qy(t,e)(this)};var Zy=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new $y(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),$y=function(t){function e(e,n,r,i,o){t.call(this,e),this.absoluteTimeout=n,this.waitFor=r,this.withObservable=i,this.scheduler=o,this.action=null,this.scheduleTimeout()}return Object(o.__extends)(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(yt.a)(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(dt.a);function tv(t){return void 0===t&&(t=kh),U(function(e){return new ev(e,t.now())})}W.a.prototype.timeoutWith=function(t,e,n){return void 0===n&&(n=kh),Jy(t,e,n)(this)};var ev=function(t,e){this.value=t,this.timestamp=e};function nv(t,e,n){return 0===n?[e]:(t.push(e),t)}function rv(){return Xt(nv,[])}function iv(t){return function(e){return e.lift(new ov(t))}}W.a.prototype.timestamp=function(t){return void 0===t&&(t=kh),tv(t)(this)},W.a.prototype.toArray=function(){return rv()(this)},n("EN1B");var ov=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new sv(t),r=e.subscribe(n);return r.closed||n.add(Object(yt.a)(n,this.windowBoundaries)),r},t}(),sv=function(t){function e(e){t.call(this,e),this.window=new A.b,e.next(this.window)}return Object(o.__extends)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new A.b;e.next(n)},e}(dt.a);function av(t,e){return void 0===e&&(e=0),function(n){return n.lift(new uv(t,e))}}W.a.prototype.window=function(t){return iv(t)(this)};var uv=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new cv(t,this.windowSize,this.startWindowEvery))},t}(),cv=function(t){function e(e,n,r){t.call(this,e),this.destination=e,this.windowSize=n,this.startWindowEvery=r,this.windows=[new A.b],this.count=0,e.next(this.windows[0])}return Object(o.__extends)(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,s=0;s<o&&!this.closed;s++)i[s].next(t);var a=this.count-r+1;if(a>=0&&a%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var u=new A.b;i.push(u),n.next(u)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(V.a);function lv(t){var e=kh,n=null,r=Number.POSITIVE_INFINITY;return Object(ph.a)(arguments[3])&&(e=arguments[3]),Object(ph.a)(arguments[2])?e=arguments[2]:Oh(arguments[2])&&(r=arguments[2]),Object(ph.a)(arguments[1])?e=arguments[1]:Oh(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new hv(t,n,r,e))}}W.a.prototype.windowCount=function(t,e){return void 0===e&&(e=0),av(t,e)(this)};var hv=function(){function t(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new pv(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),fv=function(t){function e(){t.apply(this,arguments),this._numberOfNextedValues=0}return Object(o.__extends)(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(A.b),pv=function(t){function e(e,n,r,i,o){t.call(this,e),this.destination=e,this.windowTimeSpan=n,this.windowCreationInterval=r,this.maxWindowSize=i,this.scheduler=o,this.windows=[];var s=this.openWindow();if(null!==r&&r>=0){var a={windowTimeSpan:n,windowCreationInterval:r,subscriber:this,scheduler:o};this.add(o.schedule(vv,n,{subscriber:this,window:s,context:null})),this.add(o.schedule(yv,r,a))}else this.add(o.schedule(dv,n,{subscriber:this,window:s,windowTimeSpan:n}))}return Object(o.__extends)(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new fv;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(V.a);function dv(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function yv(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o=n.openWindow(),s={action:this,subscription:null};s.subscription=r.schedule(vv,e,{subscriber:n,window:o,context:s}),this.add(s.subscription),this.schedule(t,i)}function vv(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}function mv(t,e){return function(n){return n.lift(new gv(t,e))}}W.a.prototype.windowTime=function(t){var e=kh,n=null,r=Number.POSITIVE_INFINITY;return Object(ph.a)(arguments[3])&&(e=arguments[3]),Object(ph.a)(arguments[2])?e=arguments[2]:Oh(arguments[2])&&(r=arguments[2]),Object(ph.a)(arguments[1])?e=arguments[1]:Oh(arguments[1])&&(n=arguments[1]),lv(t,n,r,e)(this)};var gv=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new bv(t,this.openings,this.closingSelector))},t}(),bv=function(t){function e(e,n,r){t.call(this,e),this.openings=n,this.closingSelector=r,this.contexts=[],this.add(this.openSubscription=Object(yt.a)(this,n,n))}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,i){if(t===this.openings){var o=this.closingSelector,s=Object(oh.a)(o)(e);if(s===sh.a)return this.error(sh.a.e);var a=new A.b,u=new lo.a,c={window:a,subscription:u};this.contexts.push(c);var l=Object(yt.a)(this,s,c);l.closed?this.closeWindow(this.contexts.length-1):(l.context=c,u.add(l)),this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(dt.a);function wv(t){return function(e){return e.lift(new _v(t))}}W.a.prototype.windowToggle=function(t,e){return mv(t,e)(this)};var _v=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Sv(t,this.closingSelector))},t}(),Sv=function(t){function e(e,n){t.call(this,e),this.destination=e,this.closingSelector=n,this.openWindow()}return Object(o.__extends)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n=this.window=new A.b;this.destination.next(n);var r=Object(oh.a)(this.closingSelector)();if(r===sh.a){var i=sh.a.e;this.destination.error(i),this.window.error(i)}else this.add(this.closingNotification=Object(yt.a)(this,r))},e}(dt.a);function Ev(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Tv(t,n))}}W.a.prototype.windowWhen=function(t){return wv(t)(this)};var Tv=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new Iv(t,this.observables,this.project))},t}(),Iv=function(t){function e(e,n,r){t.call(this,e),this.observables=n,this.project=r,this.toRespond=[];var i=n.length;this.values=new Array(i);for(var o=0;o<i;o++)this.toRespond.push(o);for(o=0;o<i;o++){var s=n[o];this.add(Object(yt.a)(this,s,s,o))}}return Object(o.__extends)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);-1!==s&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(dt.a);function Cv(t){return function(e){return e.lift(new zh(t))}}W.a.prototype.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return Ev.apply(void 0,t)(this)},W.a.prototype.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return Hh.apply(void 0,t)(this)},W.a.prototype.zipAll=function(t){return Cv(t)(this)},n("NO/a"),n("oCQ5"),new function(t){t.requestAnimationFrame?(this.cancelAnimationFrame=t.cancelAnimationFrame.bind(t),this.requestAnimationFrame=t.requestAnimationFrame.bind(t)):t.mozRequestAnimationFrame?(this.cancelAnimationFrame=t.mozCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.mozRequestAnimationFrame.bind(t)):t.webkitRequestAnimationFrame?(this.cancelAnimationFrame=t.webkitCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.webkitRequestAnimationFrame.bind(t)):t.msRequestAnimationFrame?(this.cancelAnimationFrame=t.msCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.msRequestAnimationFrame.bind(t)):t.oRequestAnimationFrame?(this.cancelAnimationFrame=t.oCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.oRequestAnimationFrame.bind(t)):(this.cancelAnimationFrame=t.clearTimeout.bind(t),this.requestAnimationFrame=function(e){return t.setTimeout(e,1e3/60)})}(Q.a),n("tLDX");var xv=n("0P3J"),Ov=n("3a3m"),kv=function(t){this.db=t,this.title="SiX"},Av=i.Y({encapsulation:0,styles:[["h1[_ngcontent-%COMP%]{color:#f90;font-size:8em;font-family:roma,sans-serif}p[_ngcontent-%COMP%]{color:#fff}@font-face{font-family:roma;src:url(Forvertz.837cc2a2d810daaa49ec.ttf)}.rules[_ngcontent-%COMP%]{border:3px solid #f90;font-size:20px}.row[_ngcontent-%COMP%]{margin-left:20%;margin-right:20%}.button-white[_ngcontent-%COMP%]{background-color:#f90;color:#000!important;padding:4px 10px;-webkit-transition:all .2s ease;transition:all .2s ease;border-radius:4px}.button-white[_ngcontent-%COMP%]:hover{color:#000!important;background-color:#f8ead6;text-decoration:none;border-radius:0}.zoomInDown[_ngcontent-%COMP%]{-webkit-animation-name:zoomInDown;animation-name:zoomInDown;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}@-webkit-keyframes zoomInDown{0%{opacity:0;-webkit-transform:scale3d(.1,.1,.1) translate3d(0,-1000px,0);transform:scale3d(.1,.1,.1) translate3d(0,-1000px,0);-webkit-animation-timing-function:cubic-bezier(.55,.055,.675,.19);animation-timing-function:cubic-bezier(.55,.055,.675,.19)}60%{opacity:1;-webkit-transform:scale3d(.475,.475,.475) translate3d(0,60px,0);transform:scale3d(.475,.475,.475) translate3d(0,60px,0);-webkit-animation-timing-function:cubic-bezier(.175,.885,.32,1);animation-timing-function:cubic-bezier(.175,.885,.32,1)}}@keyframes zoomInDown{0%{opacity:0;-webkit-transform:scale3d(.1,.1,.1) translate3d(0,-1000px,0);transform:scale3d(.1,.1,.1) translate3d(0,-1000px,0);-webkit-animation-timing-function:cubic-bezier(.55,.055,.675,.19);animation-timing-function:cubic-bezier(.55,.055,.675,.19)}60%{opacity:1;-webkit-transform:scale3d(.475,.475,.475) translate3d(0,60px,0);transform:scale3d(.475,.475,.475) translate3d(0,60px,0);-webkit-animation-timing-function:cubic-bezier(.175,.885,.32,1);animation-timing-function:cubic-bezier(.175,.885,.32,1)}}.rubberBand[_ngcontent-%COMP%]{-webkit-animation-name:rubberBand;animation-name:rubberBand;-webkit-animation-duration:1s;animation-duration:3s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes rubberBand{0%,100%{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}30%{-webkit-transform:scale3d(1.25,.75,1);transform:scale3d(1.25,.75,1)}40%{-webkit-transform:scale3d(.75,1.25,1);transform:scale3d(.75,1.25,1)}50%{-webkit-transform:scale3d(1.15,.85,1);transform:scale3d(1.15,.85,1)}65%{-webkit-transform:scale3d(.95,1.05,1);transform:scale3d(.95,1.05,1)}75%{-webkit-transform:scale3d(1.05,.95,1);transform:scale3d(1.05,.95,1)}}@keyframes rubberBand{0%,100%{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}30%{-webkit-transform:scale3d(1.25,.75,1);transform:scale3d(1.25,.75,1)}40%{-webkit-transform:scale3d(.75,1.25,1);transform:scale3d(.75,1.25,1)}50%{-webkit-transform:scale3d(1.15,.85,1);transform:scale3d(1.15,.85,1)}65%{-webkit-transform:scale3d(.95,1.05,1);transform:scale3d(.95,1.05,1)}75%{-webkit-transform:scale3d(1.05,.95,1);transform:scale3d(1.05,.95,1)}}"]],data:{}});function Nv(t){return i._16(0,[(t()(),i._14(-1,null,["\n\n\n\n"])),(t()(),i._0(1,0,null,null,30,"div",[["style","text-align:center"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n  "])),(t()(),i._0(3,0,null,null,10,"div",[["class","rubberBand"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(5,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),i._14(-1,null,["SIX"])),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(8,0,null,null,4,"div",[["class","zoomInDown"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n      "])),(t()(),i._0(10,0,null,null,1,"button",[["class","button-white"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.googleSignIn()&&r),r},null,null)),(t()(),i._14(-1,null,["PLAY NOW !"])),(t()(),i._14(-1,null,["\n    "])),(t()(),i._14(-1,null,["\n  "])),(t()(),i._14(-1,null,["\n\n  "])),(t()(),i._0(15,0,null,null,0,"img",[["alt","Angular Logo"],["src","https://media.giphy.com/media/Cx1uhx6pH1scw/giphy.gif"],["width","500"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n\n\n  "])),(t()(),i._0(17,0,null,null,13,"div",[["class","container"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(19,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n      "])),(t()(),i._0(21,0,null,null,7,"p",[["class","rugle"]],null,null,null,null,null)),(t()(),i._14(-1,null,["Players Blue and Red take turns placing hexes. Blue plays first.\n        "])),(t()(),i._0(23,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i._14(-1,null,["Each hex (other than the first two) must be played adjacent to two previously played hexes (playable options are\n        shown in light gray).\n        "])),(t()(),i._0(25,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i._14(-1,null,[" win if you surround at least one of your opponents' hexes with your own, or if you play 5 of your own hexes in a\n        row.\n        "])),(t()(),i._0(27,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i._14(-1,null,['You can hit 1 or 2 to zoom in or out respectively Hit "U" to undo Enjoy!'])),(t()(),i._14(-1,null,["\n    "])),(t()(),i._14(-1,null,["\n  "])),(t()(),i._14(-1,null,["\n\n"])),(t()(),i._14(-1,null,["\n"]))],null,null)}var Rv=i.W("app-home",xo,function(t){return i._16(0,[(t()(),i._0(0,0,null,null,1,"app-home",[],null,null,null,Nv,Av)),i.Z(1,114688,null,0,xo,[Pi,Co],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Dv=i.Y({encapsulation:0,styles:[['.plateaux[_ngcontent-%COMP%]{max-width:90%;margin-top:2%}.button-white[_ngcontent-%COMP%]{background-color:#fff;color:#000!important;padding:4px 10px;-webkit-transition:all .2s ease;transition:all .2s ease;border-radius:4px}.button-white[_ngcontent-%COMP%]:hover{color:#000!important;background-color:#f8ead6;text-decoration:none;border-radius:0}.btn-obtion[_ngcontent-%COMP%]{background-color:#fff;color:#000!important;padding:4px 10px;-webkit-transition:all .2s ease;transition:all .2s ease;border-radius:10px}.btn-obtion[_ngcontent-%COMP%]:hover{color:#000!important;background-color:orange;text-decoration:none;border-radius:3px}.btn-info[_ngcontent-%COMP%]{margin-top:20px}.firstplayer[_ngcontent-%COMP%]{float:left;margin-top:4%}.secondplayer[_ngcontent-%COMP%]{float:right;margin-top:4%}.hexagon-icon[_ngcontent-%COMP%]{position:relative;width:100px;height:57.74px;background-color:orange;margin:70% 0 28.87px 20%;border-left:5px solid #fff;border-right:5px solid #fff}.hexagon-icon[_ngcontent-%COMP%]:after, .hexagon-icon[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:1;width:70.71px;height:70.71px;-webkit-transform:scaleY(.5774) rotate(-45deg);transform:scaleY(.5774) rotate(-45deg);background-color:inherit;left:9.6447px}.hexagon-icon[_ngcontent-%COMP%]:before{top:-35.3553px;border-top:7.0711px solid #fff;border-right:7.0711px solid #fff}.hexagon-icon[_ngcontent-%COMP%]:after{bottom:-35.3553px;border-bottom:7.0711px solid #fff;border-left:7.0711px solid #fff}.rotateIn[_ngcontent-%COMP%]{-webkit-animation-name:rotateIn;animation-name:rotateIn;-webkit-animation-duration:1s;animation-duration:4s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes rotateIn{0%{-webkit-transform-origin:center;transform-origin:center;-webkit-transform:rotate3d(0,0,1,0deg);transform:rotate3d(0,0,1,-360deg)}100%{-webkit-transform-origin:center;transform-origin:center}}@keyframes rotateIn{0%{-webkit-transform-origin:center;transform-origin:center;-webkit-transform:rotate3d(0,0,1,0deg);transform:rotate3d(0,0,1,-360deg)}100%{-webkit-transform-origin:center;transform-origin:center}}#mycanvas[_ngcontent-%COMP%]{background-color:#000;margin-top:10%}']],data:{}});function Pv(t){return i._16(0,[(t()(),i._14(-1,null,["\n\n\n\n"])),(t()(),i._0(1,0,null,null,96,"div",[["style","text-align:center"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n\n  "])),(t()(),i._14(-1,null,["\n\n  "])),(t()(),i._0(4,0,null,null,14,"div",[["class","firstplayer"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(6,0,null,null,1,"a",[["class","nav-item button-white player1"],["href","#"]],null,null,null,null,null)),(t()(),i._14(-1,null,["Player 1"])),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(9,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(11,0,null,null,0,"img",[["alt","score"],["class","hexagon p1"],["src","https://zupimages.net/up/18/13/my9v.png"],["width","230px"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(13,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(15,0,null,null,0,"img",[["alt","score"],["class","hexagon p1j"],["src","https://zupimages.net/up/18/13/my9v.png"],["width","230px"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(17,0,null,null,0,"div",[["class","hexagon-icon rotateIn"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n  "])),(t()(),i._14(-1,null,["\n\n\n\n  "])),(t()(),i._14(-1,null,["\n\n  "])),(t()(),i._0(21,0,null,null,14,"div",[["class","secondplayer"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(23,0,null,null,1,"a",[["class","nav-item button-white player2"],["href","#"]],null,null,null,null,null)),(t()(),i._14(-1,null,["Player 2"])),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(26,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(28,0,null,null,0,"img",[["alt","score"],["class","hexagon p2"],["src","https://zupimages.net/up/18/13/my9v.png"],["width","230px"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(30,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(32,0,null,null,0,"img",[["alt","score"],["class","hexagon2 p2j"],["src","https://zupimages.net/up/18/13/my9v.png"],["width","230px"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(34,0,null,null,0,"div",[["class","hexagon-icon rotateIn"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n  "])),(t()(),i._14(-1,null,["\n\n\n\n\n  "])),(t()(),i._14(-1,null,["\n\n\n\n  "])),(t()(),i._0(38,0,null,null,59,"div",[["style","text-align:center"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n\n\n\n\n\n\n    "])),(t()(),i._0(40,0,null,null,3,"div",[["class","container col-12"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n\n      "])),(t()(),i._0(42,0,null,null,0,"div",[["class","hexagon"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n\n    "])),(t()(),i._14(-1,null,["\n\n\n    "])),(t()(),i._14(-1,null,["\n\n    "])),(t()(),i._0(46,0,null,null,1,"canvas",[["height","500"],["id","mycanvas"],["width","500"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n\n      Message pour les navigateurs ne supportant pas encore canvas.\n\n    "])),(t()(),i._14(-1,null,["\n\n    "])),(t()(),i._0(49,0,null,null,45,"div",[["class","container col-12"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n\n      "])),(t()(),i._14(-1,null,["\n      "])),(t()(),i._0(52,0,null,null,1,"button",[["class","btn btn-info"],["data-target","#myModal"],["data-toggle","modal"],["type","button"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n        Rules !\n      "])),(t()(),i._14(-1,null,["\n\n      "])),(t()(),i._14(-1,null,["\n      "])),(t()(),i._0(56,0,null,null,31,"div",[["class","modal fade"],["id","myModal"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n        "])),(t()(),i._0(58,0,null,null,28,"div",[["class","modal-dialog"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n          "])),(t()(),i._0(60,0,null,null,25,"div",[["class","modal-content"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n\n\n\n            "])),(t()(),i._14(-1,null,["\n            "])),(t()(),i._0(63,0,null,null,7,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n              "])),(t()(),i._0(65,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(t()(),i._14(-1,null,["Rules"])),(t()(),i._14(-1,null,["\n              "])),(t()(),i._0(68,0,null,null,1,"button",[["class","close"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\xd7"])),(t()(),i._14(-1,null,["\n            "])),(t()(),i._14(-1,null,["\n\n            "])),(t()(),i._14(-1,null,["\n            "])),(t()(),i._0(73,0,null,null,1,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n              Players White and Orange take turns placing hexes. White plays first. Each hex (other than the first two) must be played\n              adjacent to two previously played hexes (playable options are shown in light gray). win if you surround at\n              least one of your opponents' hexes with your own, or if you play 5 of your own hexes in a row.\n            "])),(t()(),i._14(-1,null,["\n\n            "])),(t()(),i._14(-1,null,["\n            "])),(t()(),i._0(77,0,null,null,7,"div",[["class","modal-footer"]],null,null,null,null,null)),(t()(),i._14(-1,null,["\n              "])),(t()(),i._0(79,0,null,null,1,"a",[["class","btn btn-info"],["href",""],["type","button"]],null,null,null,null,null)),(t()(),i._14(-1,null,["Replay"])),(t()(),i._14(-1,null,["\n              "])),(t()(),i._0(82,0,null,null,1,"a",[["class","btn btn-info"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(t()(),i._14(-1,null,["Close"])),(t()(),i._14(-1,null,["\n            "])),(t()(),i._14(-1,null,["\n\n          "])),(t()(),i._14(-1,null,["\n        "])),(t()(),i._14(-1,null,["\n      "])),(t()(),i._14(-1,null,["\n      "])),(t()(),i._0(89,0,null,null,0,"p",[],null,null,null,null,null)),(t()(),i._14(-1,null,["\n      "])),(t()(),i._0(91,0,null,null,1,"a",[["class","nav-item btn-obtion"],["href",""]],null,null,null,null,null)),(t()(),i._14(-1,null,["Exit"])),(t()(),i._14(-1,null,["\n\n      "])),(t()(),i._14(-1,null,["\n    "])),(t()(),i._14(-1,null,["\n    "])),(t()(),i._0(96,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i._14(-1,null,["\n\n  "]))],null,null)}var Mv=i.W("app-game",Oo,function(t){return i._16(0,[(t()(),i._0(0,0,null,null,1,"app-game",[],null,null,null,Pv,Dv)),i.Z(1,114688,null,0,Oo,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),jv=i.Y({encapsulation:0,styles:[["p[_ngcontent-%COMP%]{color:#000}"]],data:{}});function Lv(t){return i._16(0,[(t()(),i._0(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),i._14(-1,null,["\n  Trying to find opponent, please wait ...\n"])),(t()(),i._14(-1,null,["\n"]))],null,null)}var Vv=i.W("app-match-making",rh,function(t){return i._16(0,[(t()(),i._0(0,0,null,null,1,"app-match-making",[],null,null,null,Lv,jv)),i.Z(1,245760,null,0,rh,[Co,Lo,Pi],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Uv=i.Y({encapsulation:0,styles:[[""]],data:{}});function Fv(t){return i._16(0,[(t()(),i._0(0,0,null,null,1,"li",[["class","text"]],null,null,null,null,null)),(t()(),i._14(1,null,["\n    ","\n  "]))],null,function(t,e){t(e,1,0,e.context.$implicit.name)})}function Bv(t){return i._16(0,[(t()(),i._0(0,16777216,null,null,2,"router-outlet",[],null,null,null,null,null)),i.Z(1,212992,null,0,Ui,[Vi,i.K,i.j,[8,null],i.h],null,null),(t()(),i._14(-1,null,["\n"])),(t()(),i._14(-1,null,["\n\n"])),(t()(),i._0(4,0,null,null,5,"ul",[],null,null,null,null,null)),(t()(),i._14(-1,null,["\n  "])),(t()(),i.V(16777216,null,null,2,null,Fv)),i.Z(7,802816,null,0,_,[i.K,i.H,i.p],{ngForOf:[0,"ngForOf"]},null),i._11(131072,C,[i.h]),(t()(),i._14(-1,null,["\n"])),(t()(),i._14(-1,null,["\n\n"])),(t()(),i._0(11,0,null,null,0,"hr",[],null,null,null,null,null)),(t()(),i._14(-1,null,["\n\n"])),(t()(),i._0(13,0,null,null,3,"pre",[],null,null,null,null,null)),(t()(),i._14(14,null,["",""])),i._11(131072,C,[i.h]),i._11(0,x,[]),(t()(),i._14(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,1,0),t(e,7,0,i._15(e,7,0,i._9(e,8).transform(n.items)))},function(t,e){var n=e.component;t(e,14,0,i._15(e,14,0,i._9(e,16).transform(i._15(e,14,0,i._9(e,15).transform(n.objObservable)))))})}var qv=i.W("app-root",kv,function(t){return i._16(0,[(t()(),i._0(0,0,null,null,1,"app-root",[],null,null,null,Bv,Uv)),i.Z(1,49152,null,0,kv,[Lo],null,null)],null,null)},{},{},[]),Hv=i.X(ih,[kv],function(t){return i._6([i._7(512,i.j,i.T,[[8,[Rv,Mv,Vv,qv]],[3,i.j],i.u]),i._7(5120,i.r,i._12,[[3,i.r]]),i._7(4608,g,b,[i.r,[2,m]]),i._7(5120,i.c,i._2,[]),i._7(5120,i.p,i._8,[]),i._7(5120,i.q,i._10,[]),i._7(4608,gn,bn,[k]),i._7(6144,i.C,null,[gn]),i._7(4608,We,ze,[]),i._7(5120,me,function(t,e,n,r,i){return[new qe(t,e),new Xe(n),new Ge(r,i)]},[k,i.w,k,k,We]),i._7(4608,ge,ge,[me,i.w]),i._7(135680,_e,_e,[k]),i._7(4608,Oe,Oe,[ge,_e]),i._7(6144,i.A,null,[Oe]),i._7(6144,we,null,[_e]),i._7(4608,i.I,i.I,[i.w]),i._7(4608,ce,ce,[k]),i._7(4608,pe,pe,[k]),i._7(5120,uo,co,[ao,vo]),i._7(4608,Lo,Lo,[uo,[2,Mo]]),i._7(5120,So,Eo,[uo]),i._7(5120,Xr,to,[Pi]),i._7(4608,Hi,Hi,[]),i._7(6144,Bi,null,[Hi]),i._7(135680,Wi,Wi,[Pi,i.t,i.i,i.o,Bi]),i._7(4608,qi,qi,[]),i._7(5120,io,ro,[eo]),i._7(5120,i.b,function(t){return[t]},[io]),i._7(4608,Co,Co,[So]),i._7(512,O,O,[]),i._7(1024,i.k,On,[]),i._7(1024,i.v,function(){return[Qi()]},[]),i._7(512,eo,eo,[i.o]),i._7(1024,i.d,function(t,e){return[(n=t,de("probe",ve),de("coreTokens",Object(o.__assign)({},ye,(n||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return ve}),no(e)];var n},[[2,i.v],eo]),i._7(512,i.e,i.e,[[2,i.d]]),i._7(131584,i.g,i.g,[i.w,i.U,i.o,i.k,i.j,i.e]),i._7(512,i.f,i.f,[i.g]),i._7(512,kn,kn,[[3,kn]]),i._7(1024,Gi,Ji,[[3,Pi]]),i._7(512,mr,gr,[]),i._7(512,Vi,Vi,[]),i._7(256,zi,{},[]),i._7(1024,u,Yi,[s,[2,c],zi]),i._7(512,l,l,[u]),i._7(512,i.i,i.i,[]),i._7(512,i.t,i.F,[i.i,[2,i.G]]),i._7(1024,Oi,function(){return[[{path:"",component:xo},{path:"game/:id",component:Oo},{path:"matchmaking",component:rh}]]},[]),i._7(1024,Pi,$i,[i.g,mr,Vi,l,i.o,i.t,i.i,Oi,zi,[2,Ai],[2,Ci]]),i._7(512,Xi,Xi,[[2,Gi],[2,Pi]]),i._7(512,mo,mo,[]),i._7(512,nh,nh,[]),i._7(512,To,To,[]),i._7(512,ih,ih,[]),i._7(256,ao,{apiKey:"AIzaSyCxh1nNpMJNqU9KvY-QNMPP1p4rW3EqPL8",authDomain:"appli-six.firebaseapp.com",databaseURL:"https://appli-six.firebaseio.com",projectId:"appli-six",storageBucket:"appli-six.appspot.com",messagingSenderId:"347318477577"},[]),i._7(256,vo,void 0,[])])});Object(i.O)(),xn().bootstrapModuleFactory(Hv).catch(function(t){return console.log(t)})},x6VL:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("TToO"),i=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return Object(r.__extends)(e,t),e}(Error)}},[0]);